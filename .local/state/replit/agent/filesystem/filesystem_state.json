{"file_contents":{"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# StockCéramique - Inventory Management System\n\n## Overview\n\nStockCéramique is a comprehensive inventory management system designed for ceramic spare parts management. The application provides a complete solution for tracking stock levels, managing suppliers, processing purchase requests, handling receptions and outbound shipments, and generating reports. It features a modern web interface built with React and TypeScript, backed by a PostgreSQL database with Drizzle ORM for data persistence.\n\nThe system is specifically tailored for industrial environments where precise inventory control is critical, offering features like low stock alerts, detailed movement tracking, and comprehensive reporting capabilities.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## Recent Changes\n\n### August 2025 - Migration Complete\n- **Migration Completed**: Successfully migrated StockCéramique from Replit Agent to standard Replit environment (August 13, 2025)\n- **Database Schema Migration**: Pushed complete database schema with all tables and relationships (August 13, 2025)\n- **PostgreSQL Database**: Created and configured production PostgreSQL database with Neon provider (August 13, 2025)\n- **TypeScript Issues Resolved**: Fixed all storage layer type compatibility issues for database operations (August 13, 2025)\n- **API Integration Verified**: All REST endpoints working correctly with PostgreSQL backend (August 13, 2025)\n- **Full Stack Testing**: Verified CRUD operations for articles, suppliers, requestors, and purchase requests (August 13, 2025)\n- **Database Storage**: Implemented DatabaseStorage class replacing MemStorage for production use (August 13, 2025)\n- **Project Dependencies**: Installed all 70+ required Node.js packages and dependencies successfully (August 13, 2025)\n- **Workflow Configuration**: Application running successfully on port 5000 with hot reload enabled (August 13, 2025)\n- **Architecture Validated**: Confirmed client/server separation with proper security practices\n- **Production Ready**: System ready for deployment with authentic database backend\n\n#### Major Enhancements Implemented:\n1. **Advanced Search & AI-Powered Filtering**\n   - Implemented AdvancedSearch component with fuzzy matching and multi-criteria filtering\n   - Added intelligent search suggestions and real-time filtering\n   - Support for price ranges, stock levels, categories, and supplier filtering\n\n2. **Interactive Analytics & Business Intelligence**\n   - Created comprehensive Analytics page with predictive insights\n   - Implemented InteractiveChart component with multiple visualization types\n   - Added PredictiveAnalytics with AI-powered recommendations and demand forecasting\n   - Enhanced Dashboard with interactive charts and trend analysis\n\n3. **Performance Optimization & PWA Support**\n   - Developed PerformanceOptimizer component for real-time performance monitoring\n   - Implemented PWASupport for mobile app installation and offline capabilities\n   - Added caching strategies and performance metrics tracking\n   - Created PerformanceMonitor for system health monitoring\n\n4. **Enhanced User Experience**\n   - Modernized Articles page with advanced filtering and analytics visualization\n   - Added real-time performance tracking and optimization recommendations\n   - Implemented mobile-first design with PWA capabilities\n   - Enhanced Dashboard with predictive analytics integration\n\n5. **Comprehensive Settings System**\n   - Built complete settings interface with tabbed organization\n   - Added user preferences for workflow customization\n   - Implemented theme controls, language settings, and visual customization\n   - Created functional controls for auto-save, notifications, and security\n   - Added import/export functionality for configuration backup/restore\n\n#### Technical Achievements:\n- **Database Migration**: Successfully migrated from localStorage to PostgreSQL with Neon Database\n- **Real-time Dashboard**: Connected all stats and charts to live database queries\n- **Chart Data APIs**: Implemented 4 new API endpoints for chart data (stock evolution, purchase status, category distribution, recent movements)\n- **Empty State Handling**: Added proper empty states for charts when no data is available\n- **Database Storage**: Implemented full DatabaseStorage class with optimized queries using Drizzle ORM\n- **Reception System Optimization**: Implemented automatic conversion from purchase requests to receptions with editable quantity and price fields\n- **Outbound System Enhancement**: Added stock optimization with real-time stock calculations, insufficient stock warnings, and stock-after-outbound display\n- **Purchase Request Status Updates**: Fixed API validation issues for smooth status transitions\n- **Enhanced Status Visualization**: Improved status badge colors with proper dark mode support\n- All components use TypeScript for type safety\n- Implemented responsive design with Tailwind CSS\n- Added comprehensive error handling and loading states\n- Created modular, reusable components for scalability\n- Integrated Recharts for advanced data visualization\n- Added real-time performance monitoring capabilities\n- Built comprehensive settings system with full application control\n- Implemented user preference management with persistent storage\n\n### December 2024\n- Added new modules as requested:\n  - **\"Suivi des Achats\" (Purchase Follow-up)**: Complete purchase request tracking with status management (En Attente, Approuvé, Commandé, Refusé)\n  - **\"État du Stock\" (Stock Status)**: Comprehensive inventory overview with stock level analysis, filtering, and visual indicators\n- Enhanced navigation sidebar with new module links\n- Implemented responsive UI components using Shadcn/ui for consistent design\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript for type safety\n- **Build Tool**: Vite for fast development and optimized production builds\n- **UI Components**: Shadcn/ui component library built on Radix UI primitives\n- **Styling**: Tailwind CSS with custom Microsoft-inspired design tokens\n- **State Management**: TanStack Query (React Query) for server state management\n- **Routing**: Wouter for lightweight client-side routing\n- **Forms**: React Hook Form with Zod validation for robust form handling\n\n### Backend Architecture\n- **Runtime**: Node.js with TypeScript\n- **Framework**: Express.js for RESTful API endpoints\n- **Database ORM**: Drizzle ORM for type-safe database operations\n- **Validation**: Zod schemas shared between client and server\n- **Development**: Hot reload with Vite integration\n\n### Data Storage\n- **Primary Database**: PostgreSQL with connection pooling\n- **Database Provider**: Neon Database (serverless PostgreSQL)\n- **Schema Management**: Drizzle Kit for migrations and schema management\n- **Backup Strategy**: Local storage backup functionality with JSON export\n\n### Core Entities and Relationships\n- **Articles**: Spare parts inventory with stock tracking, pricing, and supplier relationships\n- **Suppliers**: Vendor management with contact information and payment terms\n- **Requestors**: Employee/department management for purchase authorization\n- **Purchase Requests**: Workflow for requesting new inventory with approval states\n- **Receptions**: Incoming inventory tracking with delivery validation\n- **Outbounds**: Stock consumption tracking with movement reasons\n- **Stock Movements**: Comprehensive audit trail for all inventory changes\n\n### Authentication and Authorization\nCurrently implements basic session-based approach with plans for role-based access control. The system architecture supports future expansion to include user roles like Administrator, Manager, and Employee with appropriate permission levels.\n\n### API Design\nRESTful API structure with consistent endpoint patterns:\n- CRUD operations for all major entities\n- Specialized endpoints for dashboard statistics and low stock alerts\n- Error handling middleware with structured error responses\n- Request logging for debugging and audit trails\n\n## External Dependencies\n\n### Database Services\n- **Neon Database**: Serverless PostgreSQL hosting with connection pooling\n- **Connection Management**: `@neondatabase/serverless` for optimized database connections\n\n### UI and Component Libraries\n- **Radix UI**: Comprehensive set of low-level UI primitives for accessibility\n- **Tailwind CSS**: Utility-first CSS framework for rapid styling\n- **Lucide React**: Modern icon library for consistent iconography\n- **Embla Carousel**: Touch-friendly carousel components\n\n### Development and Build Tools\n- **Vite**: Next-generation frontend build tool with HMR\n- **TypeScript**: Static type checking for both frontend and backend\n- **ESBuild**: Fast JavaScript bundler for production builds\n- **PostCSS**: CSS processing with Tailwind CSS integration\n\n### Data Management\n- **TanStack Query**: Powerful data synchronization for React applications\n- **React Hook Form**: Performant form library with minimal re-renders\n- **Date-fns**: Modern JavaScript date utility library\n- **Zod**: TypeScript-first schema validation\n\n### Production Considerations\n- **Environment Configuration**: Separate development and production configurations\n- **Static Asset Serving**: Express middleware for serving built React application\n- **Error Monitoring**: Structured error handling with development overlays\n- **Performance**: Optimized bundle splitting and lazy loading capabilities","size_bytes":9497},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        'ms-blue': \"var(--ms-blue)\",\n        'ms-blue-dark': \"var(--ms-blue-dark)\",\n        'ms-light-blue': \"var(--ms-light-blue)\",\n        'ms-green': \"var(--ms-green)\",\n        'ms-amber': \"var(--ms-amber)\",\n        'ms-red': \"var(--ms-red)\",\n        'ms-gray-light': \"var(--ms-gray-light)\",\n        'ms-gray': \"var(--ms-gray)\",\n        'ms-gray-dark': \"var(--ms-gray-dark)\",\n      },\n      fontFamily: {\n        system: [\"var(--font-system)\"],\n        sans: [\"var(--font-system)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2393},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json({ limit: '50mb' }));\napp.use(express.urlencoded({ extended: false, limit: '50mb' }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2098},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { insertArticleSchema, insertSupplierSchema, insertRequestorSchema, insertPurchaseRequestSchema, insertReceptionSchema, insertOutboundSchema, convertToReceptionSchema } from \"@shared/schema\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Articles routes\n  app.get(\"/api/articles\", async (req, res) => {\n    try {\n      const articles = await storage.getArticles();\n      res.json(articles);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération des articles\" });\n    }\n  });\n\n  app.get(\"/api/articles/:id\", async (req, res) => {\n    try {\n      const article = await storage.getArticle(req.params.id);\n      if (!article) {\n        return res.status(404).json({ message: \"Article non trouvé\" });\n      }\n      res.json(article);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération de l'article\" });\n    }\n  });\n\n  app.post(\"/api/articles\", async (req, res) => {\n    try {\n      const validatedData = insertArticleSchema.parse(req.body);\n      const article = await storage.createArticle(validatedData);\n      res.status(201).json(article);\n    } catch (error) {\n      res.status(400).json({ message: \"Données invalides\", error });\n    }\n  });\n\n  app.put(\"/api/articles/:id\", async (req, res) => {\n    try {\n      const article = await storage.updateArticle(req.params.id, req.body);\n      res.json(article);\n    } catch (error) {\n      res.status(400).json({ message: \"Erreur lors de la mise à jour\", error });\n    }\n  });\n\n  app.delete(\"/api/articles/:id\", async (req, res) => {\n    try {\n      await storage.deleteArticle(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la suppression\" });\n    }\n  });\n\n  app.get(\"/api/articles/low-stock\", async (req, res) => {\n    try {\n      const lowStockArticles = await storage.getLowStockArticles();\n      if (!lowStockArticles || lowStockArticles.length === 0) {\n        return res.json([]);\n      }\n      res.json(lowStockArticles);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération des articles en stock bas\" });\n    }\n  });\n\n  // Bulk import articles\n  app.post(\"/api/articles/bulk-import\", async (req, res) => {\n    try {\n      const { data } = req.body;\n      const results = {\n        success: 0,\n        errors: [] as Array<{ row: number; error: string; data: any }>,\n        total: data.length\n      };\n\n      for (let index = 0; index < data.length; index++) {\n        try {\n          const item = data[index];\n          const validated = insertArticleSchema.parse({\n            ...item,\n            stockActuel: item.stockInitial || 0,\n          });\n          await storage.createArticle(validated);\n          results.success++;\n        } catch (error) {\n          results.errors.push({\n            row: index + 1,\n            error: error instanceof Error ? error.message : 'Erreur de validation',\n            data: data[index]\n          });\n        }\n      }\n\n      res.json(results);\n    } catch (error) {\n      console.error(\"Error bulk importing articles:\", error);\n      res.status(500).json({ message: \"Erreur lors de l'import en masse\" });\n    }\n  });\n\n  // Export articles\n  app.get(\"/api/articles/export\", async (req, res) => {\n    try {\n      const format = req.query.format as string;\n      const articles = await storage.getArticles();\n      \n      if (format === 'csv') {\n        const csvData = articles.map(article => ({\n          codeArticle: article.codeArticle,\n          designation: article.designation,\n          categorie: article.categorie,\n          marque: article.marque || '',\n          reference: article.reference || '',\n          stockActuel: article.stockActuel,\n          unite: article.unite,\n          prixUnitaire: article.prixUnitaire || 0,\n          seuilMinimum: article.seuilMinimum,\n          fournisseurId: article.fournisseurId || ''\n        }));\n        \n        // Simple CSV generation\n        const headers = Object.keys(csvData[0] || {});\n        const csvContent = [\n          headers.join(','),\n          ...csvData.map(row => headers.map(header => \n            typeof row[header as keyof typeof row] === 'string' \n              ? `\"${row[header as keyof typeof row]}\"`\n              : row[header as keyof typeof row]\n          ).join(','))\n        ].join('\\n');\n        \n        res.setHeader('Content-Type', 'text/csv');\n        res.setHeader('Content-Disposition', 'attachment; filename=articles.csv');\n        res.send(csvContent);\n      } else if (format === 'pdf') {\n        // Simple PDF response - in real app you'd use jsPDF or similar\n        const pdfContent = `Articles Export\\n\\nTotal: ${articles.length} articles\\n\\n${\n          articles.map(a => `${a.codeArticle}: ${a.designation} (Stock: ${a.stockActuel})`).join('\\n')\n        }`;\n        \n        res.setHeader('Content-Type', 'text/plain');\n        res.setHeader('Content-Disposition', 'attachment; filename=articles.txt');\n        res.send(pdfContent);\n      } else {\n        res.status(400).json({ message: \"Format non supporté\" });\n      }\n    } catch (error) {\n      console.error(\"Error exporting articles:\", error);\n      res.status(500).json({ message: \"Erreur lors de l'export\" });\n    }\n  });\n\n  // Suppliers routes\n  app.get(\"/api/suppliers\", async (req, res) => {\n    try {\n      const suppliers = await storage.getSuppliers();\n      res.json(suppliers);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération des fournisseurs\" });\n    }\n  });\n\n  app.post(\"/api/suppliers\", async (req, res) => {\n    try {\n      const validatedData = insertSupplierSchema.parse(req.body);\n      const supplier = await storage.createSupplier(validatedData);\n      res.status(201).json(supplier);\n    } catch (error) {\n      res.status(400).json({ message: \"Données invalides\", error });\n    }\n  });\n\n  app.put(\"/api/suppliers/:id\", async (req, res) => {\n    try {\n      const supplier = await storage.updateSupplier(req.params.id, req.body);\n      res.json(supplier);\n    } catch (error) {\n      res.status(400).json({ message: \"Erreur lors de la mise à jour\", error });\n    }\n  });\n\n  app.delete(\"/api/suppliers/:id\", async (req, res) => {\n    try {\n      await storage.deleteSupplier(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la suppression\" });\n    }\n  });\n\n  // Bulk import suppliers\n  app.post(\"/api/suppliers/bulk-import\", async (req, res) => {\n    try {\n      const { data } = req.body;\n      const results = {\n        success: 0,\n        errors: [] as Array<{ row: number; error: string; data: any }>,\n        total: data.length\n      };\n\n      for (let index = 0; index < data.length; index++) {\n        try {\n          const item = data[index];\n          const validated = insertSupplierSchema.parse(item);\n          await storage.createSupplier(validated);\n          results.success++;\n        } catch (error) {\n          results.errors.push({\n            row: index + 1,\n            error: error instanceof Error ? error.message : 'Erreur de validation',\n            data: data[index]\n          });\n        }\n      }\n\n      res.json(results);\n    } catch (error) {\n      console.error(\"Error bulk importing suppliers:\", error);\n      res.status(500).json({ message: \"Erreur lors de l'import en masse\" });\n    }\n  });\n\n  // Export suppliers\n  app.get(\"/api/suppliers/export\", async (req, res) => {\n    try {\n      const format = req.query.format as string;\n      const suppliers = await storage.getSuppliers();\n      \n      if (format === 'csv') {\n        const csvData = suppliers.map(supplier => ({\n          nom: supplier.nom,\n          contact: supplier.contact || '',\n          telephone: supplier.telephone || '',\n          email: supplier.email || '',\n          adresse: supplier.adresse || '',\n          conditionsPaiement: supplier.conditionsPaiement || '',\n          delaiLivraison: supplier.delaiLivraison || 0\n        }));\n        \n        const headers = Object.keys(csvData[0] || {});\n        const csvContent = [\n          headers.join(','),\n          ...csvData.map(row => headers.map(header => \n            typeof row[header as keyof typeof row] === 'string' \n              ? `\"${row[header as keyof typeof row]}\"`\n              : row[header as keyof typeof row]\n          ).join(','))\n        ].join('\\n');\n        \n        res.setHeader('Content-Type', 'text/csv');\n        res.setHeader('Content-Disposition', 'attachment; filename=suppliers.csv');\n        res.send(csvContent);\n      } else if (format === 'pdf') {\n        const pdfContent = `Suppliers Export\\n\\nTotal: ${suppliers.length} suppliers\\n\\n${\n          suppliers.map(s => `${s.nom}: ${s.contact} (${s.telephone})`).join('\\n')\n        }`;\n        \n        res.setHeader('Content-Type', 'text/plain');\n        res.setHeader('Content-Disposition', 'attachment; filename=suppliers.txt');\n        res.send(pdfContent);\n      } else {\n        res.status(400).json({ message: \"Format non supporté\" });\n      }\n    } catch (error) {\n      console.error(\"Error exporting suppliers:\", error);\n      res.status(500).json({ message: \"Erreur lors de l'export\" });\n    }\n  });\n\n  // Requestors routes\n  app.get(\"/api/requestors\", async (req, res) => {\n    try {\n      const requestors = await storage.getRequestors();\n      res.json(requestors);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération des demandeurs\" });\n    }\n  });\n\n  app.post(\"/api/requestors\", async (req, res) => {\n    try {\n      const validatedData = insertRequestorSchema.parse(req.body);\n      const requestor = await storage.createRequestor(validatedData);\n      res.status(201).json(requestor);\n    } catch (error) {\n      res.status(400).json({ message: \"Données invalides\", error });\n    }\n  });\n\n  app.put(\"/api/requestors/:id\", async (req, res) => {\n    try {\n      const requestor = await storage.updateRequestor(req.params.id, req.body);\n      res.json(requestor);\n    } catch (error) {\n      res.status(400).json({ message: \"Erreur lors de la mise à jour\", error });\n    }\n  });\n\n  app.delete(\"/api/requestors/:id\", async (req, res) => {\n    try {\n      await storage.deleteRequestor(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la suppression\" });\n    }\n  });\n\n  // Purchase Requests routes\n  app.get(\"/api/purchase-requests\", async (req, res) => {\n    try {\n      const requests = await storage.getPurchaseRequests();\n      res.json(requests);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération des demandes d'achat\" });\n    }\n  });\n\n  app.post(\"/api/purchase-requests\", async (req, res) => {\n    try {\n      const validatedData = insertPurchaseRequestSchema.parse(req.body);\n      const request = await storage.createPurchaseRequest(validatedData);\n      res.status(201).json(request);\n    } catch (error) {\n      res.status(400).json({ message: \"Données invalides\", error });\n    }\n  });\n\n  app.put(\"/api/purchase-requests/:id\", async (req, res) => {\n    try {\n      // For status updates, allow simple updates without full validation\n      if (req.body.statut && Object.keys(req.body).length === 1) {\n        const request = await storage.updatePurchaseRequest(req.params.id, req.body);\n        res.json(request);\n      } else {\n        // For full updates, validate the data\n        const validatedData = insertPurchaseRequestSchema.partial().parse(req.body);\n        const request = await storage.updatePurchaseRequest(req.params.id, validatedData);\n        res.json(request);\n      }\n    } catch (error) {\n      console.error(\"Purchase request update error:\", error);\n      res.status(400).json({ message: \"Erreur lors de la mise à jour\", error });\n    }\n  });\n\n  app.delete(\"/api/purchase-requests/:id\", async (req, res) => {\n    try {\n      await storage.deletePurchaseRequest(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la suppression\" });\n    }\n  });\n\n  // Get approved purchase requests ready for reception\n  app.get(\"/api/purchase-requests/ready-for-reception\", async (req, res) => {\n    try {\n      const requests = await storage.getPurchaseRequestsReadyForReception();\n      res.json(requests);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération des demandes prêtes pour réception\" });\n    }\n  });\n\n  // Receptions routes\n  app.get(\"/api/receptions\", async (req, res) => {\n    try {\n      const receptions = await storage.getReceptions();\n      res.json(receptions);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération des réceptions\" });\n    }\n  });\n\n  // Convert purchase request to reception\n  app.post(\"/api/purchase-requests/:id/convert-to-reception\", async (req, res) => {\n    try {\n      const purchaseRequestId = req.params.id;\n      const validatedConversion = convertToReceptionSchema.parse(req.body);\n      const { quantiteRecue, prixUnitaire, numeroBonLivraison, observations, dateReception } = validatedConversion;\n      \n      // Get the purchase request\n      const purchaseRequest = await storage.getPurchaseRequest(purchaseRequestId);\n      if (!purchaseRequest) {\n        return res.status(404).json({ message: \"Demande d'achat non trouvée\" });\n      }\n\n      // Create reception from purchase request\n      const receptionData = {\n        articleId: purchaseRequest.articleId,\n        supplierId: purchaseRequest.supplierId || \"\",\n        quantiteRecue: quantiteRecue || purchaseRequest.quantiteDemandee,\n        prixUnitaire: prixUnitaire || null,\n        numeroBonLivraison: numeroBonLivraison || null,\n        observations: observations || `Réception pour demande d'achat ${purchaseRequestId}`,\n        dateReception: dateReception || new Date().toISOString(),\n      };\n\n      const validatedData = insertReceptionSchema.parse(receptionData);\n      const reception = await storage.createReception(validatedData);\n\n      // Update purchase request status to 'commande'\n      await storage.updatePurchaseRequest(purchaseRequestId, { statut: \"commande\" });\n\n      res.status(201).json({\n        reception,\n        purchaseRequest: await storage.getPurchaseRequest(purchaseRequestId)\n      });\n    } catch (error) {\n      res.status(400).json({ message: \"Erreur lors de la conversion\", error });\n    }\n  });\n\n  app.post(\"/api/receptions\", async (req, res) => {\n    try {\n      const validatedData = insertReceptionSchema.parse(req.body);\n      const reception = await storage.createReception(validatedData);\n      res.status(201).json(reception);\n    } catch (error) {\n      res.status(400).json({ message: \"Données invalides\", error });\n    }\n  });\n\n  // Outbounds routes\n  app.get(\"/api/outbounds\", async (req, res) => {\n    try {\n      const outbounds = await storage.getOutbounds();\n      res.json(outbounds);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération des sorties\" });\n    }\n  });\n\n  app.post(\"/api/outbounds\", async (req, res) => {\n    try {\n      const validatedData = insertOutboundSchema.parse(req.body);\n      const outbound = await storage.createOutbound(validatedData);\n      res.status(201).json(outbound);\n    } catch (error) {\n      console.error(\"Outbound creation error:\", error);\n      res.status(400).json({ message: \"Données invalides\", error });\n    }\n  });\n\n  app.put(\"/api/outbounds/:id\", async (req, res) => {\n    try {\n      const validatedData = insertOutboundSchema.partial().parse(req.body);\n      const outbound = await storage.updateOutbound(req.params.id, validatedData);\n      res.json(outbound);\n    } catch (error) {\n      console.error(\"Outbound update error:\", error);\n      res.status(400).json({ message: \"Erreur lors de la mise à jour\", error });\n    }\n  });\n\n  app.delete(\"/api/outbounds/:id\", async (req, res) => {\n    try {\n      await storage.deleteOutbound(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la suppression\" });\n    }\n  });\n\n  // Stock movements\n  app.get(\"/api/stock-movements\", async (req, res) => {\n    try {\n      const articleId = req.query.articleId as string;\n      const movements = await storage.getStockMovements(articleId);\n      res.json(movements);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération des mouvements\" });\n    }\n  });\n\n  // Dashboard stats\n  app.get(\"/api/dashboard/stats\", async (req, res) => {\n    try {\n      const stats = await storage.getDashboardStats();\n      res.json(stats);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération des statistiques\" });\n    }\n  });\n\n  // Chart data endpoints\n  app.get(\"/api/dashboard/stock-evolution\", async (req, res) => {\n    try {\n      const data = await storage.getStockEvolutionData();\n      res.json(data);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération de l'évolution du stock\" });\n    }\n  });\n\n  app.get(\"/api/dashboard/purchase-status\", async (req, res) => {\n    try {\n      const data = await storage.getPurchaseStatusData();\n      res.json(data);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération du statut des achats\" });\n    }\n  });\n\n  app.get(\"/api/dashboard/category-distribution\", async (req, res) => {\n    try {\n      const data = await storage.getCategoryDistributionData();\n      res.json(data);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération de la distribution par catégorie\" });\n    }\n  });\n\n  app.get(\"/api/dashboard/recent-movements\", async (req, res) => {\n    try {\n      const data = await storage.getRecentMovementsData();\n      res.json(data);\n    } catch (error) {\n      res.status(500).json({ message: \"Erreur lors de la récupération des mouvements récents\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":18332},"server/storage.ts":{"content":"import { \n  type Article, type InsertArticle,\n  type Supplier, type InsertSupplier,\n  type Requestor, type InsertRequestor,\n  type PurchaseRequest, type InsertPurchaseRequest,\n  type Reception, type InsertReception,\n  type Outbound, type InsertOutbound,\n  type StockMovement,\n  articles, suppliers, requestors, purchaseRequests, receptions, outbounds, stockMovements\n} from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport { db } from \"./db\";\nimport { eq, lte, count, sum, sql } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // Articles\n  getArticles(): Promise<Article[]>;\n  getArticle(id: string): Promise<Article | undefined>;\n  createArticle(article: InsertArticle): Promise<Article>;\n  updateArticle(id: string, article: Partial<Article>): Promise<Article>;\n  deleteArticle(id: string): Promise<void>;\n  getLowStockArticles(): Promise<Article[]>;\n\n  // Suppliers\n  getSuppliers(): Promise<Supplier[]>;\n  getSupplier(id: string): Promise<Supplier | undefined>;\n  createSupplier(supplier: InsertSupplier): Promise<Supplier>;\n  updateSupplier(id: string, supplier: Partial<Supplier>): Promise<Supplier>;\n  deleteSupplier(id: string): Promise<void>;\n\n  // Requestors\n  getRequestors(): Promise<Requestor[]>;\n  getRequestor(id: string): Promise<Requestor | undefined>;\n  createRequestor(requestor: InsertRequestor): Promise<Requestor>;\n  updateRequestor(id: string, requestor: Partial<Requestor>): Promise<Requestor>;\n  deleteRequestor(id: string): Promise<void>;\n\n  // Purchase Requests\n  getPurchaseRequests(): Promise<PurchaseRequest[]>;\n  getPurchaseRequest(id: string): Promise<PurchaseRequest | undefined>;\n  createPurchaseRequest(request: InsertPurchaseRequest): Promise<PurchaseRequest>;\n  updatePurchaseRequest(id: string, request: Partial<PurchaseRequest>): Promise<PurchaseRequest>;\n  deletePurchaseRequest(id: string): Promise<void>;\n  getPurchaseRequestsReadyForReception(): Promise<PurchaseRequest[]>;\n\n  // Receptions\n  getReceptions(): Promise<Reception[]>;\n  getReception(id: string): Promise<Reception | undefined>;\n  createReception(reception: InsertReception): Promise<Reception>;\n  updateReception(id: string, reception: Partial<Reception>): Promise<Reception>;\n  deleteReception(id: string): Promise<void>;\n\n  // Outbounds\n  getOutbounds(): Promise<Outbound[]>;\n  getOutbound(id: string): Promise<Outbound | undefined>;\n  createOutbound(outbound: InsertOutbound): Promise<Outbound>;\n  updateOutbound(id: string, outbound: Partial<Outbound>): Promise<Outbound>;\n  deleteOutbound(id: string): Promise<void>;\n\n  // Stock Movements\n  getStockMovements(articleId?: string): Promise<StockMovement[]>;\n  createStockMovement(movement: Omit<StockMovement, 'id'>): Promise<StockMovement>;\n\n  // Dashboard stats\n  getDashboardStats(): Promise<{\n    totalArticles: number;\n    lowStock: number;\n    pendingRequests: number;\n    stockValue: number;\n  }>;\n\n  // Chart data\n  getStockEvolutionData(): Promise<Array<{\n    month: string;\n    stock: number;\n    value: number;\n  }>>;\n\n  getPurchaseStatusData(): Promise<Array<{\n    status: string;\n    count: number;\n    color: string;\n  }>>;\n\n  getCategoryDistributionData(): Promise<Array<{\n    category: string;\n    count: number;\n    percentage: number;\n  }>>;\n\n  getRecentMovementsData(): Promise<Array<{\n    date: string;\n    type: string;\n    quantity: number;\n    article: string;\n  }>>;\n}\n\nexport class MemStorage implements IStorage {\n  private articles: Map<string, Article> = new Map();\n  private suppliers: Map<string, Supplier> = new Map();\n  private requestors: Map<string, Requestor> = new Map();\n  private purchaseRequests: Map<string, PurchaseRequest> = new Map();\n  private receptions: Map<string, Reception> = new Map();\n  private outbounds: Map<string, Outbound> = new Map();\n  private stockMovements: Map<string, StockMovement> = new Map();\n\n  constructor() {\n    this.initializeData();\n  }\n\n  private initializeData() {\n    // Initialize with empty data - no mock data\n  }\n\n  // Articles\n  async getArticles(): Promise<Article[]> {\n    return Array.from(this.articles.values());\n  }\n\n  async getArticle(id: string): Promise<Article | undefined> {\n    return this.articles.get(id);\n  }\n\n  async createArticle(article: InsertArticle): Promise<Article> {\n    const id = randomUUID();\n    const newArticle: Article = {\n      ...article,\n      id,\n      stockActuel: article.stockInitial || 0,\n      createdAt: new Date(),\n      prixUnitaire: article.prixUnitaire?.toString() || null,\n      marque: article.marque ?? null,\n      reference: article.reference ?? null,\n      fournisseurId: article.fournisseurId ?? null,\n      seuilMinimum: article.seuilMinimum ?? null,\n    };\n    this.articles.set(id, newArticle);\n    return newArticle;\n  }\n\n  async updateArticle(id: string, article: Partial<Article>): Promise<Article> {\n    const existing = this.articles.get(id);\n    if (!existing) {\n      throw new Error(\"Article not found\");\n    }\n    const updated = { ...existing, ...article };\n    this.articles.set(id, updated);\n    return updated;\n  }\n\n  async deleteArticle(id: string): Promise<void> {\n    this.articles.delete(id);\n  }\n\n  async getLowStockArticles(): Promise<Article[]> {\n    return Array.from(this.articles.values()).filter(\n      article => article.stockActuel <= (article.seuilMinimum || 10)\n    );\n  }\n\n  // Suppliers\n  async getSuppliers(): Promise<Supplier[]> {\n    return Array.from(this.suppliers.values());\n  }\n\n  async getSupplier(id: string): Promise<Supplier | undefined> {\n    return this.suppliers.get(id);\n  }\n\n  async createSupplier(supplier: InsertSupplier): Promise<Supplier> {\n    const id = randomUUID();\n    const newSupplier: Supplier = {\n      ...supplier,\n      id,\n      createdAt: new Date(),\n      contact: supplier.contact ?? null,\n      telephone: supplier.telephone ?? null,\n      email: supplier.email ?? null,\n      adresse: supplier.adresse ?? null,\n      conditionsPaiement: supplier.conditionsPaiement ?? null,\n      delaiLivraison: supplier.delaiLivraison ?? null,\n    };\n    this.suppliers.set(id, newSupplier);\n    return newSupplier;\n  }\n\n  async updateSupplier(id: string, supplier: Partial<Supplier>): Promise<Supplier> {\n    const existing = this.suppliers.get(id);\n    if (!existing) {\n      throw new Error(\"Supplier not found\");\n    }\n    const updated = { ...existing, ...supplier };\n    this.suppliers.set(id, updated);\n    return updated;\n  }\n\n  async deleteSupplier(id: string): Promise<void> {\n    this.suppliers.delete(id);\n  }\n\n  // Requestors\n  async getRequestors(): Promise<Requestor[]> {\n    return Array.from(this.requestors.values());\n  }\n\n  async getRequestor(id: string): Promise<Requestor | undefined> {\n    return this.requestors.get(id);\n  }\n\n  async createRequestor(requestor: InsertRequestor): Promise<Requestor> {\n    const id = randomUUID();\n    const newRequestor: Requestor = {\n      ...requestor,\n      id,\n      createdAt: new Date(),\n      poste: requestor.poste ?? null,\n      email: requestor.email ?? null,\n      telephone: requestor.telephone ?? null,\n    };\n    this.requestors.set(id, newRequestor);\n    return newRequestor;\n  }\n\n  async updateRequestor(id: string, requestor: Partial<Requestor>): Promise<Requestor> {\n    const existing = this.requestors.get(id);\n    if (!existing) {\n      throw new Error(\"Requestor not found\");\n    }\n    const updated = { ...existing, ...requestor };\n    this.requestors.set(id, updated);\n    return updated;\n  }\n\n  async deleteRequestor(id: string): Promise<void> {\n    this.requestors.delete(id);\n  }\n\n  // Purchase Requests\n  async getPurchaseRequests(): Promise<PurchaseRequest[]> {\n    return Array.from(this.purchaseRequests.values());\n  }\n\n  async getPurchaseRequest(id: string): Promise<PurchaseRequest | undefined> {\n    return this.purchaseRequests.get(id);\n  }\n\n  async createPurchaseRequest(request: InsertPurchaseRequest): Promise<PurchaseRequest> {\n    const id = randomUUID();\n    const newRequest: PurchaseRequest = {\n      ...request,\n      id,\n      dateInitiation: new Date(),\n      createdAt: new Date(),\n      observations: request.observations ?? null,\n      statut: request.statut ?? \"en_attente\",\n      supplierId: request.supplierId ?? null,\n    };\n    this.purchaseRequests.set(id, newRequest);\n    return newRequest;\n  }\n\n  async updatePurchaseRequest(id: string, request: Partial<PurchaseRequest>): Promise<PurchaseRequest> {\n    const existing = this.purchaseRequests.get(id);\n    if (!existing) {\n      throw new Error(\"Purchase request not found\");\n    }\n    const updated = { ...existing, ...request };\n    this.purchaseRequests.set(id, updated);\n    return updated;\n  }\n\n  async deletePurchaseRequest(id: string): Promise<void> {\n    this.purchaseRequests.delete(id);\n  }\n\n  async getPurchaseRequestsReadyForReception(): Promise<PurchaseRequest[]> {\n    return Array.from(this.purchaseRequests.values()).filter(\n      request => request.statut === \"approuve\"\n    );\n  }\n\n  // Receptions\n  async getReceptions(): Promise<Reception[]> {\n    return Array.from(this.receptions.values());\n  }\n\n  async getReception(id: string): Promise<Reception | undefined> {\n    return this.receptions.get(id);\n  }\n\n  async createReception(reception: InsertReception): Promise<Reception> {\n    const id = randomUUID();\n    const newReception: Reception = {\n      ...reception,\n      id,\n      createdAt: new Date(),\n      prixUnitaire: reception.prixUnitaire?.toString() || null,\n      observations: reception.observations ?? null,\n      numeroBonLivraison: reception.numeroBonLivraison ?? null,\n    };\n    this.receptions.set(id, newReception);\n\n    // Update article stock and create movement\n    const article = await this.getArticle(reception.articleId);\n    if (article) {\n      const newStock = article.stockActuel + reception.quantiteRecue;\n      await this.updateArticle(reception.articleId, { stockActuel: newStock });\n      \n      await this.createStockMovement({\n        articleId: reception.articleId,\n        type: \"entree\",\n        quantite: reception.quantiteRecue,\n        quantiteAvant: article.stockActuel,\n        quantiteApres: newStock,\n        reference: id,\n        dateMovement: new Date(),\n        description: `Réception - NBL: ${reception.numeroBonLivraison || 'N/A'}`,\n      });\n    }\n\n    return newReception;\n  }\n\n  async updateReception(id: string, reception: Partial<Reception>): Promise<Reception> {\n    const existing = this.receptions.get(id);\n    if (!existing) {\n      throw new Error(\"Reception not found\");\n    }\n    const updated = { ...existing, ...reception };\n    this.receptions.set(id, updated);\n    return updated;\n  }\n\n  async deleteReception(id: string): Promise<void> {\n    this.receptions.delete(id);\n  }\n\n  // Outbounds\n  async getOutbounds(): Promise<Outbound[]> {\n    return Array.from(this.outbounds.values());\n  }\n\n  async getOutbound(id: string): Promise<Outbound | undefined> {\n    return this.outbounds.get(id);\n  }\n\n  async createOutbound(outbound: InsertOutbound): Promise<Outbound> {\n    const id = randomUUID();\n    const newOutbound: Outbound = {\n      ...outbound,\n      id,\n      createdAt: new Date(),\n      observations: outbound.observations ?? null,\n    };\n\n    // Check stock availability\n    const article = await this.getArticle(outbound.articleId);\n    if (!article || article.stockActuel < outbound.quantiteSortie) {\n      throw new Error(\"Stock insuffisant\");\n    }\n\n    this.outbounds.set(id, newOutbound);\n\n    // Update article stock and create movement\n    const newStock = article.stockActuel - outbound.quantiteSortie;\n    await this.updateArticle(outbound.articleId, { stockActuel: newStock });\n    \n    await this.createStockMovement({\n      articleId: outbound.articleId,\n      type: \"sortie\",\n      quantite: outbound.quantiteSortie,\n      quantiteAvant: article.stockActuel,\n      quantiteApres: newStock,\n      reference: id,\n      dateMovement: new Date(),\n      description: `Sortie - ${outbound.motifSortie}`,\n    });\n\n    return newOutbound;\n  }\n\n  async updateOutbound(id: string, outbound: Partial<Outbound>): Promise<Outbound> {\n    const existing = this.outbounds.get(id);\n    if (!existing) {\n      throw new Error(\"Outbound not found\");\n    }\n    const updated = { ...existing, ...outbound };\n    this.outbounds.set(id, updated);\n    return updated;\n  }\n\n  async deleteOutbound(id: string): Promise<void> {\n    this.outbounds.delete(id);\n  }\n\n  // Stock Movements\n  async getStockMovements(articleId?: string): Promise<StockMovement[]> {\n    const movements = Array.from(this.stockMovements.values());\n    if (articleId) {\n      return movements.filter(m => m.articleId === articleId);\n    }\n    return movements;\n  }\n\n  async createStockMovement(movement: Omit<StockMovement, 'id'>): Promise<StockMovement> {\n    const id = randomUUID();\n    const newMovement: StockMovement = { ...movement, id };\n    this.stockMovements.set(id, newMovement);\n    return newMovement;\n  }\n\n  // Dashboard stats\n  async getDashboardStats(): Promise<{\n    totalArticles: number;\n    lowStock: number;\n    pendingRequests: number;\n    stockValue: number;\n  }> {\n    const articles = await this.getArticles();\n    const lowStockArticles = await this.getLowStockArticles();\n    const purchaseRequests = await this.getPurchaseRequests();\n    \n    const pendingRequests = purchaseRequests.filter(req => req.statut === \"en_attente\").length;\n    \n    const stockValue = articles.reduce((total, article) => {\n      const price = parseFloat(article.prixUnitaire || \"0\");\n      return total + (price * article.stockActuel);\n    }, 0);\n\n    return {\n      totalArticles: articles.length,\n      lowStock: lowStockArticles.length,\n      pendingRequests,\n      stockValue,\n    };\n  }\n\n  // Chart data methods for MemStorage\n  async getStockEvolutionData(): Promise<Array<{\n    month: string;\n    stock: number;\n    value: number;\n  }>> {\n    // Return empty data since there's no historical data yet\n    return [];\n  }\n\n  async getPurchaseStatusData(): Promise<Array<{\n    status: string;\n    count: number;\n    color: string;\n  }>> {\n    const requests = await this.getPurchaseRequests();\n    const statusCounts = requests.reduce((acc, req) => {\n      acc[req.statut] = (acc[req.statut] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    const statusColors = {\n      'en_attente': '#f59e0b',\n      'approuve': '#10b981',\n      'refuse': '#ef4444',\n      'commande': '#3b82f6'\n    };\n\n    return Object.entries(statusCounts).map(([status, count]) => ({\n      status: status === 'en_attente' ? 'En Attente' : \n              status === 'approuve' ? 'Approuvé' :\n              status === 'refuse' ? 'Refusé' : 'Commandé',\n      count,\n      color: statusColors[status as keyof typeof statusColors] || '#6b7280'\n    }));\n  }\n\n  async getCategoryDistributionData(): Promise<Array<{\n    category: string;\n    count: number;\n    percentage: number;\n  }>> {\n    const articles = await this.getArticles();\n    if (articles.length === 0) return [];\n\n    const categoryCounts = articles.reduce((acc, article) => {\n      acc[article.categorie] = (acc[article.categorie] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    return Object.entries(categoryCounts).map(([category, count]) => ({\n      category,\n      count,\n      percentage: Math.round((count / articles.length) * 100)\n    }));\n  }\n\n  async getRecentMovementsData(): Promise<Array<{\n    date: string;\n    type: string;\n    quantity: number;\n    article: string;\n  }>> {\n    const movements = await this.getStockMovements();\n    return movements\n      .slice(-10) // Get last 10 movements\n      .map(movement => ({\n        date: movement.dateMovement.toLocaleDateString('fr-FR'),\n        type: movement.type === 'entree' ? 'Entrée' : 'Sortie',\n        quantity: movement.quantite,\n        article: movement.articleId.substring(0, 8) + '...'\n      }));\n  }\n}\n\n// Database Storage implementation\nexport class DatabaseStorage implements IStorage {\n  // Articles\n  async getArticles(): Promise<Article[]> {\n    return await db.select().from(articles);\n  }\n\n  async getArticle(id: string): Promise<Article | undefined> {\n    const [article] = await db.select().from(articles).where(eq(articles.id, id));\n    return article || undefined;\n  }\n\n  async createArticle(article: InsertArticle): Promise<Article> {\n    const id = randomUUID();\n    const [newArticle] = await db\n      .insert(articles)\n      .values({\n        ...article,\n        id,\n        stockActuel: article.stockInitial,\n        prixUnitaire: article.prixUnitaire?.toString() || null,\n      })\n      .returning();\n    return newArticle;\n  }\n\n  async updateArticle(id: string, article: Partial<Article>): Promise<Article> {\n    const [updated] = await db\n      .update(articles)\n      .set(article)\n      .where(eq(articles.id, id))\n      .returning();\n    if (!updated) {\n      throw new Error(\"Article not found\");\n    }\n    return updated;\n  }\n\n  async deleteArticle(id: string): Promise<void> {\n    await db.delete(articles).where(eq(articles.id, id));\n  }\n\n  async getLowStockArticles(): Promise<Article[]> {\n    return await db\n      .select()\n      .from(articles)\n      .where(lte(articles.stockActuel, articles.seuilMinimum));\n  }\n\n  // Suppliers\n  async getSuppliers(): Promise<Supplier[]> {\n    return await db.select().from(suppliers);\n  }\n\n  async getSupplier(id: string): Promise<Supplier | undefined> {\n    const [supplier] = await db.select().from(suppliers).where(eq(suppliers.id, id));\n    return supplier || undefined;\n  }\n\n  async createSupplier(supplier: InsertSupplier): Promise<Supplier> {\n    const id = randomUUID();\n    const [newSupplier] = await db\n      .insert(suppliers)\n      .values({ ...supplier, id })\n      .returning();\n    return newSupplier;\n  }\n\n  async updateSupplier(id: string, supplier: Partial<Supplier>): Promise<Supplier> {\n    const [updated] = await db\n      .update(suppliers)\n      .set(supplier)\n      .where(eq(suppliers.id, id))\n      .returning();\n    if (!updated) {\n      throw new Error(\"Supplier not found\");\n    }\n    return updated;\n  }\n\n  async deleteSupplier(id: string): Promise<void> {\n    await db.delete(suppliers).where(eq(suppliers.id, id));\n  }\n\n  // Requestors\n  async getRequestors(): Promise<Requestor[]> {\n    return await db.select().from(requestors);\n  }\n\n  async getRequestor(id: string): Promise<Requestor | undefined> {\n    const [requestor] = await db.select().from(requestors).where(eq(requestors.id, id));\n    return requestor || undefined;\n  }\n\n  async createRequestor(requestor: InsertRequestor): Promise<Requestor> {\n    const id = randomUUID();\n    const [newRequestor] = await db\n      .insert(requestors)\n      .values({ ...requestor, id })\n      .returning();\n    return newRequestor;\n  }\n\n  async updateRequestor(id: string, requestor: Partial<Requestor>): Promise<Requestor> {\n    const [updated] = await db\n      .update(requestors)\n      .set(requestor)\n      .where(eq(requestors.id, id))\n      .returning();\n    if (!updated) {\n      throw new Error(\"Requestor not found\");\n    }\n    return updated;\n  }\n\n  async deleteRequestor(id: string): Promise<void> {\n    await db.delete(requestors).where(eq(requestors.id, id));\n  }\n\n  // Purchase Requests\n  async getPurchaseRequests(): Promise<PurchaseRequest[]> {\n    return await db.select().from(purchaseRequests);\n  }\n\n  async getPurchaseRequest(id: string): Promise<PurchaseRequest | undefined> {\n    const [request] = await db.select().from(purchaseRequests).where(eq(purchaseRequests.id, id));\n    return request || undefined;\n  }\n\n  async createPurchaseRequest(request: InsertPurchaseRequest): Promise<PurchaseRequest> {\n    const id = randomUUID();\n    const [newRequest] = await db\n      .insert(purchaseRequests)\n      .values({ ...request, id })\n      .returning();\n    return newRequest;\n  }\n\n  async updatePurchaseRequest(id: string, request: Partial<PurchaseRequest>): Promise<PurchaseRequest> {\n    const [updated] = await db\n      .update(purchaseRequests)\n      .set(request)\n      .where(eq(purchaseRequests.id, id))\n      .returning();\n    if (!updated) {\n      throw new Error(\"Purchase request not found\");\n    }\n    return updated;\n  }\n\n  async deletePurchaseRequest(id: string): Promise<void> {\n    await db.delete(purchaseRequests).where(eq(purchaseRequests.id, id));\n  }\n\n  async getPurchaseRequestsReadyForReception(): Promise<PurchaseRequest[]> {\n    return await db\n      .select()\n      .from(purchaseRequests)\n      .where(eq(purchaseRequests.statut, \"approuve\"));\n  }\n\n  // Receptions\n  async getReceptions(): Promise<Reception[]> {\n    return await db.select().from(receptions);\n  }\n\n  async getReception(id: string): Promise<Reception | undefined> {\n    const [reception] = await db.select().from(receptions).where(eq(receptions.id, id));\n    return reception || undefined;\n  }\n\n  async createReception(reception: InsertReception): Promise<Reception> {\n    const id = randomUUID();\n    const [newReception] = await db\n      .insert(receptions)\n      .values({ \n        ...reception, \n        id,\n        prixUnitaire: reception.prixUnitaire?.toString() || null\n      })\n      .returning();\n\n    // Update article stock and create movement\n    const article = await this.getArticle(reception.articleId);\n    if (article) {\n      const newStock = article.stockActuel + reception.quantiteRecue;\n      await this.updateArticle(reception.articleId, { stockActuel: newStock });\n      \n      await this.createStockMovement({\n        articleId: reception.articleId,\n        type: \"entree\",\n        quantite: reception.quantiteRecue,\n        quantiteAvant: article.stockActuel,\n        quantiteApres: newStock,\n        reference: id,\n        dateMovement: new Date(),\n        description: `Réception - NBL: ${reception.numeroBonLivraison || 'N/A'}`,\n      });\n    }\n\n    return newReception;\n  }\n\n  async updateReception(id: string, reception: Partial<Reception>): Promise<Reception> {\n    const [updated] = await db\n      .update(receptions)\n      .set(reception)\n      .where(eq(receptions.id, id))\n      .returning();\n    if (!updated) {\n      throw new Error(\"Reception not found\");\n    }\n    return updated;\n  }\n\n  async deleteReception(id: string): Promise<void> {\n    await db.delete(receptions).where(eq(receptions.id, id));\n  }\n\n  // Outbounds\n  async getOutbounds(): Promise<Outbound[]> {\n    return await db.select().from(outbounds);\n  }\n\n  async getOutbound(id: string): Promise<Outbound | undefined> {\n    const [outbound] = await db.select().from(outbounds).where(eq(outbounds.id, id));\n    return outbound || undefined;\n  }\n\n  async createOutbound(outbound: InsertOutbound): Promise<Outbound> {\n    const id = randomUUID();\n\n    // Check stock availability\n    const article = await this.getArticle(outbound.articleId);\n    if (!article || article.stockActuel < outbound.quantiteSortie) {\n      throw new Error(\"Stock insuffisant\");\n    }\n\n    const [newOutbound] = await db\n      .insert(outbounds)\n      .values({ ...outbound, id })\n      .returning();\n\n    // Update article stock and create movement\n    const newStock = article.stockActuel - outbound.quantiteSortie;\n    await this.updateArticle(outbound.articleId, { stockActuel: newStock });\n    \n    await this.createStockMovement({\n      articleId: outbound.articleId,\n      type: \"sortie\",\n      quantite: outbound.quantiteSortie,\n      quantiteAvant: article.stockActuel,\n      quantiteApres: newStock,\n      reference: id,\n      dateMovement: new Date(),\n      description: `Sortie - ${outbound.motifSortie}`,\n    });\n\n    return newOutbound;\n  }\n\n  async updateOutbound(id: string, outbound: Partial<Outbound>): Promise<Outbound> {\n    const [updated] = await db\n      .update(outbounds)\n      .set(outbound)\n      .where(eq(outbounds.id, id))\n      .returning();\n    if (!updated) {\n      throw new Error(\"Outbound not found\");\n    }\n    return updated;\n  }\n\n  async deleteOutbound(id: string): Promise<void> {\n    await db.delete(outbounds).where(eq(outbounds.id, id));\n  }\n\n  // Stock Movements\n  async getStockMovements(articleId?: string): Promise<StockMovement[]> {\n    if (articleId) {\n      return await db\n        .select()\n        .from(stockMovements)\n        .where(eq(stockMovements.articleId, articleId));\n    }\n    return await db.select().from(stockMovements);\n  }\n\n  async createStockMovement(movement: Omit<StockMovement, 'id'>): Promise<StockMovement> {\n    const id = randomUUID();\n    const [newMovement] = await db\n      .insert(stockMovements)\n      .values({ ...movement, id })\n      .returning();\n    return newMovement;\n  }\n\n  // Dashboard stats\n  async getDashboardStats(): Promise<{\n    totalArticles: number;\n    lowStock: number;\n    pendingRequests: number;\n    stockValue: number;\n  }> {\n    // Get total articles count\n    const [totalArticlesResult] = await db\n      .select({ count: count() })\n      .from(articles);\n    \n    // Get low stock articles count\n    const [lowStockResult] = await db\n      .select({ count: count() })\n      .from(articles)\n      .where(lte(articles.stockActuel, articles.seuilMinimum));\n    \n    // Get pending requests count\n    const [pendingRequestsResult] = await db\n      .select({ count: count() })\n      .from(purchaseRequests)\n      .where(eq(purchaseRequests.statut, \"en_attente\"));\n    \n    // Calculate stock value\n    const [stockValueResult] = await db\n      .select({ \n        value: sql<number>`SUM(CAST(${articles.prixUnitaire} AS DECIMAL) * ${articles.stockActuel})`.mapWith(Number)\n      })\n      .from(articles);\n\n    return {\n      totalArticles: totalArticlesResult.count,\n      lowStock: lowStockResult.count,\n      pendingRequests: pendingRequestsResult.count,\n      stockValue: stockValueResult.value || 0,\n    };\n  }\n\n  // Chart data methods for DatabaseStorage\n  async getStockEvolutionData(): Promise<Array<{\n    month: string;\n    stock: number;\n    value: number;\n  }>> {\n    // For now, return empty array since we need historical data tracking\n    // In a real implementation, you would track stock levels over time\n    return [];\n  }\n\n  async getPurchaseStatusData(): Promise<Array<{\n    status: string;\n    count: number;\n    color: string;\n  }>> {\n    const results = await db\n      .select({\n        status: purchaseRequests.statut,\n        count: count()\n      })\n      .from(purchaseRequests)\n      .groupBy(purchaseRequests.statut);\n\n    const statusColors = {\n      'en_attente': '#f59e0b',\n      'approuve': '#10b981',\n      'refuse': '#ef4444',\n      'commande': '#3b82f6'\n    };\n\n    return results.map(result => ({\n      status: result.status === 'en_attente' ? 'En Attente' : \n              result.status === 'approuve' ? 'Approuvé' :\n              result.status === 'refuse' ? 'Refusé' : 'Commandé',\n      count: result.count,\n      color: statusColors[result.status as keyof typeof statusColors] || '#6b7280'\n    }));\n  }\n\n  async getCategoryDistributionData(): Promise<Array<{\n    category: string;\n    count: number;\n    percentage: number;\n  }>> {\n    const results = await db\n      .select({\n        category: articles.categorie,\n        count: count()\n      })\n      .from(articles)\n      .groupBy(articles.categorie);\n\n    const total = results.reduce((sum, result) => sum + result.count, 0);\n    \n    return results.map(result => ({\n      category: result.category,\n      count: result.count,\n      percentage: total > 0 ? Math.round((result.count / total) * 100) : 0\n    }));\n  }\n\n  async getRecentMovementsData(): Promise<Array<{\n    date: string;\n    type: string;\n    quantity: number;\n    article: string;\n  }>> {\n    const movements = await db\n      .select({\n        dateMovement: stockMovements.dateMovement,\n        type: stockMovements.type,\n        quantite: stockMovements.quantite,\n        articleId: stockMovements.articleId\n      })\n      .from(stockMovements)\n      .orderBy(stockMovements.dateMovement)\n      .limit(10);\n\n    return movements.map(movement => ({\n      date: movement.dateMovement.toLocaleDateString('fr-FR'),\n      type: movement.type === 'entree' ? 'Entrée' : 'Sortie',\n      quantity: movement.quantite,\n      article: movement.articleId.substring(0, 8) + '...'\n    }));\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":28176},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { pgTable, text, varchar, integer, decimal, timestamp } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Articles (Spare Parts)\nexport const articles = pgTable(\"articles\", {\n  id: varchar(\"id\").primaryKey(),\n  codeArticle: text(\"code_article\").notNull().unique(),\n  designation: text(\"designation\").notNull(),\n  categorie: text(\"categorie\").notNull(),\n  marque: text(\"marque\"),\n  reference: text(\"reference\"),\n  stockInitial: integer(\"stock_initial\").notNull().default(0),\n  stockActuel: integer(\"stock_actuel\").notNull().default(0),\n  unite: text(\"unite\").notNull().default(\"pcs\"),\n  prixUnitaire: decimal(\"prix_unitaire\", { precision: 10, scale: 2 }),\n  seuilMinimum: integer(\"seuil_minimum\").default(10),\n  fournisseurId: varchar(\"fournisseur_id\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Suppliers\nexport const suppliers = pgTable(\"suppliers\", {\n  id: varchar(\"id\").primaryKey(),\n  nom: text(\"nom\").notNull(),\n  contact: text(\"contact\"),\n  telephone: text(\"telephone\"),\n  email: text(\"email\"),\n  adresse: text(\"adresse\"),\n  conditionsPaiement: text(\"conditions_paiement\"),\n  delaiLivraison: integer(\"delai_livraison\"), // in days\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Requestors\nexport const requestors = pgTable(\"requestors\", {\n  id: varchar(\"id\").primaryKey(),\n  nom: text(\"nom\").notNull(),\n  prenom: text(\"prenom\").notNull(),\n  departement: text(\"departement\").notNull(),\n  poste: text(\"poste\"),\n  email: text(\"email\"),\n  telephone: text(\"telephone\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Purchase Requests\nexport const purchaseRequests = pgTable(\"purchase_requests\", {\n  id: varchar(\"id\").primaryKey(),\n  dateDemande: timestamp(\"date_demande\").notNull().defaultNow(),\n  requestorId: varchar(\"requestor_id\").notNull(),\n  articleId: varchar(\"article_id\").notNull(),\n  quantiteDemandee: integer(\"quantite_demandee\").notNull(),\n  dateInitiation: timestamp(\"date_initiation\").defaultNow(),\n  observations: text(\"observations\"),\n  statut: text(\"statut\").notNull().default(\"en_attente\"), // en_attente, approuve, refuse, commande\n  supplierId: varchar(\"supplier_id\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Goods Reception\nexport const receptions = pgTable(\"receptions\", {\n  id: varchar(\"id\").primaryKey(),\n  dateReception: timestamp(\"date_reception\").notNull().defaultNow(),\n  supplierId: varchar(\"supplier_id\").notNull(),\n  articleId: varchar(\"article_id\").notNull(),\n  quantiteRecue: integer(\"quantite_recue\").notNull(),\n  prixUnitaire: decimal(\"prix_unitaire\", { precision: 10, scale: 2 }),\n  numeroBonLivraison: text(\"numero_bon_livraison\"),\n  observations: text(\"observations\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Stock Outbound\nexport const outbounds = pgTable(\"outbounds\", {\n  id: varchar(\"id\").primaryKey(),\n  dateSortie: timestamp(\"date_sortie\").notNull().defaultNow(),\n  requestorId: varchar(\"requestor_id\").notNull(),\n  articleId: varchar(\"article_id\").notNull(),\n  quantiteSortie: integer(\"quantite_sortie\").notNull(),\n  motifSortie: text(\"motif_sortie\").notNull(),\n  observations: text(\"observations\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Stock Movements (for history tracking)\nexport const stockMovements = pgTable(\"stock_movements\", {\n  id: varchar(\"id\").primaryKey(),\n  articleId: varchar(\"article_id\").notNull(),\n  type: text(\"type\").notNull(), // entree, sortie\n  quantite: integer(\"quantite\").notNull(),\n  quantiteAvant: integer(\"quantite_avant\").notNull(),\n  quantiteApres: integer(\"quantite_apres\").notNull(),\n  reference: text(\"reference\"), // Reference to reception/outbound ID\n  dateMovement: timestamp(\"date_movement\").notNull().defaultNow(),\n  description: text(\"description\"),\n});\n\n// Insert schemas\nexport const insertArticleSchema = createInsertSchema(articles).omit({\n  id: true,\n  createdAt: true,\n  stockActuel: true,\n}).extend({\n  prixUnitaire: z.coerce.number().nullable().optional(),\n});\n\nexport const insertSupplierSchema = createInsertSchema(suppliers).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertRequestorSchema = createInsertSchema(requestors).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertPurchaseRequestSchema = createInsertSchema(purchaseRequests).omit({\n  id: true,\n  createdAt: true,\n  dateInitiation: true,\n}).extend({\n  supplierId: z.string().nullable().optional(),\n  dateDemande: z.string().transform((str) => new Date(str)),\n});\n\nexport const insertReceptionSchema = createInsertSchema(receptions).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  prixUnitaire: z.coerce.number().nullable().optional(),\n  dateReception: z.string().transform((str) => new Date(str)),\n});\n\nexport const insertOutboundSchema = createInsertSchema(outbounds).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  dateSortie: z.string().transform((str) => new Date(str)),\n});\n\n// Schema for converting purchase request to reception\nexport const convertToReceptionSchema = z.object({\n  quantiteRecue: z.number().positive().optional(),\n  prixUnitaire: z.coerce.number().nullable().optional(),\n  numeroBonLivraison: z.string().optional(),\n  observations: z.string().optional(),\n  dateReception: z.string().optional(),\n});\n\n// Types\nexport type Article = typeof articles.$inferSelect;\nexport type InsertArticle = z.infer<typeof insertArticleSchema>;\n\nexport type Supplier = typeof suppliers.$inferSelect;\nexport type InsertSupplier = z.infer<typeof insertSupplierSchema>;\n\nexport type Requestor = typeof requestors.$inferSelect;\nexport type InsertRequestor = z.infer<typeof insertRequestorSchema>;\n\nexport type PurchaseRequest = typeof purchaseRequests.$inferSelect;\nexport type InsertPurchaseRequest = z.infer<typeof insertPurchaseRequestSchema>;\n\nexport type Reception = typeof receptions.$inferSelect;\nexport type InsertReception = z.infer<typeof insertReceptionSchema>;\n\nexport type Outbound = typeof outbounds.$inferSelect;\nexport type InsertOutbound = z.infer<typeof insertOutboundSchema>;\n\nexport type StockMovement = typeof stockMovements.$inferSelect;\n\nexport type ConvertToReception = z.infer<typeof convertToReceptionSchema>;\n","size_bytes":6188},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Layout from \"@/components/Layout\";\nimport PWASupport from \"@/components/PWASupport\";\nimport Dashboard from \"@/pages/Dashboard\";\nimport Articles from \"@/pages/Articles\";\nimport Suppliers from \"@/pages/Suppliers\";\nimport Requestors from \"@/pages/Requestors\";\nimport PurchaseRequests from \"@/pages/PurchaseRequests\";\nimport PurchaseFollow from \"@/pages/PurchaseFollow\";\nimport StockStatus from \"@/pages/StockStatus\";\nimport Reception from \"@/pages/Reception\";\nimport Outbound from \"@/pages/Outbound\";\nimport Reports from \"@/pages/Reports\";\nimport Analytics from \"@/pages/Analytics\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Layout>\n      <Switch>\n        <Route path=\"/\" component={Dashboard} />\n        <Route path=\"/dashboard\" component={Dashboard} />\n        <Route path=\"/articles\" component={Articles} />\n        <Route path=\"/suppliers\" component={Suppliers} />\n        <Route path=\"/requestors\" component={Requestors} />\n        <Route path=\"/purchase-requests\" component={PurchaseRequests} />\n        <Route path=\"/purchase-follow\" component={PurchaseFollow} />\n        <Route path=\"/stock-status\" component={StockStatus} />\n        <Route path=\"/reception\" component={Reception} />\n        <Route path=\"/outbound\" component={Outbound} />\n        <Route path=\"/reports\" component={Reports} />\n        <Route path=\"/analytics\" component={Analytics} />\n        <Route component={NotFound} />\n      </Switch>\n    </Layout>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n        <PWASupport />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":1979},"client/src/index.css":{"content":"@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  /* Windows 10 inspired color scheme */\n  --background: hsl(0 0% 98%);\n  --foreground: hsl(0 0% 13%);\n  --card: hsl(0 0% 100%);\n  --card-foreground: hsl(0 0% 13%);\n  --popover: hsl(0 0% 100%);\n  --popover-foreground: hsl(0 0% 13%);\n  --primary: hsl(210 100% 42%);\n  --primary-foreground: hsl(0 0% 100%);\n  --secondary: hsl(217 32% 96%);\n  --secondary-foreground: hsl(0 0% 13%);\n  --muted: hsl(217 32% 96%);\n  --muted-foreground: hsl(215 16% 47%);\n  --accent: hsl(217 32% 96%);\n  --accent-foreground: hsl(210 100% 42%);\n  --destructive: hsl(0 73% 41%);\n  --destructive-foreground: hsl(0 0% 100%);\n  --border: hsl(214 32% 91%);\n  --input: hsl(214 32% 91%);\n  --ring: hsl(210 100% 42%);\n  --radius: 2px;\n  \n  /* Windows 10 official colors */\n  --windows-blue: #0078d4;\n  --windows-blue-dark: #106ebe;\n  --windows-blue-darker: #005a9e;\n  --windows-light-blue: #40e0d0;\n  --windows-green: #107c10;\n  --windows-amber: #ff8c00;\n  --windows-red: #d13438;\n  --windows-purple: #881798;\n  --windows-gray-lightest: #faf9f8;\n  --windows-gray-light: #f3f2f1;\n  --windows-gray: #605e5c;\n  --windows-gray-dark: #323130;\n  --windows-gray-darkest: #201f1e;\n  \n  /* Windows fonts */\n  --font-system: \"Segoe UI Variable\", \"Segoe UI\", system-ui, -apple-system, BlinkMacSystemFont, \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", sans-serif;\n}\n\n.dark {\n  --background: hsl(0 0% 4%);\n  --foreground: hsl(0 0% 95%);\n  --card: hsl(0 0% 8%);\n  --card-foreground: hsl(0 0% 95%);\n  --popover: hsl(0 0% 4%);\n  --popover-foreground: hsl(0 0% 95%);\n  --primary: hsl(207 100% 50%);\n  --primary-foreground: hsl(0 0% 100%);\n  --secondary: hsl(217 5% 14%);\n  --secondary-foreground: hsl(0 0% 95%);\n  --muted: hsl(217 5% 14%);\n  --muted-foreground: hsl(215 7% 64%);\n  --accent: hsl(217 5% 14%);\n  --accent-foreground: hsl(207 100% 50%);\n  --destructive: hsl(0 73% 41%);\n  --destructive-foreground: hsl(0 0% 100%);\n  --border: hsl(217 10% 18%);\n  --input: hsl(217 10% 14%);\n  --ring: hsl(207 100% 50%);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n  \n  body {\n    @apply bg-background text-foreground font-sans antialiased;\n    font-family: var(--font-system);\n  }\n}\n\n@layer components {\n  /* Windows-style navigation */\n  .windows-nav {\n    border-bottom: 1px solid #e1e5e9;\n    background: linear-gradient(180deg, #ffffff 0%, #f8f9fa 100%);\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  }\n  \n  .windows-title-bar {\n    background: linear-gradient(180deg, #f0f0f0 0%, #e5e5e5 100%);\n    border-bottom: 1px solid #d0d0d0;\n    min-height: 32px;\n    height: 32px;\n  }\n  \n  .windows-title-button {\n    @apply w-6 h-6 flex items-center justify-center text-xs transition-colors;\n  }\n  \n  .windows-nav-item {\n    @apply transition-all duration-200 ease-out;\n    border-radius: 3px;\n  }\n  \n  .windows-nav-item:hover {\n    background: linear-gradient(180deg, #e3f2fd 0%, #bbdefb 100%);\n    border: 1px solid #90caf9;\n  }\n  \n  .windows-nav-item-mobile {\n    @apply transition-all duration-200 ease-out;\n    border-radius: 2px;\n  }\n  \n  .windows-search-input {\n    @apply border-gray-300 rounded-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500;\n    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n  }\n\n  .bg-windows-blue {\n    background-color: var(--windows-blue);\n  }\n\n  .text-windows-blue {\n    color: var(--windows-blue);\n  }\n\n  .focus\\:border-windows-blue:focus {\n    border-color: var(--windows-blue);\n  }\n\n  .focus\\:ring-windows-blue:focus {\n    --tw-ring-color: var(--windows-blue);\n  }\n  \n  /* Windows-style cards */\n  .windows-card {\n    @apply bg-white border border-gray-200 rounded-sm shadow-sm;\n    background: linear-gradient(180deg, #ffffff 0%, #fafbfc 100%);\n    border: 1px solid #e1e5e9;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n\n  /* Fluent Design Chart Styles */\n  .fluent-chart {\n    background: rgba(255, 255, 255, 0.9);\n    backdrop-filter: blur(20px);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    border-radius: 12px;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);\n  }\n\n  .fluent-tooltip {\n    background: rgba(255, 255, 255, 0.9) !important;\n    backdrop-filter: blur(20px) !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 12px !important;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12) !important;\n    font-family: 'Segoe UI Variable', 'Segoe UI', system-ui, sans-serif !important;\n  }\n\n  .fluent-grid {\n    opacity: 0.05;\n  }\n\n  .fluent-axis {\n    font-family: 'Segoe UI Variable', 'Segoe UI', system-ui, sans-serif;\n    font-size: 12px;\n    fill: #605e5c;\n  }\n\n  .fluent-legend {\n    background: rgba(255, 255, 255, 0.5);\n    backdrop-filter: blur(10px);\n    border-radius: 8px;\n    transition: all 0.2s ease;\n  }\n\n  .fluent-legend:hover {\n    background: rgba(255, 255, 255, 0.7);\n  }\n\n  /* Mica Effect Containers */\n  .mica-container {\n    position: relative;\n    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);\n    backdrop-filter: blur(20px) saturate(180%);\n    -webkit-backdrop-filter: blur(20px) saturate(180%);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    box-shadow: \n      0 8px 32px rgba(0, 0, 0, 0.1),\n      inset 0 1px 0 rgba(255, 255, 255, 0.2);\n    transition: all 0.3s ease;\n  }\n\n  .mica-container:hover {\n    transform: translateY(-2px);\n    box-shadow: \n      0 12px 40px rgba(0, 0, 0, 0.15),\n      inset 0 1px 0 rgba(255, 255, 255, 0.3);\n  }\n\n  .mica-container::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: radial-gradient(circle at 20% 20%, rgba(120, 119, 198, 0.05) 0%, transparent 50%);\n    pointer-events: none;\n    z-index: 1;\n  }\n  \n  .windows-card:hover {\n    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n    transform: translateY(-1px);\n    transition: all 0.2s ease-out;\n  }\n  \n  /* Windows-style buttons */\n  .windows-button {\n    @apply px-4 py-2 text-sm font-medium rounded-sm transition-all duration-200;\n    background: linear-gradient(180deg, #ffffff 0%, #f0f0f0 100%);\n    border: 1px solid #adadad;\n    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.4) inset;\n  }\n  \n  .windows-button:hover {\n    background: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%);\n    border-color: #969696;\n  }\n  \n  .windows-button:active {\n    background: linear-gradient(180deg, #e8e8e8 0%, #f0f0f0 100%);\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) inset;\n  }\n  \n  .windows-button-primary {\n    @apply text-white;\n    background: linear-gradient(180deg, #0078d4 0%, #106ebe 100%);\n    border: 1px solid #005a9e;\n  }\n  \n  .windows-button-primary:hover {\n    background: linear-gradient(180deg, #106ebe 0%, #005a9e 100%);\n  }\n  \n  /* Windows-style inputs */\n  .windows-input {\n    @apply px-3 py-2 border border-gray-300 rounded-sm text-sm;\n    background: #ffffff;\n    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n    transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n  }\n  \n  .windows-input:focus {\n    border-color: #0078d4;\n    box-shadow: 0 0 0 2px rgba(0, 120, 212, 0.2);\n    outline: none;\n  }\n  \n  /* Windows colors */\n  .bg-windows-blue { background-color: #0078d4; }\n  .bg-windows-light-blue { background-color: #40e0d0; }\n  .bg-windows-green { background-color: #107c10; }\n  .bg-windows-amber { background-color: #ff8c00; }\n  .bg-windows-red { background-color: #d13438; }\n  .bg-windows-gray { background-color: #605e5c; }\n  .bg-windows-title-bar { background: linear-gradient(180deg, #f0f0f0 0%, #e5e5e5 100%); }\n  \n  .text-windows-blue { color: #0078d4; }\n  .text-windows-gray { color: #605e5c; }\n  .text-windows-gray-dark { color: #323130; }\n  .text-windows-red { color: #d13438; }\n  .text-windows-green { color: #107c10; }\n  .text-windows-amber { color: #ff8c00; }\n  .text-windows-purple { color: #881798; }\n  \n  /* Windows-style status indicators */\n  .status-critical {\n    @apply bg-red-50 border border-red-200 text-red-800;\n  }\n  \n  .status-warning {\n    @apply bg-yellow-50 border border-yellow-200 text-yellow-800;\n  }\n  \n  .status-success {\n    @apply bg-green-50 border border-green-200 text-green-800;\n  }\n  \n  .status-info {\n    @apply bg-blue-50 border border-blue-200 text-blue-800;\n  }\n  \n  /* Windows-style scrollbars */\n  .windows-scrollbar::-webkit-scrollbar {\n    width: 12px;\n  }\n  \n  .windows-scrollbar::-webkit-scrollbar-track {\n    background: #f1f1f1;\n    border-radius: 6px;\n  }\n  \n  .windows-scrollbar::-webkit-scrollbar-thumb {\n    background: #c1c1c1;\n    border-radius: 6px;\n  }\n  \n  .windows-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: #a8a8a8;\n  }\n  \n  /* Legacy styles for compatibility */\n  .sidebar-item {\n    @apply transition-all duration-200 ease-in-out;\n  }\n  \n  .sidebar-item:hover {\n    @apply bg-muted;\n  }\n  \n  .sidebar-item.active {\n    @apply bg-primary text-primary-foreground;\n  }\n  \n  .card-hover {\n    @apply transition-all duration-200 ease-in-out;\n  }\n  \n  .card-hover:hover {\n    @apply shadow-lg transform -translate-y-0.5;\n  }\n\n  /* Responsive Design Utilities */\n  .responsive-grid-2 {\n    @apply grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6;\n  }\n\n  .responsive-grid-3 {\n    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6;\n  }\n\n  .responsive-grid-4 {\n    @apply grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3 lg:gap-4;\n  }\n\n  .responsive-padding {\n    @apply p-4 sm:p-6;\n  }\n\n  .responsive-margin {\n    @apply m-4 sm:m-6;\n  }\n\n  .responsive-text {\n    @apply text-sm sm:text-base;\n  }\n\n  .responsive-text-small {\n    @apply text-xs sm:text-sm;\n  }\n\n  .responsive-icon {\n    @apply w-4 h-4 sm:w-5 sm:h-5;\n  }\n\n  .responsive-icon-small {\n    @apply w-3 h-3 sm:w-4 sm:h-4;\n  }\n\n  /* Mobile-first containers */\n  .mobile-container {\n    @apply w-full max-w-[95vw] sm:max-w-4xl;\n  }\n\n  .mobile-modal {\n    @apply fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4;\n  }\n\n  .mobile-card {\n    @apply w-full max-w-[calc(100vw-1rem)] sm:max-w-md lg:max-w-lg;\n  }\n\n  /* Responsive buttons */\n  .btn-responsive {\n    @apply px-3 py-2 sm:px-4 sm:py-2 text-sm sm:text-base;\n  }\n\n  .btn-responsive-small {\n    @apply px-2 py-1 sm:px-3 sm:py-2 text-xs sm:text-sm;\n  }\n\n  /* Hide/show utilities for responsive design */\n  .mobile-only {\n    @apply block sm:hidden;\n  }\n\n  .desktop-only {\n    @apply hidden sm:block;\n  }\n\n  .tablet-up {\n    @apply hidden md:block;\n  }\n\n  /* Responsive navigation */\n  .nav-responsive {\n    @apply flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4;\n  }\n\n  /* Responsive alerts and notifications */\n  .alert-responsive {\n    @apply fixed top-4 right-4 z-50 w-80 sm:w-72 md:w-80 max-w-[calc(100vw-2rem)];\n  }\n\n  /* Auto-hide animations */\n  .auto-hide-3s {\n    animation: slideInFadeOut 3s ease-in-out forwards;\n  }\n\n  @keyframes slideInFadeOut {\n    0% {\n      opacity: 0;\n      transform: translateY(100%);\n    }\n    10% {\n      opacity: 1;\n      transform: translateY(0);\n    }\n    90% {\n      opacity: 1;\n      transform: translateY(0);\n    }\n    100% {\n      opacity: 0;\n      transform: translateY(100%);\n    }\n  }\n}\n","size_bytes":11258},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ArticleForm.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { insertArticleSchema, type Article, type InsertArticle } from \"@shared/schema\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface ArticleFormProps {\n  article?: Article | null;\n  onClose: () => void;\n}\n\nconst categories = [\n  \"Joints\",\n  \"Électrique\",\n  \"Régulation\",\n  \"Mécanique\",\n  \"Thermique\",\n  \"Filtration\",\n  \"Autre\"\n];\n\nconst unites = [\"pcs\", \"kg\", \"m\", \"L\", \"m²\", \"m³\"];\n\nexport default function ArticleForm({ article, onClose }: ArticleFormProps) {\n  const { toast } = useToast();\n  const isEditing = !!article;\n\n  const { data: suppliers = [] } = useQuery({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  const form = useForm<InsertArticle>({\n    resolver: zodResolver(insertArticleSchema),\n    defaultValues: {\n      codeArticle: article?.codeArticle || \"\",\n      designation: article?.designation || \"\",\n      categorie: article?.categorie || \"\",\n      marque: article?.marque || \"\",\n      reference: article?.reference || \"\",\n      stockInitial: article?.stockInitial || 0,\n      unite: article?.unite || \"pcs\",\n      prixUnitaire: article?.prixUnitaire || null,\n      seuilMinimum: article?.seuilMinimum || 10,\n      fournisseurId: article?.fournisseurId || \"none\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: (data: InsertArticle) => apiRequest(\"POST\", \"/api/articles\", data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Article créé\",\n        description: \"L'article a été créé avec succès\",\n      });\n      onClose();\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de créer l'article\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: (data: Partial<Article>) => apiRequest(\"PUT\", `/api/articles/${article!.id}`, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Article modifié\",\n        description: \"L'article a été modifié avec succès\",\n      });\n      onClose();\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de modifier l'article\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertArticle) => {\n    // Convert \"none\" back to null for fournisseurId\n    const processedData = {\n      ...data,\n      fournisseurId: data.fournisseurId === \"none\" ? null : data.fournisseurId\n    };\n    \n    if (isEditing) {\n      updateMutation.mutate(processedData);\n    } else {\n      createMutation.mutate(processedData);\n    }\n  };\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n\n  return (\n    <Dialog open={true} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\" data-testid=\"article-form-modal\">\n        <DialogHeader>\n          <DialogTitle>\n            {isEditing ? \"Modifier l'Article\" : \"Nouvel Article\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"codeArticle\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Code Article *</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Ex: JE-205\" \n                        {...field} \n                        data-testid=\"input-code-article\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"reference\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Référence</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Référence fournisseur\" \n                        {...field} \n                        value={field.value || \"\"}\n                        data-testid=\"input-reference\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"designation\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Désignation *</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"Ex: Joint étanchéité diamètre 20.5mm\" \n                      {...field} \n                      data-testid=\"input-designation\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"categorie\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Catégorie *</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-category\">\n                          <SelectValue placeholder=\"Sélectionner une catégorie\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {categories.map(category => (\n                          <SelectItem key={category} value={category}>{category}</SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"marque\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Marque</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Marque du produit\" \n                        {...field} \n                        value={field.value || \"\"}\n                        data-testid=\"input-marque\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"stockInitial\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Stock Initial *</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"number\" \n                        min=\"0\"\n                        {...field} \n                        onChange={e => field.onChange(parseInt(e.target.value) || 0)}\n                        data-testid=\"input-stock-initial\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"unite\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Unité</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-unite\">\n                          <SelectValue />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {unites.map(unite => (\n                          <SelectItem key={unite} value={unite}>{unite}</SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"seuilMinimum\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Seuil Minimum</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"number\" \n                        min=\"0\"\n                        {...field} \n                        onChange={e => field.onChange(parseInt(e.target.value) || 10)}\n                        data-testid=\"input-seuil-minimum\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"prixUnitaire\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Prix Unitaire (€)</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"number\" \n                        step=\"0.01\" \n                        min=\"0\"\n                        {...field} \n                        value={field.value || \"\"}\n                        onChange={e => field.onChange(e.target.value ? parseFloat(e.target.value) : null)}\n                        data-testid=\"input-prix-unitaire\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"fournisseurId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Fournisseur Principal</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value || \"none\"}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-fournisseur\">\n                          <SelectValue placeholder=\"Sélectionner un fournisseur\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"none\">Aucun fournisseur</SelectItem>\n                        {suppliers.map((supplier: any) => (\n                          <SelectItem key={supplier.id} value={supplier.id}>\n                            {supplier.nom}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"flex justify-end space-x-4 pt-6 border-t border-gray-200\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={onClose}\n                data-testid=\"button-cancel\"\n              >\n                Annuler\n              </Button>\n              <Button \n                type=\"submit\" \n                className=\"btn-ms-blue\"\n                disabled={isPending}\n                data-testid=\"button-save\"\n              >\n                {isPending ? \"Enregistrement...\" : \"Enregistrer\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":12732},"client/src/components/Layout.tsx":{"content":"import TopNavigation from \"./TopNavigation\";\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nexport default function Layout({ children }: LayoutProps) {\n  return (\n    <div className=\"min-h-screen bg-gray-50\" data-testid=\"main-layout\" style={{ fontFamily: '\"Segoe UI\", system-ui, sans-serif' }}>\n      <div className=\"sticky top-0 z-50\">\n        <TopNavigation />\n      </div>\n      <main className=\"windows-scrollbar overflow-y-auto\" data-testid=\"main-content\" style={{ height: 'calc(100vh - 112px)' }}>\n        <div className=\"p-6\">\n          {children}\n        </div>\n      </main>\n    </div>\n  );\n}\n","size_bytes":612},"client/src/components/OutboundForm.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { insertOutboundSchema, type InsertOutbound, type Outbound } from \"@shared/schema\";\n\ninterface OutboundFormProps {\n  outbound?: Outbound | null;\n  onClose: () => void;\n}\n\nexport default function OutboundForm({ outbound, onClose }: OutboundFormProps) {\n  const [selectedArticle, setSelectedArticle] = useState<any>(null);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const isEditing = !!outbound;\n\n  const { data: articles = [] } = useQuery<any[]>({\n    queryKey: [\"/api/articles\"],\n  });\n\n  const { data: requestors = [] } = useQuery<any[]>({\n    queryKey: [\"/api/requestors\"],\n  });\n\n  const form = useForm<InsertOutbound>({\n    resolver: zodResolver(insertOutboundSchema),\n    defaultValues: {\n      dateSortie: outbound?.dateSortie || new Date(),\n      requestorId: outbound?.requestorId || \"\",\n      articleId: outbound?.articleId || \"\",\n      quantiteSortie: outbound?.quantiteSortie || 1,\n      motifSortie: outbound?.motifSortie || \"\",\n      observations: outbound?.observations || \"\",\n    },\n  });\n\n  const watchedArticleId = form.watch(\"articleId\");\n  const watchedQuantity = form.watch(\"quantiteSortie\");\n\n  useEffect(() => {\n    if (watchedArticleId) {\n      const article = articles.find((a: any) => a.id === watchedArticleId);\n      setSelectedArticle(article);\n    }\n  }, [watchedArticleId, articles]);\n\n  const createMutation = useMutation({\n    mutationFn: (data: InsertOutbound) => apiRequest(\"POST\", \"/api/outbounds\", data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/outbounds\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Sortie créée\",\n        description: \"La sortie de stock a été créée avec succès\",\n      });\n      onClose();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error.message || \"Impossible de créer la sortie\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: (data: Partial<Outbound>) => apiRequest(\"PUT\", `/api/outbounds/${outbound!.id}`, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/outbounds\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Sortie modifiée\",\n        description: \"La sortie de stock a été modifiée avec succès\",\n      });\n      onClose();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error.message || \"Impossible de modifier la sortie\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertOutbound) => {\n    if (isEditing) {\n      updateMutation.mutate(data);\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n  const availableStock = selectedArticle?.stockActuel || 0;\n  const stockAfterOutbound = Math.max(0, availableStock - (watchedQuantity || 0));\n  const isInsufficientStock = (watchedQuantity || 0) > availableStock;\n\n  return (\n    <Dialog open={true} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\" data-testid=\"outbound-form-dialog\">\n        <DialogHeader>\n          <DialogTitle className=\"text-xl\">\n            {isEditing ? \"Modifier la Sortie\" : \"Nouvelle Sortie de Stock\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"articleId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Article *</FormLabel>\n                    <FormControl>\n                      <Select onValueChange={field.onChange} value={field.value} data-testid=\"select-article\">\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Sélectionnez un article\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {articles.map((article: any) => (\n                            <SelectItem key={article.id} value={article.id}>\n                              {article.codeArticle} - {article.designation}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"dateSortie\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Date de Sortie *</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"date\"\n                        {...field}\n                        value={field.value ? new Date(field.value).toISOString().split('T')[0] : \"\"}\n                        onChange={(e) => field.onChange(new Date(e.target.value))}\n                        data-testid=\"input-date-sortie\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            {/* Stock Information Display */}\n            {selectedArticle && (\n              <div className=\"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg border\">\n                <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                  <div>\n                    <span className=\"text-gray-600 dark:text-gray-400\">Stock Disponible:</span>\n                    <div className=\"font-semibold text-lg text-blue-600 dark:text-blue-400\">\n                      {availableStock}\n                    </div>\n                  </div>\n                  <div>\n                    <span className=\"text-gray-600 dark:text-gray-400\">Quantité Sortie:</span>\n                    <div className=\"font-semibold text-lg text-orange-600 dark:text-orange-400\">\n                      {watchedQuantity || 0}\n                    </div>\n                  </div>\n                  <div>\n                    <span className=\"text-gray-600 dark:text-gray-400\">Stock Après Sortie:</span>\n                    <div className={`font-semibold text-lg ${\n                      isInsufficientStock \n                        ? \"text-red-600 dark:text-red-400\" \n                        : stockAfterOutbound <= (selectedArticle.seuilMinimum || 10)\n                        ? \"text-yellow-600 dark:text-yellow-400\"\n                        : \"text-green-600 dark:text-green-400\"\n                    }`}>\n                      {stockAfterOutbound}\n                    </div>\n                  </div>\n                </div>\n                {isInsufficientStock && (\n                  <div className=\"mt-2 p-2 bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200 text-sm rounded border border-red-200 dark:border-red-800\">\n                    ⚠️ Stock insuffisant! Quantité disponible: {availableStock}\n                  </div>\n                )}\n                {!isInsufficientStock && stockAfterOutbound <= (selectedArticle.seuilMinimum || 10) && stockAfterOutbound > 0 && (\n                  <div className=\"mt-2 p-2 bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 text-sm rounded border border-yellow-200 dark:border-yellow-800\">\n                    ⚠️ Attention: Le stock après sortie sera en dessous du seuil minimum ({selectedArticle.seuilMinimum || 10})\n                  </div>\n                )}\n              </div>\n            )}\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"quantiteSortie\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Quantité de Sortie *</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"number\"\n                        min=\"1\"\n                        max={selectedArticle?.stockActuel || undefined}\n                        {...field}\n                        onChange={(e) => field.onChange(Number(e.target.value))}\n                        data-testid=\"input-quantite-sortie\"\n                        className={isInsufficientStock ? \"border-red-500 focus:border-red-500\" : \"\"}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                    {isInsufficientStock && (\n                      <p className=\"text-sm text-red-600 dark:text-red-400\">\n                        Quantité supérieure au stock disponible\n                      </p>\n                    )}\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"motifSortie\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Motif de Sortie *</FormLabel>\n                    <FormControl>\n                      <Select onValueChange={field.onChange} value={field.value} data-testid=\"select-motif\">\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Sélectionnez un motif\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"production\">Production</SelectItem>\n                          <SelectItem value=\"maintenance\">Maintenance</SelectItem>\n                          <SelectItem value=\"reparation\">Réparation</SelectItem>\n                          <SelectItem value=\"transfert\">Transfert</SelectItem>\n                          <SelectItem value=\"retour_fournisseur\">Retour fournisseur</SelectItem>\n                          <SelectItem value=\"perte\">Perte/Casse</SelectItem>\n                          <SelectItem value=\"autre\">Autre</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"requestorId\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Demandeur *</FormLabel>\n                  <FormControl>\n                    <Select onValueChange={field.onChange} value={field.value} data-testid=\"select-requestor\">\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Sélectionnez un demandeur\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {requestors.map((requestor: any) => (\n                          <SelectItem key={requestor.id} value={requestor.id}>\n                            {requestor.prenom} {requestor.nom} - {requestor.departement}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"observations\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Observations</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      {...field}\n                      placeholder=\"Notes, commentaires, détails supplémentaires...\"\n                      rows={3}\n                      data-testid=\"textarea-observations\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end space-x-2 pt-4 border-t\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                data-testid=\"button-cancel\"\n              >\n                Annuler\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={isPending || isInsufficientStock}\n                className=\"bg-blue-600 hover:bg-blue-700\"\n                data-testid=\"button-submit\"\n              >\n                {isPending ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\" />\n                    {isEditing ? \"Modification...\" : \"Création...\"}\n                  </>\n                ) : (\n                  isEditing ? \"Modifier la Sortie\" : \"Créer la Sortie\"\n                )}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":13999},"client/src/components/PurchaseRequestForm.tsx":{"content":"import { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { insertPurchaseRequestSchema, type PurchaseRequest, type InsertPurchaseRequest, type Article, type Requestor, type Supplier } from \"@shared/schema\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface PurchaseRequestFormProps {\n  request?: PurchaseRequest | null;\n  onClose: () => void;\n}\n\nexport default function PurchaseRequestForm({ request, onClose }: PurchaseRequestFormProps) {\n  const { toast } = useToast();\n  const isEditing = !!request;\n\n  const { data: articles = [] } = useQuery<Article[]>({\n    queryKey: [\"/api/articles\"],\n  });\n\n  const { data: requestors = [] } = useQuery<Requestor[]>({\n    queryKey: [\"/api/requestors\"],\n  });\n\n  const { data: suppliers = [] } = useQuery<Supplier[]>({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  const form = useForm<InsertPurchaseRequest>({\n    resolver: zodResolver(insertPurchaseRequestSchema),\n    defaultValues: {\n      dateDemande: request?.dateDemande || new Date(),\n      requestorId: request?.requestorId || \"\",\n      articleId: request?.articleId || \"\",\n      quantiteDemandee: request?.quantiteDemandee || 1,\n      observations: request?.observations || \"\",\n      statut: request?.statut || \"en_attente\",\n      supplierId: request?.supplierId || \"none\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: (data: InsertPurchaseRequest) => apiRequest(\"POST\", \"/api/purchase-requests\", data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/purchase-requests\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Demande créée\",\n        description: \"La demande d'achat a été créée avec succès\",\n      });\n      onClose();\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de créer la demande\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: (data: Partial<PurchaseRequest>) => apiRequest(\"PUT\", `/api/purchase-requests/${request!.id}`, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/purchase-requests\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Demande modifiée\",\n        description: \"La demande d'achat a été modifiée avec succès\",\n      });\n      onClose();\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de modifier la demande\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertPurchaseRequest) => {\n    // Convert \"none\" back to null for supplierId\n    const processedData = {\n      ...data,\n      supplierId: data.supplierId === \"none\" ? null : data.supplierId\n    };\n    \n    if (isEditing) {\n      updateMutation.mutate(processedData);\n    } else {\n      createMutation.mutate(processedData);\n    }\n  };\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n\n  return (\n    <Dialog open={true} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\" data-testid=\"purchase-request-form-modal\">\n        <DialogHeader>\n          <DialogTitle>\n            {isEditing ? \"Modifier la Demande\" : \"Nouvelle Demande d'Achat\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"requestorId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Demandeur *</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-requestor\">\n                          <SelectValue placeholder=\"Sélectionner un demandeur\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {requestors.map((requestor: any) => (\n                          <SelectItem key={requestor.id} value={requestor.id}>\n                            {requestor.nom} {requestor.prenom} - {requestor.departement}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"articleId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Article *</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-article\">\n                          <SelectValue placeholder=\"Sélectionner un article\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {articles.map((article: any) => (\n                          <SelectItem key={article.id} value={article.id}>\n                            {article.codeArticle} - {article.designation}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"quantiteDemandee\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Quantité demandée *</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"number\" \n                        min=\"1\"\n                        {...field} \n                        onChange={e => field.onChange(parseInt(e.target.value) || 1)}\n                        data-testid=\"input-quantite\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"supplierId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Fournisseur suggéré</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value || \"none\"}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-supplier\">\n                          <SelectValue placeholder=\"Sélectionner un fournisseur\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"none\">Aucun fournisseur</SelectItem>\n                        {suppliers.map((supplier: any) => (\n                          <SelectItem key={supplier.id} value={supplier.id}>\n                            {supplier.nom}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"observations\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Observations</FormLabel>\n                  <FormControl>\n                    <Textarea \n                      placeholder=\"Commentaires, urgence, spécifications...\" \n                      {...field} \n                      value={field.value || \"\"}\n                      rows={3}\n                      data-testid=\"input-observations\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end space-x-4 pt-6 border-t border-gray-200\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={onClose}\n                data-testid=\"button-cancel\"\n              >\n                Annuler\n              </Button>\n              <Button \n                type=\"submit\" \n                className=\"btn-ms-blue\"\n                disabled={isPending}\n                data-testid=\"button-save\"\n              >\n                {isPending ? \"Enregistrement...\" : \"Enregistrer\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":9662},"client/src/components/ReceptionForm.tsx":{"content":"import { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { insertReceptionSchema, type Reception, type InsertReception } from \"@shared/schema\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface ReceptionFormProps {\n  reception?: Reception | null;\n  onClose: () => void;\n}\n\nexport default function ReceptionForm({ reception, onClose }: ReceptionFormProps) {\n  const { toast } = useToast();\n  const isEditing = !!reception;\n  const isViewOnly = isEditing; // Receptions are typically view-only once created\n\n  const { data: articles = [] } = useQuery({\n    queryKey: [\"/api/articles\"],\n  });\n\n  const { data: suppliers = [] } = useQuery({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  const form = useForm<InsertReception>({\n    resolver: zodResolver(insertReceptionSchema),\n    defaultValues: {\n      dateReception: reception?.dateReception || new Date(),\n      supplierId: reception?.supplierId || \"\",\n      articleId: reception?.articleId || \"\",\n      quantiteRecue: reception?.quantiteRecue || 1,\n      prixUnitaire: reception?.prixUnitaire || null,\n      numeroBonLivraison: reception?.numeroBonLivraison || \"\",\n      observations: reception?.observations || \"\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: (data: InsertReception) => apiRequest(\"POST\", \"/api/receptions\", data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/receptions\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/stock-movements\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Réception enregistrée\",\n        description: \"La réception a été enregistrée et le stock mis à jour\",\n      });\n      onClose();\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible d'enregistrer la réception\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertReception) => {\n    if (!isViewOnly) {\n      createMutation.mutate(data);\n    }\n  };\n\n  const isPending = createMutation.isPending;\n\n  return (\n    <Dialog open={true} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\" data-testid=\"reception-form-modal\">\n        <DialogHeader>\n          <DialogTitle>\n            {isViewOnly ? \"Détails de la Réception\" : \"Nouvelle Réception\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"supplierId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Fournisseur *</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value} disabled={isViewOnly}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-supplier\">\n                          <SelectValue placeholder=\"Sélectionner un fournisseur\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {suppliers.map((supplier: any) => (\n                          <SelectItem key={supplier.id} value={supplier.id}>\n                            {supplier.nom}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"articleId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Article *</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value} disabled={isViewOnly}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-article\">\n                          <SelectValue placeholder=\"Sélectionner un article\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {articles.map((article: any) => (\n                          <SelectItem key={article.id} value={article.id}>\n                            {article.codeArticle} - {article.designation}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"quantiteRecue\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Quantité reçue *</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"number\" \n                        min=\"1\"\n                        {...field} \n                        onChange={e => field.onChange(parseInt(e.target.value) || 1)}\n                        disabled={isViewOnly}\n                        data-testid=\"input-quantite\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"prixUnitaire\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Prix unitaire (€)</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"number\" \n                        step=\"0.01\" \n                        min=\"0\"\n                        {...field} \n                        value={field.value || \"\"}\n                        onChange={e => field.onChange(e.target.value ? parseFloat(e.target.value) : null)}\n                        disabled={isViewOnly}\n                        data-testid=\"input-prix-unitaire\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"numeroBonLivraison\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>N° Bon de Livraison</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"BL-2024-001\" \n                        {...field} \n                        value={field.value || \"\"}\n                        disabled={isViewOnly}\n                        data-testid=\"input-bon-livraison\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"observations\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Observations</FormLabel>\n                  <FormControl>\n                    <Textarea \n                      placeholder=\"État des marchandises, conformité...\" \n                      {...field} \n                      value={field.value || \"\"}\n                      rows={3}\n                      disabled={isViewOnly}\n                      data-testid=\"input-observations\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end space-x-4 pt-6 border-t border-gray-200\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={onClose}\n                data-testid=\"button-close\"\n              >\n                {isViewOnly ? \"Fermer\" : \"Annuler\"}\n              </Button>\n              {!isViewOnly && (\n                <Button \n                  type=\"submit\" \n                  className=\"btn-ms-blue\"\n                  disabled={isPending}\n                  data-testid=\"button-save\"\n                >\n                  {isPending ? \"Enregistrement...\" : \"Enregistrer\"}\n                </Button>\n              )}\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":9371},"client/src/components/RequestorForm.tsx":{"content":"import { useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { insertRequestorSchema, type Requestor, type InsertRequestor } from \"@shared/schema\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface RequestorFormProps {\n  requestor?: Requestor | null;\n  onClose: () => void;\n}\n\nconst departements = [\n  \"Production\",\n  \"Maintenance\",\n  \"Qualité\",\n  \"Logistique\",\n  \"Administration\",\n  \"Service Technique\",\n  \"Commercial\",\n  \"Achats\",\n  \"Direction\",\n  \"Autre\"\n];\n\nexport default function RequestorForm({ requestor, onClose }: RequestorFormProps) {\n  const { toast } = useToast();\n  const isEditing = !!requestor;\n\n  const form = useForm<InsertRequestor>({\n    resolver: zodResolver(insertRequestorSchema),\n    defaultValues: {\n      nom: requestor?.nom || \"\",\n      prenom: requestor?.prenom || \"\",\n      departement: requestor?.departement || \"\",\n      poste: requestor?.poste || \"\",\n      email: requestor?.email || \"\",\n      telephone: requestor?.telephone || \"\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: (data: InsertRequestor) => apiRequest(\"POST\", \"/api/requestors\", data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/requestors\"] });\n      toast({\n        title: \"Demandeur créé\",\n        description: \"Le demandeur a été créé avec succès\",\n      });\n      onClose();\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de créer le demandeur\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: (data: Partial<Requestor>) => apiRequest(\"PUT\", `/api/requestors/${requestor!.id}`, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/requestors\"] });\n      toast({\n        title: \"Demandeur modifié\",\n        description: \"Le demandeur a été modifié avec succès\",\n      });\n      onClose();\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de modifier le demandeur\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertRequestor) => {\n    if (isEditing) {\n      updateMutation.mutate(data);\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n\n  return (\n    <Dialog open={true} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\" data-testid=\"requestor-form-modal\">\n        <DialogHeader>\n          <DialogTitle>\n            {isEditing ? \"Modifier le Demandeur\" : \"Nouveau Demandeur\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"nom\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nom *</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Nom de famille\" \n                        {...field} \n                        data-testid=\"input-nom\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"prenom\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Prénom *</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Prénom\" \n                        {...field} \n                        data-testid=\"input-prenom\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"departement\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Département *</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Département ou service\" \n                        {...field} \n                        data-testid=\"input-departement\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"poste\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Poste</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Fonction ou poste\" \n                        {...field} \n                        value={field.value || \"\"}\n                        data-testid=\"input-poste\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"email\"\n                        placeholder=\"email@entreprise.com\" \n                        {...field} \n                        value={field.value || \"\"}\n                        data-testid=\"input-email\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"telephone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Téléphone</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"0123456789\" \n                        {...field} \n                        value={field.value || \"\"}\n                        data-testid=\"input-telephone\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"flex justify-end space-x-4 pt-6 border-t border-gray-200\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={onClose}\n                data-testid=\"button-cancel\"\n              >\n                Annuler\n              </Button>\n              <Button \n                type=\"submit\" \n                className=\"btn-ms-blue\"\n                disabled={isPending}\n                data-testid=\"button-save\"\n              >\n                {isPending ? \"Enregistrement...\" : \"Enregistrer\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":7919},"client/src/components/Sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\n\ninterface SidebarProps {\n  activeModule: string;\n  setActiveModule: (module: string) => void;\n}\n\nconst menuItems = [\n  { id: \"dashboard\", path: \"/\", icon: \"fas fa-tachometer-alt\", label: \"Tableau de Bord\" },\n  { id: \"articles\", path: \"/articles\", icon: \"fas fa-cogs\", label: \"Articles\" },\n  { id: \"purchase-requests\", path: \"/purchase-requests\", icon: \"fas fa-shopping-cart\", label: \"Demandes d'Achat\" },\n  { id: \"purchase-follow\", path: \"/purchase-follow\", icon: \"fas fa-clipboard-list\", label: \"Suivi des Achats\" },\n  { id: \"stock-status\", path: \"/stock-status\", icon: \"fas fa-chart-bar\", label: \"État du Stock\" },\n  { id: \"reception\", path: \"/reception\", icon: \"fas fa-truck\", label: \"Réception\" },\n  { id: \"outbound\", path: \"/outbound\", icon: \"fas fa-sign-out-alt\", label: \"Sortie de Stock\" },\n  { id: \"suppliers\", path: \"/suppliers\", icon: \"fas fa-building\", label: \"Fournisseurs\" },\n  { id: \"requestors\", path: \"/requestors\", icon: \"fas fa-users\", label: \"Demandeurs\" },\n];\n\nconst secondaryItems = [\n  { id: \"analytics\", path: \"/analytics\", icon: \"fas fa-brain\", label: \"Analytics IA\" },\n  { id: \"reports\", path: \"/reports\", icon: \"fas fa-chart-line\", label: \"Rapports\" },\n];\n\nexport default function Sidebar({ activeModule, setActiveModule }: SidebarProps) {\n  const [location] = useLocation();\n\n  const isActive = (path: string) => {\n    if (path === \"/\" && (location === \"/\" || location === \"/dashboard\")) return true;\n    return location === path;\n  };\n\n  return (\n    <div className=\"w-64 bg-white shadow-lg flex flex-col\" data-testid=\"sidebar\">\n      {/* Logo/Header */}\n      <div className=\"p-4 border-b border-gray-200\">\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"w-10 h-10 bg-ms-blue rounded-lg flex items-center justify-center\">\n            <i className=\"fas fa-boxes text-white text-lg\"></i>\n          </div>\n          <div>\n            <h1 className=\"text-lg font-semibold text-ms-gray-dark\">StockCéramique</h1>\n            <p className=\"text-xs text-ms-gray\">Gestion de Stock</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Navigation Menu */}\n      <nav className=\"flex-1 p-4 space-y-2\" data-testid=\"navigation-menu\">\n        {menuItems.map((item) => (\n          <Link\n            key={item.id}\n            href={item.path}\n            className={`sidebar-item px-3 py-2 rounded-lg cursor-pointer transition-smooth flex items-center space-x-3 ${\n              isActive(item.path) ? 'active' : ''\n            }`}\n            onClick={() => setActiveModule(item.id)}\n            data-testid={`nav-${item.id}`}\n          >\n            <i className={`${item.icon} w-5 ${isActive(item.path) ? 'text-white' : 'text-ms-gray'}`}></i>\n            <span className={`text-sm font-medium ${isActive(item.path) ? 'text-white' : 'text-ms-gray-dark'}`}>\n              {item.label}\n            </span>\n          </Link>\n        ))}\n        \n        <hr className=\"my-4 border-gray-200\" />\n        \n        {secondaryItems.map((item) => (\n          <Link\n            key={item.id}\n            href={item.path}\n            className={`sidebar-item px-3 py-2 rounded-lg cursor-pointer transition-smooth flex items-center space-x-3 ${\n              isActive(item.path) ? 'active' : ''\n            }`}\n            onClick={() => setActiveModule(item.id)}\n            data-testid={`nav-${item.id}`}\n          >\n            <i className={`${item.icon} w-5 ${isActive(item.path) ? 'text-white' : 'text-ms-gray'}`}></i>\n            <span className={`text-sm font-medium ${isActive(item.path) ? 'text-white' : 'text-ms-gray-dark'}`}>\n              {item.label}\n            </span>\n          </Link>\n        ))}\n      </nav>\n\n      {/* Footer */}\n      <div className=\"p-4 border-t border-gray-200\">\n        <div className=\"flex items-center space-x-2 text-xs text-ms-gray\">\n          <div className=\"w-2 h-2 bg-ms-green rounded-full\"></div>\n          <span>Mode Hors Ligne</span>\n        </div>\n        <div className=\"text-xs text-ms-gray mt-1\">Version 1.0.0</div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4089},"client/src/components/SupplierForm.tsx":{"content":"import { useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { insertSupplierSchema, type Supplier, type InsertSupplier } from \"@shared/schema\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface SupplierFormProps {\n  supplier?: Supplier | null;\n  onClose: () => void;\n}\n\nexport default function SupplierForm({ supplier, onClose }: SupplierFormProps) {\n  const { toast } = useToast();\n  const isEditing = !!supplier;\n\n  const form = useForm<InsertSupplier>({\n    resolver: zodResolver(insertSupplierSchema),\n    defaultValues: {\n      nom: supplier?.nom || \"\",\n      contact: supplier?.contact || \"\",\n      telephone: supplier?.telephone || \"\",\n      email: supplier?.email || \"\",\n      adresse: supplier?.adresse || \"\",\n      conditionsPaiement: supplier?.conditionsPaiement || \"\",\n      delaiLivraison: supplier?.delaiLivraison || null,\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: (data: InsertSupplier) => apiRequest(\"POST\", \"/api/suppliers\", data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/suppliers\"] });\n      toast({\n        title: \"Fournisseur créé\",\n        description: \"Le fournisseur a été créé avec succès\",\n      });\n      onClose();\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de créer le fournisseur\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: (data: Partial<Supplier>) => apiRequest(\"PUT\", `/api/suppliers/${supplier!.id}`, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/suppliers\"] });\n      toast({\n        title: \"Fournisseur modifié\",\n        description: \"Le fournisseur a été modifié avec succès\",\n      });\n      onClose();\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de modifier le fournisseur\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertSupplier) => {\n    if (isEditing) {\n      updateMutation.mutate(data);\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n\n  return (\n    <Dialog open={true} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\" data-testid=\"supplier-form-modal\">\n        <DialogHeader>\n          <DialogTitle>\n            {isEditing ? \"Modifier le Fournisseur\" : \"Nouveau Fournisseur\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <FormField\n              control={form.control}\n              name=\"nom\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Nom de l'entreprise *</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"Ex: CéramiTech SAS\" \n                      {...field} \n                      data-testid=\"input-nom\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"contact\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Personne de contact</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Nom du contact\" \n                        {...field} \n                        value={field.value || \"\"}\n                        data-testid=\"input-contact\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"telephone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Téléphone</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"0123456789\" \n                        {...field} \n                        value={field.value || \"\"}\n                        data-testid=\"input-telephone\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"email\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Email</FormLabel>\n                  <FormControl>\n                    <Input \n                      type=\"email\"\n                      placeholder=\"contact@entreprise.com\" \n                      {...field} \n                      value={field.value || \"\"}\n                      data-testid=\"input-email\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"adresse\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Adresse</FormLabel>\n                  <FormControl>\n                    <Textarea \n                      placeholder=\"Adresse complète\" \n                      {...field} \n                      value={field.value || \"\"}\n                      rows={3}\n                      data-testid=\"input-adresse\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"conditionsPaiement\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Conditions de paiement</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Ex: 30 jours net\" \n                        {...field} \n                        value={field.value || \"\"}\n                        data-testid=\"input-conditions-paiement\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"delaiLivraison\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Délai de livraison (jours)</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"number\" \n                        min=\"0\"\n                        placeholder=\"Ex: 7\" \n                        {...field} \n                        value={field.value || \"\"}\n                        onChange={e => field.onChange(e.target.value ? parseInt(e.target.value) : null)}\n                        data-testid=\"input-delai-livraison\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"flex justify-end space-x-4 pt-6 border-t border-gray-200\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={onClose}\n                data-testid=\"button-cancel\"\n              >\n                Annuler\n              </Button>\n              <Button \n                type=\"submit\" \n                className=\"btn-ms-blue\"\n                disabled={isPending}\n                data-testid=\"button-save\"\n              >\n                {isPending ? \"Enregistrement...\" : \"Enregistrer\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":8692},"client/src/components/TopBar.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { useLocalStorageBackup } from \"@/hooks/useLocalStorage\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface TopBarProps {\n  activeModule: string;\n}\n\nconst moduleLabels: Record<string, { title: string; description: string }> = {\n  dashboard: { title: \"Tableau de Bord\", description: \"Vue d'ensemble de votre stock\" },\n  articles: { title: \"Gestion des Articles\", description: \"Pièces de rechange céramiques\" },\n  suppliers: { title: \"Gestion des Fournisseurs\", description: \"Base de données fournisseurs\" },\n  requestors: { title: \"Gestion des Demandeurs\", description: \"Personnel et départements\" },\n  \"purchase-requests\": { title: \"Demandes d'Achat\", description: \"Suivi des demandes\" },\n  reception: { title: \"Réception de Marchandises\", description: \"Enregistrement des livraisons\" },\n  outbound: { title: \"Sortie de Stock\", description: \"Gestion des sorties\" },\n  reports: { title: \"Rapports et Analyses\", description: \"Statistiques et exports\" },\n};\n\nexport default function TopBar({ activeModule }: TopBarProps) {\n  const { exportData } = useLocalStorageBackup();\n  const { toast } = useToast();\n  const currentDate = new Date().toLocaleDateString('fr-FR', {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n\n  const handleBackup = () => {\n    try {\n      exportData();\n      toast({\n        title: \"Sauvegarde créée\",\n        description: \"Les données ont été exportées avec succès\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Erreur de sauvegarde\",\n        description: \"Impossible de créer la sauvegarde\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const moduleInfo = moduleLabels[activeModule] || { title: \"Module\", description: \"Description\" };\n\n  return (\n    <header className=\"bg-white shadow-sm border-b border-gray-200 px-6 py-4\" data-testid=\"top-bar\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-xl font-semibold text-ms-gray-dark\" data-testid=\"page-title\">\n            {moduleInfo.title}\n          </h2>\n          <p className=\"text-sm text-ms-gray\" data-testid=\"page-description\">\n            {moduleInfo.description}\n          </p>\n        </div>\n        <div className=\"flex items-center space-x-4\">\n          <Button \n            onClick={handleBackup}\n            className=\"btn-ms-blue flex items-center space-x-2\"\n            data-testid=\"button-backup\"\n          >\n            <i className=\"fas fa-download\"></i>\n            <span>Sauvegarde</span>\n          </Button>\n          <div className=\"text-sm text-ms-gray\" data-testid=\"current-date\">\n            <span>{currentDate}</span>\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n","size_bytes":2779},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useLocalStorage.ts":{"content":"import { useState, useEffect } from 'react';\n\nexport function useLocalStorage<T>(key: string, initialValue: T) {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(`Error reading localStorage key \"${key}\":`, error);\n      return initialValue;\n    }\n  });\n\n  const setValue = (value: T | ((val: T) => T)) => {\n    try {\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.error(`Error setting localStorage key \"${key}\":`, error);\n    }\n  };\n\n  return [storedValue, setValue] as const;\n}\n\nexport function useLocalStorageBackup() {\n  const exportData = () => {\n    const data = {\n      timestamp: new Date().toISOString(),\n      articles: localStorage.getItem('articles') || '[]',\n      suppliers: localStorage.getItem('suppliers') || '[]',\n      requestors: localStorage.getItem('requestors') || '[]',\n      purchaseRequests: localStorage.getItem('purchaseRequests') || '[]',\n      receptions: localStorage.getItem('receptions') || '[]',\n      outbounds: localStorage.getItem('outbounds') || '[]',\n      stockMovements: localStorage.getItem('stockMovements') || '[]',\n    };\n    \n    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `stock-backup-${new Date().toISOString().slice(0, 10)}.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  };\n\n  const importData = (file: File) => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        try {\n          const data = JSON.parse(e.target?.result as string);\n          \n          // Restore data to localStorage\n          Object.entries(data).forEach(([key, value]) => {\n            if (key !== 'timestamp' && typeof value === 'string') {\n              localStorage.setItem(key, value);\n            }\n          });\n          \n          resolve(data);\n        } catch (error) {\n          reject(error);\n        }\n      };\n      reader.onerror = () => reject(reader.error);\n      reader.readAsText(file);\n    });\n  };\n\n  return { exportData, importData };\n}\n","size_bytes":2557},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/Articles.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport ArticleForm from \"@/components/ArticleForm\";\nimport BarcodeGenerator from \"@/components/BarcodeGenerator\";\nimport BulkImportExport from \"@/components/BulkImportExport\";\nimport AdvancedSearch from \"@/components/AdvancedSearch\";\nimport InteractiveChart from \"@/components/InteractiveChart\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { generateStockReportPDF } from \"@/lib/pdfUtils\";\nimport type { Article } from \"@shared/schema\";\nimport { Upload, Download, Plus, BarChart3 } from \"lucide-react\";\n\ninterface SearchFilters {\n  query: string;\n  category: string;\n  stockLevel: string;\n  priceRange: string;\n  supplier: string;\n  status: string;\n}\n\nexport default function Articles() {\n  const [showForm, setShowForm] = useState(false);\n  const [editingArticle, setEditingArticle] = useState<Article | null>(null);\n  const [search, setSearch] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState(\"all\");\n  const [stockFilter, setStockFilter] = useState(\"all\");\n  const [selectedArticleForQR, setSelectedArticleForQR] = useState<Article | null>(null);\n  const [showImportExport, setShowImportExport] = useState(false);\n  const [showAnalytics, setShowAnalytics] = useState(false);\n  const [advancedFilters, setAdvancedFilters] = useState<SearchFilters>({\n    query: \"\",\n    category: \"\",\n    stockLevel: \"\",\n    priceRange: \"\",\n    supplier: \"\",\n    status: \"\"\n  });\n  const { toast } = useToast();\n\n  const { data: articles = [], isLoading } = useQuery<Article[]>({\n    queryKey: [\"/api/articles\"],\n  });\n\n  const { data: suppliers = [] } = useQuery<Array<{ id: string; nom: string }>>({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/articles/${id}`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Article supprimé\",\n        description: \"L'article a été supprimé avec succès\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de supprimer l'article\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const filteredArticles = useMemo(() => {\n    return articles.filter(article => {\n      // Text search with fuzzy matching\n      const searchTerm = advancedFilters.query || search;\n      const matchesSearch = !searchTerm || \n        article.designation.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        article.codeArticle.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        (article.marque?.toLowerCase().includes(searchTerm.toLowerCase())) ||\n        (article.reference?.toLowerCase().includes(searchTerm.toLowerCase())) ||\n        article.categorie.toLowerCase().includes(searchTerm.toLowerCase());\n      \n      // Advanced filters\n      const matchesCategory = !advancedFilters.category || advancedFilters.category === \"all\" || \n                             article.categorie === advancedFilters.category ||\n                             (!advancedFilters.category && (categoryFilter === \"all\" || article.categorie === categoryFilter));\n      \n      const stockActuel = Number(article.stockActuel) || 0;\n      const seuilMinimum = Number(article.seuilMinimum) || 10;\n      \n      const matchesStockLevel = !advancedFilters.stockLevel || advancedFilters.stockLevel === \"all\" || \n        (advancedFilters.stockLevel === \"critical\" && stockActuel <= seuilMinimum * 0.5) ||\n        (advancedFilters.stockLevel === \"low\" && stockActuel <= seuilMinimum && stockActuel > seuilMinimum * 0.5) ||\n        (advancedFilters.stockLevel === \"normal\" && stockActuel > seuilMinimum && stockActuel <= seuilMinimum * 2) ||\n        (advancedFilters.stockLevel === \"high\" && stockActuel > seuilMinimum * 2) ||\n        (!advancedFilters.stockLevel && (\n          stockFilter === \"all\" || \n          (stockFilter === \"low\" && article.stockActuel < (article.seuilMinimum || 10)) ||\n          (stockFilter === \"normal\" && article.stockActuel >= (article.seuilMinimum || 10))\n        ));\n\n      const matchesPrice = !advancedFilters.priceRange || advancedFilters.priceRange === \"all\" || \n        (advancedFilters.priceRange === \"0-10\" && (article.prixUnitaire || 0) <= 10) ||\n        (advancedFilters.priceRange === \"10-50\" && (article.prixUnitaire || 0) > 10 && (article.prixUnitaire || 0) <= 50) ||\n        (advancedFilters.priceRange === \"50-100\" && (article.prixUnitaire || 0) > 50 && (article.prixUnitaire || 0) <= 100) ||\n        (advancedFilters.priceRange === \"100-500\" && (article.prixUnitaire || 0) > 100 && (article.prixUnitaire || 0) <= 500) ||\n        (advancedFilters.priceRange === \"500+\" && (article.prixUnitaire || 0) > 500);\n\n      const matchesSupplier = !advancedFilters.supplier || advancedFilters.supplier === \"all\" || \n                             article.fournisseurId === advancedFilters.supplier;\n      \n      return matchesSearch && matchesCategory && matchesStockLevel && matchesPrice && matchesSupplier;\n    });\n  }, [articles, search, categoryFilter, stockFilter, advancedFilters]);\n\n  // Analytics data for charts\n  const analyticsData = useMemo(() => {\n    const categoryData = filteredArticles.reduce((acc: any, article) => {\n      const cat = article.categorie || 'Non catégorisé';\n      if (!acc[cat]) {\n        acc[cat] = { category: cat, count: 0, value: 0, stock: 0 };\n      }\n      acc[cat].count++;\n      acc[cat].value += Number(article.prixUnitaire || 0) * article.stockActuel;\n      acc[cat].stock += article.stockActuel;\n      return acc;\n    }, {});\n\n    const stockLevelData = filteredArticles.reduce((acc: any, article) => {\n      const seuil = article.seuilMinimum || 10;\n      let level = 'Normal';\n      if (article.stockActuel <= seuil * 0.5) level = 'Critique';\n      else if (article.stockActuel <= seuil) level = 'Bas';\n      else if (article.stockActuel > seuil * 2) level = 'Élevé';\n      \n      if (!acc[level]) acc[level] = { level, count: 0 };\n      acc[level].count++;\n      return acc;\n    }, {});\n\n    return {\n      categoryChart: Object.values(categoryData),\n      stockLevelChart: Object.values(stockLevelData)\n    };\n  }, [filteredArticles]);\n\n  const categories = Array.from(new Set(articles.map(a => a.categorie)));\n\n  const handleEdit = (article: Article) => {\n    setEditingArticle(article);\n    setShowForm(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (window.confirm(\"Êtes-vous sûr de vouloir supprimer cet article ?\")) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const handleCloseForm = () => {\n    setShowForm(false);\n    setEditingArticle(null);\n  };\n\n  const getStockStatus = (article: Article) => {\n    if (article.stockActuel <= (article.seuilMinimum || 10)) {\n      return { color: \"text-ms-red\", icon: \"fas fa-exclamation-triangle\" };\n    }\n    return { color: \"text-ms-green\", icon: \"fas fa-check-circle\" };\n  };\n\n  const getSupplierName = (supplierId: string | null) => {\n    if (!supplierId) return \"Non défini\";\n    const supplier = suppliers.find((s: any) => s.id === supplierId);\n    return supplier?.nom || \"Inconnu\";\n  };\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"animate-pulse space-y-4\">\n            {[...Array(5)].map((_, i) => (\n              <div key={i} className=\"h-12 bg-gray-200 rounded\"></div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (showImportExport) {\n    return <BulkImportExport entityType=\"articles\" onClose={() => setShowImportExport(false)} />;\n  }\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"articles-page\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold text-gray-900\">Gestion des Articles</h1>\n          <p className=\"text-sm text-gray-600\">\n            {filteredArticles.length} article(s) sur {articles.length} total\n          </p>\n        </div>\n        <div className=\"flex space-x-3\">\n          <Button \n            onClick={() => setShowAnalytics(!showAnalytics)}\n            variant={showAnalytics ? \"default\" : \"outline\"}\n            className=\"flex items-center space-x-2\"\n          >\n            <BarChart3 className=\"w-4 h-4\" />\n            <span>Analytics</span>\n          </Button>\n          <Button \n            onClick={() => setShowImportExport(true)}\n            variant=\"outline\"\n            className=\"flex items-center space-x-2\"\n          >\n            <Upload className=\"w-4 h-4\" />\n            <span>Import/Export</span>\n          </Button>\n          <Button onClick={() => setShowForm(true)}>\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Nouvel Article\n          </Button>\n        </div>\n      </div>\n\n      {/* Advanced Search */}\n      <AdvancedSearch\n        onFiltersChange={setAdvancedFilters}\n        categories={categories}\n        suppliers={suppliers as Array<{ id: string; nom: string }>}\n        showAnalytics={true}\n      />\n\n      {/* Analytics Section */}\n      {showAnalytics && (\n        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n          <InteractiveChart\n            data={analyticsData.categoryChart as any[]}\n            title=\"Articles par Catégorie\"\n            description=\"Répartition des articles et leur valeur\"\n            xAxisKey=\"category\"\n            yAxisKey=\"count\"\n            defaultType=\"bar\"\n            colors={['#3B82F6', '#10B981', '#F59E0B', '#EF4444']}\n            enableDrillDown={true}\n            showAnalytics={true}\n          />\n          \n          <InteractiveChart\n            data={analyticsData.stockLevelChart as any[]}\n            title=\"Niveaux de Stock\"\n            description=\"Distribution des niveaux de stock\"\n            xAxisKey=\"level\"\n            yAxisKey=\"count\"\n            defaultType=\"pie\"\n            colors={['#EF4444', '#F59E0B', '#10B981', '#3B82F6']}\n            showAnalytics={true}\n          />\n        </div>\n      )}\n\n      <Card>\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-xl font-semibold text-gray-900\">Liste des Articles</h3>\n            <div className=\"flex space-x-3\">\n              <Button \n                onClick={() => setShowImportExport(true)}\n                variant=\"outline\"\n                className=\"flex items-center space-x-2\"\n                data-testid=\"button-import-export\"\n              >\n                <Upload className=\"w-4 h-4\" />\n                <span>Import/Export</span>\n              </Button>\n              <Button \n                onClick={() => generateStockReportPDF(filteredArticles, 'Rapport Articles')}\n                variant=\"outline\"\n                className=\"flex items-center space-x-2\"\n                data-testid=\"button-export-pdf\"\n              >\n                <Download className=\"w-4 h-4\" />\n                <span>Export PDF</span>\n              </Button>\n              <Button \n                onClick={() => setShowForm(true)}\n                className=\"btn-ms-blue flex items-center space-x-2\"\n                data-testid=\"button-add-article\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                <span>Nouvel Article</span>\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Search and Filters */}\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Rechercher</label>\n              <Input \n                type=\"text\" \n                placeholder=\"Code, désignation...\" \n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n                data-testid=\"input-search\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Catégorie</label>\n              <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n                <SelectTrigger data-testid=\"select-category\">\n                  <SelectValue placeholder=\"Toutes les catégories\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Toutes les catégories</SelectItem>\n                  {categories.map(category => (\n                    <SelectItem key={category} value={category}>{category}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Stock</label>\n              <Select value={stockFilter} onValueChange={setStockFilter}>\n                <SelectTrigger data-testid=\"select-stock\">\n                  <SelectValue placeholder=\"Tous\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Tous</SelectItem>\n                  <SelectItem value=\"low\">Stock bas</SelectItem>\n                  <SelectItem value=\"normal\">Stock normal</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Actions</label>\n              <Button \n                variant=\"outline\" \n                className=\"w-full\"\n                onClick={() => {\n                  setSearch(\"\");\n                  setCategoryFilter(\"all\");\n                  setStockFilter(\"all\");\n                }}\n                data-testid=\"button-clear-filters\"\n              >\n                Effacer filtres\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Articles Table */}\n        <CardContent className=\"p-0\">\n          {filteredArticles.length > 0 ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-ms-gray-light\">\n                  <tr>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Code Article</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Désignation</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Catégorie</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Stock</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Prix Unitaire</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Fournisseur</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredArticles.map((article) => {\n                    const stockStatus = getStockStatus(article);\n                    return (\n                      <tr key={article.id} className=\"border-b border-gray-100 hover:bg-gray-50\">\n                        <td className=\"p-4 text-sm font-medium text-ms-gray-dark\">{article.codeArticle}</td>\n                        <td className=\"p-4 text-sm text-ms-gray-dark\">{article.designation}</td>\n                        <td className=\"p-4 text-sm text-ms-gray\">{article.categorie}</td>\n                        <td className=\"p-4 text-sm\">\n                          <div className=\"flex items-center space-x-2\">\n                            <i className={`${stockStatus.icon} ${stockStatus.color}`}></i>\n                            <span className={`font-medium ${stockStatus.color}`}>\n                              {article.stockActuel} {article.unite}\n                            </span>\n                          </div>\n                        </td>\n                        <td className=\"p-4 text-sm text-ms-gray\">{article.prixUnitaire ? `€${article.prixUnitaire}` : '-'}</td>\n                        <td className=\"p-4 text-sm text-ms-gray\">{getSupplierName(article.fournisseurId)}</td>\n                        <td className=\"p-4\">\n                          <div className=\"flex space-x-1\">\n                            <Button \n                              size=\"sm\" \n                              variant=\"ghost\"\n                              onClick={() => setSelectedArticleForQR(article)}\n                              title=\"Générer QR Code\"\n                              data-testid={`button-qr-${article.id}`}\n                            >\n                              <i className=\"fas fa-qrcode text-ms-green\"></i>\n                            </Button>\n                            <Button \n                              size=\"sm\" \n                              variant=\"ghost\"\n                              onClick={() => handleEdit(article)}\n                              title=\"Modifier\"\n                              data-testid={`button-edit-${article.id}`}\n                            >\n                              <i className=\"fas fa-edit text-ms-blue\"></i>\n                            </Button>\n                            <Button \n                              size=\"sm\" \n                              variant=\"ghost\"\n                              onClick={() => handleDelete(article.id)}\n                              title=\"Supprimer\"\n                              data-testid={`button-delete-${article.id}`}\n                            >\n                              <i className=\"fas fa-trash text-ms-red\"></i>\n                            </Button>\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"p-8 text-center text-ms-gray\" data-testid=\"empty-state\">\n              <i className=\"fas fa-boxes text-4xl mb-4\"></i>\n              <p className=\"text-lg font-medium\">Aucun article trouvé</p>\n              <p className=\"text-sm\">Commencez par ajouter votre premier article</p>\n              <Button \n                onClick={() => setShowForm(true)}\n                className=\"btn-ms-blue mt-4\"\n                data-testid=\"button-add-first-article\"\n              >\n                Ajouter un article\n              </Button>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {showForm && (\n        <ArticleForm \n          article={editingArticle}\n          onClose={handleCloseForm}\n        />\n      )}\n\n      {selectedArticleForQR && (\n        <BarcodeGenerator \n          article={selectedArticleForQR}\n          isOpen={!!selectedArticleForQR}\n          onClose={() => setSelectedArticleForQR(null)}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":19364},"client/src/pages/Dashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { WindowsCard, WindowsCardContent } from \"@/components/WindowsCard\";\nimport { WindowsButton } from \"@/components/WindowsButton\";\nimport { Link } from \"wouter\";\nimport { Package, AlertTriangle, ShoppingCart, TrendingUp, Truck, Plus, FileText, Brain, Activity } from \"lucide-react\";\nimport SimpleChart from \"@/components/SimpleChart\";\nimport PredictiveAnalytics from \"@/components/PredictiveAnalytics\";\n\n\ninterface DashboardStats {\n  totalArticles: number;\n  lowStock: number;\n  pendingRequests: number;\n  stockValue: number;\n}\n\nexport default function Dashboard() {\n  const { data: stats, isLoading } = useQuery<DashboardStats>({\n    queryKey: [\"/api/dashboard/stats\"],\n  });\n\n  const { data: lowStockArticles = [] } = useQuery({\n    queryKey: [\"/api/articles/low-stock\"],\n  });\n\n  const { data: stockEvolution = [] } = useQuery({\n    queryKey: [\"/api/dashboard/stock-evolution\"],\n  });\n\n  const { data: purchaseStatus = [] } = useQuery({\n    queryKey: [\"/api/dashboard/purchase-status\"],\n  });\n\n  const { data: categoryDistribution = [] } = useQuery({\n    queryKey: [\"/api/dashboard/category-distribution\"],\n  });\n\n  const { data: recentMovements = [] } = useQuery({\n    queryKey: [\"/api/dashboard/recent-movements\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div>\n        <div className=\"bg-white border-b border-gray-200 px-6 py-4 mb-6\">\n          <h1 className=\"text-2xl font-semibold text-gray-900 mb-1\">Tableau de Bord</h1>\n          <p className=\"text-sm text-gray-600\">Vue d'ensemble de votre système de gestion de stock</p>\n        </div>\n        <div className=\"px-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8\">\n            {[...Array(4)].map((_, i) => (\n              <div key={i} className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-100 animate-pulse\">\n                <div className=\"h-20 bg-gray-200 rounded\"></div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const formatCurrency = (value: number) => {\n    return new Intl.NumberFormat('fr-FR', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(value);\n  };\n\n  return (\n    <div>\n      {/* Page Header */}\n      <div className=\"bg-white border-b border-gray-200 px-6 py-4 mb-6\">\n        <h1 className=\"text-2xl font-semibold text-gray-900 mb-1\">Tableau de Bord</h1>\n        <p className=\"text-sm text-gray-600\">Vue d'ensemble de votre système de gestion de stock</p>\n      </div>\n\n      <div className=\"px-6\">\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8\">\n          <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600 mb-1\">Total Articles</p>\n                <p className=\"text-3xl font-bold text-gray-900\">{stats?.totalArticles || 0}</p>\n                <p className=\"text-sm text-blue-600 mt-1\">Articles référencés</p>\n              </div>\n              <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                <Package className=\"w-6 h-6 text-blue-600\" />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600 mb-1\">Stock Bas</p>\n                <p className=\"text-3xl font-bold text-gray-900\">{stats?.lowStock || 0}</p>\n                <p className=\"text-sm text-red-600 mt-1\">Attention requise</p>\n              </div>\n              <div className=\"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center\">\n                <AlertTriangle className=\"w-6 h-6 text-red-600\" />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600 mb-1\">Demandes en Cours</p>\n                <p className=\"text-3xl font-bold text-gray-900\">{stats?.pendingRequests || 0}</p>\n                <p className=\"text-sm text-yellow-600 mt-1\">{stats?.pendingRequests || 0} en attente</p>\n              </div>\n              <div className=\"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center\">\n                <ShoppingCart className=\"w-6 h-6 text-yellow-600\" />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600 mb-1\">Valeur Stock</p>\n                <p className=\"text-3xl font-bold text-gray-900\">{formatCurrency(stats?.stockValue || 0)}</p>\n                <p className=\"text-sm text-green-600 mt-1\">Inventaire total</p>\n              </div>\n              <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n                <TrendingUp className=\"w-6 h-6 text-green-600\" />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Charts Section with Mica Effects */}\n        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6 mb-8\">\n          {/* Stock Evolution Chart - Mica Container */}\n          <div className=\"relative rounded-xl overflow-hidden mica-container\">\n            <div className=\"absolute inset-0 bg-white/90 backdrop-blur-lg border border-white/20\" \n                 style={{ \n                   boxShadow: '0 8px 32px rgba(0, 0, 0, 0.1)',\n                   background: 'rgba(255, 255, 255, 0.9)',\n                   backdropFilter: 'blur(20px) saturate(180%)'\n                 }}>\n            </div>\n            <div className=\"relative z-10 p-6\">\n              <div className=\"mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">Évolution du Stock</h3>\n                <p className=\"text-sm text-gray-600\">Depuis les 4 derniers mois</p>\n              </div>\n              <div className=\"h-64\">\n                {stockEvolution.length > 0 ? (\n                  <SimpleChart\n                    data={stockEvolution}\n                    type=\"line\"\n                    xAxisKey=\"month\"\n                    yAxisKey=\"stock\"\n                  />\n                ) : (\n                  <div className=\"flex items-center justify-center h-full text-gray-500\">\n                    <div className=\"text-center\">\n                      <Package className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                      <p className=\"text-sm\">Aucune donnée d'évolution disponible</p>\n                      <p className=\"text-xs text-gray-400 mt-1\">Les données apparaîtront après vos premiers mouvements de stock</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Purchase Status Bar Chart - Mica Container */}\n          <div className=\"relative rounded-xl overflow-hidden mica-container\">\n            <div className=\"absolute inset-0 bg-white/90 backdrop-blur-lg border border-white/20\" \n                 style={{ \n                   boxShadow: '0 8px 32px rgba(0, 0, 0, 0.1)',\n                   background: 'rgba(255, 255, 255, 0.9)',\n                   backdropFilter: 'blur(20px) saturate(180%)'\n                 }}>\n            </div>\n            <div className=\"relative z-10 p-6\">\n              <div className=\"mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">Statut des Demandes</h3>\n                <p className=\"text-sm text-gray-600\">Répartition des statuts d'achat</p>\n              </div>\n              <div className=\"h-64\">\n                {purchaseStatus.length > 0 ? (\n                  <SimpleChart\n                    data={purchaseStatus.map(item => ({ ...item, fill: item.color }))}\n                    type=\"bar\"\n                    xAxisKey=\"status\"\n                    yAxisKey=\"count\"\n                  />\n                ) : (\n                  <div className=\"flex items-center justify-center h-full text-gray-500\">\n                    <div className=\"text-center\">\n                      <ShoppingCart className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                      <p className=\"text-sm\">Aucune demande d'achat enregistrée</p>\n                      <p className=\"text-xs text-gray-400 mt-1\">Les statistiques apparaîtront après création de demandes</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Prediction Chart - Full Width Mica Container */}\n        <div className=\"mb-8\">\n          <div className=\"relative rounded-xl overflow-hidden mica-container\">\n            <div className=\"absolute inset-0 bg-white/90 backdrop-blur-lg border border-white/20\" \n                 style={{ \n                   boxShadow: '0 8px 32px rgba(0, 0, 0, 0.1)',\n                   background: 'rgba(255, 255, 255, 0.9)',\n                   backdropFilter: 'blur(20px) saturate(180%)'\n                 }}>\n            </div>\n            <div className=\"relative z-10 p-6\">\n              <div className=\"mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">Activité Récente</h3>\n                <p className=\"text-sm text-gray-600\">Derniers mouvements de stock</p>\n              </div>\n              <div className=\"h-64\">\n                {recentMovements.length > 0 ? (\n                  <div className=\"space-y-3\">\n                    <h4 className=\"font-medium text-gray-700 mb-3\">Mouvements Récents</h4>\n                    {recentMovements.slice(0, 5).map((movement, index) => (\n                      <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                        <div className=\"flex items-center space-x-3\">\n                          {movement.type === 'Entrée' ? \n                            <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center\">\n                              <TrendingUp className=\"w-4 h-4 text-green-600\" />\n                            </div> :\n                            <div className=\"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center\">\n                              <Package className=\"w-4 h-4 text-red-600\" />\n                            </div>\n                          }\n                          <div>\n                            <p className=\"text-sm font-medium text-gray-900\">{movement.type}</p>\n                            <p className=\"text-xs text-gray-500\">{movement.article}</p>\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"text-sm font-medium text-gray-900\">{movement.quantity}</p>\n                          <p className=\"text-xs text-gray-500\">{movement.date}</p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"flex items-center justify-center h-full text-gray-500\">\n                    <div className=\"text-center\">\n                      <Activity className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                      <p className=\"text-sm\">Aucun mouvement récent</p>\n                      <p className=\"text-xs text-gray-400 mt-1\">Les mouvements apparaîtront après vos premières transactions</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Recent Activity & Quick Actions */}\n        <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-4 mb-8\">\n          {/* Quick Actions */}\n          <div>\n            <WindowsCard hoverable={false}>\n              <div className=\"p-6 border-b border-gray-100\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Actions Rapides</h3>\n              </div>\n              <WindowsCardContent className=\"p-6 space-y-3\">\n                <Link href=\"/articles\">\n                  <WindowsButton \n                    variant=\"outline\" \n                    className=\"w-full justify-start p-4 h-auto\"\n                    data-testid=\"quick-action-articles\"\n                  >\n                    <div className=\"flex items-center\">\n                      <div className=\"w-8 h-8 bg-blue-50 rounded-sm flex items-center justify-center mr-3\">\n                        <Plus className=\"w-4 h-4 text-blue-600\" />\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-gray-900\">Ajouter Article</p>\n                        <p className=\"text-xs text-gray-600\">Nouveau produit</p>\n                      </div>\n                    </div>\n                  </WindowsButton>\n                </Link>\n\n                <Link href=\"/purchase-requests\">\n                  <WindowsButton \n                    variant=\"outline\" \n                    className=\"w-full justify-start p-4 h-auto\"\n                    data-testid=\"quick-action-purchase-request\"\n                  >\n                    <div className=\"flex items-center\">\n                      <div className=\"w-8 h-8 bg-amber-50 rounded-sm flex items-center justify-center mr-3\">\n                        <ShoppingCart className=\"w-4 h-4 text-yellow-600\" />\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-gray-900\">Demande Achat</p>\n                        <p className=\"text-xs text-gray-600\">Nouvelle demande</p>\n                      </div>\n                    </div>\n                  </WindowsButton>\n                </Link>\n\n                <Link href=\"/reception\">\n                  <WindowsButton \n                    variant=\"outline\" \n                    className=\"w-full justify-start p-4 h-auto\"\n                    data-testid=\"quick-action-reception\"\n                  >\n                    <div className=\"flex items-center\">\n                      <div className=\"w-8 h-8 bg-green-50 rounded-sm flex items-center justify-center mr-3\">\n                        <Truck className=\"w-4 h-4 text-green-600\" />\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-gray-900\">Réception</p>\n                        <p className=\"text-xs text-gray-600\">Enregistrer livraison</p>\n                      </div>\n                    </div>\n                  </WindowsButton>\n                </Link>\n\n                <Link href=\"/reports\">\n                  <WindowsButton \n                    variant=\"outline\" \n                    className=\"w-full justify-start p-4 h-auto\"\n                    data-testid=\"quick-action-export\"\n                  >\n                    <div className=\"flex items-center\">\n                      <div className=\"w-8 h-8 bg-purple-50 rounded-sm flex items-center justify-center mr-3\">\n                        <FileText className=\"w-4 h-4 text-purple-600\" />\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-gray-900\">Rapports</p>\n                        <p className=\"text-xs text-gray-600\">Export données</p>\n                      </div>\n                    </div>\n                  </WindowsButton>\n                </Link>\n              </WindowsCardContent>\n            </WindowsCard>\n          </div>\n\n          {/* Stock Alerts */}\n          <div className=\"xl:col-span-2\">\n            <WindowsCard hoverable={false}>\n              <div className=\"p-6 border-b border-gray-100\">\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Alertes Stock Bas</h3>\n                  {stats?.lowStock && stats.lowStock > 0 && (\n                    <span className=\"bg-red-600 text-white text-xs px-2 py-1 rounded-sm\">\n                      {stats.lowStock} articles\n                    </span>\n                  )}\n                </div>\n              </div>\n              <WindowsCardContent className=\"p-0\">\n                <div className=\"text-center py-12\">\n                  <div className=\"w-16 h-16 bg-green-50 rounded-sm mx-auto mb-4 flex items-center justify-center\">\n                    <TrendingUp className=\"w-8 h-8 text-green-600\" />\n                  </div>\n                  <h4 className=\"text-lg font-medium text-gray-900 mb-2\">Aucune alerte stock</h4>\n                  <p className=\"text-gray-600\">Tous vos articles sont en stock suffisant</p>\n                </div>\n              </WindowsCardContent>\n            </WindowsCard>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":17052},"client/src/pages/Outbound.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport OutboundForm from \"@/components/OutboundForm\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Outbound } from \"@shared/schema\";\n\nexport default function OutboundPage() {\n  const [showForm, setShowForm] = useState(false);\n  const [editingOutbound, setEditingOutbound] = useState<Outbound | null>(null);\n  const [search, setSearch] = useState(\"\");\n  const { toast } = useToast();\n\n  const { data: outbounds = [], isLoading } = useQuery<Outbound[]>({\n    queryKey: [\"/api/outbounds\"],\n  });\n\n  const { data: articles = [] } = useQuery({\n    queryKey: [\"/api/articles\"],\n  });\n\n  const { data: requestors = [] } = useQuery({\n    queryKey: [\"/api/requestors\"],\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/outbounds/${id}`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/outbounds\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Sortie supprimée\",\n        description: \"La sortie de stock a été supprimée avec succès\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de supprimer la sortie\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const filteredOutbounds = outbounds.filter(outbound => {\n    const article = articles.find((a: any) => a.id === outbound.articleId);\n    const requestor = requestors.find((r: any) => r.id === outbound.requestorId);\n    \n    return !search || \n      (article && (article.codeArticle.toLowerCase().includes(search.toLowerCase()) ||\n                   article.designation.toLowerCase().includes(search.toLowerCase()))) ||\n      (requestor && `${requestor.prenom} ${requestor.nom}`.toLowerCase().includes(search.toLowerCase())) ||\n      outbound.motifSortie.toLowerCase().includes(search.toLowerCase());\n  });\n\n  const getArticleName = (articleId: string) => {\n    const article = articles.find((a: any) => a.id === articleId);\n    return article ? `${article.codeArticle} - ${article.designation}` : \"Article inconnu\";\n  };\n\n  const getRequestorName = (requestorId: string) => {\n    const requestor = requestors.find((r: any) => r.id === requestorId);\n    return requestor ? `${requestor.prenom} ${requestor.nom}` : \"Demandeur inconnu\";\n  };\n\n  const handleEdit = (outbound: Outbound) => {\n    setEditingOutbound(outbound);\n    setShowForm(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (window.confirm(\"Êtes-vous sûr de vouloir supprimer cette sortie ?\")) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const handleCloseForm = () => {\n    setShowForm(false);\n    setEditingOutbound(null);\n  };\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"animate-pulse space-y-4\">\n            {[...Array(5)].map((_, i) => (\n              <div key={i} className=\"h-12 bg-gray-200 rounded\"></div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"outbound-page\">\n      <Card>\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-xl font-semibold text-ms-gray-dark\">Sortie de Stock</h3>\n            <Button \n              onClick={() => setShowForm(true)}\n              className=\"btn-ms-blue flex items-center space-x-2\"\n              data-testid=\"button-add-outbound\"\n            >\n              <i className=\"fas fa-plus\"></i>\n              <span>Nouvelle Sortie</span>\n            </Button>\n          </div>\n        </div>\n\n        {/* Search */}\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"max-w-md\">\n            <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Rechercher</label>\n            <Input \n              type=\"text\" \n              placeholder=\"Article, demandeur, motif...\" \n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              data-testid=\"input-search\"\n            />\n          </div>\n        </div>\n\n        {/* Outbounds Table */}\n        <CardContent className=\"p-0\">\n          {filteredOutbounds.length > 0 ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-ms-gray-light\">\n                  <tr>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Date Sortie</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Demandeur</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Article</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Quantité</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Motif</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Observations</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredOutbounds.map((outbound) => (\n                    <tr key={outbound.id} className=\"border-b border-gray-100 hover:bg-gray-50\">\n                      <td className=\"p-4 text-sm text-ms-gray-dark\">\n                        {new Date(outbound.dateSortie).toLocaleDateString('fr-FR')}\n                      </td>\n                      <td className=\"p-4 text-sm text-ms-gray-dark\">{getRequestorName(outbound.requestorId)}</td>\n                      <td className=\"p-4 text-sm text-ms-gray-dark\">{getArticleName(outbound.articleId)}</td>\n                      <td className=\"p-4 text-sm font-medium text-ms-gray-dark\">{outbound.quantiteSortie}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">{outbound.motifSortie}</td>\n                      <td className=\"p-4 text-sm text-ms-gray max-w-xs truncate\" title={outbound.observations || \"\"}>\n                        {outbound.observations || '-'}\n                      </td>\n                      <td className=\"p-4\">\n                        <div className=\"flex space-x-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleEdit(outbound)}\n                            data-testid={`button-edit-${outbound.id}`}\n                          >\n                            <i className=\"fas fa-edit text-ms-blue\"></i>\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleDelete(outbound.id)}\n                            data-testid={`button-delete-${outbound.id}`}\n                          >\n                            <i className=\"fas fa-trash text-ms-red\"></i>\n                          </Button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"p-8 text-center text-ms-gray\" data-testid=\"empty-state\">\n              <i className=\"fas fa-sign-out-alt text-4xl mb-4\"></i>\n              <p className=\"text-lg font-medium\">Aucune sortie trouvée</p>\n              <p className=\"text-sm\">Commencez par enregistrer une nouvelle sortie de stock</p>\n              <Button \n                onClick={() => setShowForm(true)}\n                className=\"btn-ms-blue mt-4\"\n                data-testid=\"button-add-first-outbound\"\n              >\n                Nouvelle sortie\n              </Button>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {showForm && (\n        <OutboundForm \n          outbound={editingOutbound}\n          onClose={handleCloseForm}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":8480},"client/src/pages/PurchaseRequests.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport PurchaseRequestForm from \"@/components/PurchaseRequestForm\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { generatePurchaseRequestPDF } from \"@/lib/pdfUtils\";\nimport { ConvertToReceptionDialog } from \"@/components/ConvertToReceptionDialog\";\nimport type { PurchaseRequest } from \"@shared/schema\";\n\nexport default function PurchaseRequests() {\n  const [showForm, setShowForm] = useState(false);\n  const [editingRequest, setEditingRequest] = useState<PurchaseRequest | null>(null);\n  const [search, setSearch] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const { toast } = useToast();\n\n  const { data: purchaseRequests = [], isLoading } = useQuery<PurchaseRequest[]>({\n    queryKey: [\"/api/purchase-requests\"],\n  });\n\n  const { data: articles = [] } = useQuery<any[]>({\n    queryKey: [\"/api/articles\"],\n  });\n\n  const { data: requestors = [] } = useQuery<any[]>({\n    queryKey: [\"/api/requestors\"],\n  });\n\n  const { data: suppliers = [] } = useQuery<any[]>({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  const updateStatusMutation = useMutation({\n    mutationFn: ({ id, statut }: { id: string; statut: string }) => \n      apiRequest(\"PUT\", `/api/purchase-requests/${id}`, { statut }),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/purchase-requests\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Statut mis à jour\",\n        description: \"Le statut de la demande a été mis à jour\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de mettre à jour le statut\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/purchase-requests/${id}`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/purchase-requests\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Demande supprimée\",\n        description: \"La demande d'achat a été supprimée avec succès\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de supprimer la demande\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const filteredRequests = purchaseRequests.filter(request => {\n    const article = articles.find((a: any) => a.id === request.articleId);\n    const requestor = requestors.find((r: any) => r.id === request.requestorId);\n    \n    const matchesSearch = !search || \n      (article && article.designation.toLowerCase().includes(search.toLowerCase())) ||\n      (requestor && `${requestor.prenom} ${requestor.nom}`.toLowerCase().includes(search.toLowerCase()));\n    \n    const matchesStatus = statusFilter === \"all\" || request.statut === statusFilter;\n    \n    return matchesSearch && matchesStatus;\n  });\n\n  const getArticleName = (articleId: string) => {\n    const article = articles.find((a: any) => a.id === articleId);\n    return article ? `${article.codeArticle} - ${article.designation}` : \"Article inconnu\";\n  };\n\n  const getRequestorName = (requestorId: string) => {\n    const requestor = requestors.find((r: any) => r.id === requestorId);\n    return requestor ? `${requestor.prenom} ${requestor.nom}` : \"Demandeur inconnu\";\n  };\n\n  const getSupplierName = (supplierId: string | null) => {\n    if (!supplierId) return \"-\";\n    const supplier = suppliers.find((s: any) => s.id === supplierId);\n    return supplier?.nom || \"Fournisseur inconnu\";\n  };\n\n  const getStatusText = (statut: string) => {\n    const statusConfig = {\n      en_attente: { color: \"text-yellow-600 dark:text-yellow-400\", label: \"En attente\" },\n      approuve: { color: \"text-green-600 dark:text-green-400\", label: \"Approuvé\" },\n      refuse: { color: \"text-red-600 dark:text-red-400\", label: \"Refusé\" },\n      commande: { color: \"text-blue-600 dark:text-blue-400\", label: \"Commandé\" },\n    };\n    \n    const config = statusConfig[statut as keyof typeof statusConfig] || statusConfig.en_attente;\n    return (\n      <span className={`font-semibold ${config.color}`} data-testid={`status-${statut}`}>\n        {config.label}\n      </span>\n    );\n  };\n\n  const handleEdit = (request: PurchaseRequest) => {\n    setEditingRequest(request);\n    setShowForm(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (window.confirm(\"Êtes-vous sûr de vouloir supprimer cette demande ?\")) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const handleStatusChange = (id: string, newStatus: string) => {\n    updateStatusMutation.mutate({ id, statut: newStatus });\n  };\n\n  const handleCloseForm = () => {\n    setShowForm(false);\n    setEditingRequest(null);\n  };\n\n  const handleExportPDF = (request: PurchaseRequest) => {\n    const article = articles?.find((a: any) => a.id === request.articleId);\n    const requestor = requestors?.find((r: any) => r.id === request.requestorId);\n    const supplier = article?.fournisseurId ? suppliers?.find((s: any) => s.id === article.fournisseurId) : null;\n    \n    if (article && requestor) {\n      generatePurchaseRequestPDF(request, article, requestor, supplier);\n    } else {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible d'exporter la demande. Données manquantes.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"animate-pulse space-y-4\">\n            {[...Array(5)].map((_, i) => (\n              <div key={i} className=\"h-12 bg-gray-200 rounded\"></div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"purchase-requests-page\">\n      <Card>\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-xl font-semibold text-ms-gray-dark\">Demandes d'Achat</h3>\n            <Button \n              onClick={() => setShowForm(true)}\n              className=\"btn-ms-blue flex items-center space-x-2\"\n              data-testid=\"button-add-request\"\n            >\n              <i className=\"fas fa-plus\"></i>\n              <span>Nouvelle Demande</span>\n            </Button>\n          </div>\n        </div>\n\n        {/* Search and Filters */}\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Rechercher</label>\n              <Input \n                type=\"text\" \n                placeholder=\"Article, demandeur...\" \n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n                data-testid=\"input-search\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Statut</label>\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\n                <SelectTrigger data-testid=\"select-status\">\n                  <SelectValue placeholder=\"Tous les statuts\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Tous les statuts</SelectItem>\n                  <SelectItem value=\"en_attente\">En attente</SelectItem>\n                  <SelectItem value=\"approuve\">Approuvé</SelectItem>\n                  <SelectItem value=\"refuse\">Refusé</SelectItem>\n                  <SelectItem value=\"commande\">Commandé</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Actions</label>\n              <Button \n                variant=\"outline\" \n                className=\"w-full\"\n                onClick={() => {\n                  setSearch(\"\");\n                  setStatusFilter(\"all\");\n                }}\n                data-testid=\"button-clear-filters\"\n              >\n                Effacer filtres\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Requests Table */}\n        <CardContent className=\"p-0\">\n          {filteredRequests.length > 0 ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-ms-gray-light\">\n                  <tr>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Date Demande</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Demandeur</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Article</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Quantité</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Statut</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Fournisseur</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredRequests.map((request) => (\n                    <tr key={request.id} className=\"border-b border-gray-100 hover:bg-gray-50\">\n                      <td className=\"p-4 text-sm text-ms-gray-dark\">\n                        {new Date(request.dateDemande).toLocaleDateString('fr-FR')}\n                      </td>\n                      <td className=\"p-4 text-sm text-ms-gray-dark\">{getRequestorName(request.requestorId)}</td>\n                      <td className=\"p-4 text-sm text-ms-gray-dark\">{getArticleName(request.articleId)}</td>\n                      <td className=\"p-4 text-sm font-medium text-ms-gray-dark\">{request.quantiteDemandee}</td>\n                      <td className=\"p-4\">{getStatusText(request.statut)}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">{getSupplierName(request.supplierId)}</td>\n                      <td className=\"p-4\">\n                        <div className=\"flex space-x-2\">\n                          {/* Convert to Reception Button - Only show for approved requests */}\n                          {request.statut === \"approuve\" && (\n                            <ConvertToReceptionDialog purchaseRequest={request} />\n                          )}\n                          \n                          <Select onValueChange={(value) => handleStatusChange(request.id, value)}>\n                            <SelectTrigger className=\"w-32\">\n                              <SelectValue placeholder=\"Statut\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"en_attente\">En attente</SelectItem>\n                              <SelectItem value=\"approuve\">Approuvé</SelectItem>\n                              <SelectItem value=\"refuse\">Refusé</SelectItem>\n                              <SelectItem value=\"commande\">Commandé</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleExportPDF(request)}\n                            title=\"Exporter PDF\"\n                            data-testid={`button-pdf-${request.id}`}\n                          >\n                            <i className=\"fas fa-file-pdf text-red-600\"></i>\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleEdit(request)}\n                            title=\"Modifier\"\n                            data-testid={`button-edit-${request.id}`}\n                          >\n                            <i className=\"fas fa-edit text-ms-blue\"></i>\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleDelete(request.id)}\n                            title=\"Supprimer\"\n                            data-testid={`button-delete-${request.id}`}\n                          >\n                            <i className=\"fas fa-trash text-ms-red\"></i>\n                          </Button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"p-8 text-center text-ms-gray\" data-testid=\"empty-state\">\n              <i className=\"fas fa-shopping-cart text-4xl mb-4\"></i>\n              <p className=\"text-lg font-medium\">Aucune demande trouvée</p>\n              <p className=\"text-sm\">Commencez par créer une nouvelle demande d'achat</p>\n              <Button \n                onClick={() => setShowForm(true)}\n                className=\"btn-ms-blue mt-4\"\n                data-testid=\"button-add-first-request\"\n              >\n                Nouvelle demande\n              </Button>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {showForm && (\n        <PurchaseRequestForm \n          request={editingRequest}\n          onClose={handleCloseForm}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":14088},"client/src/pages/Reception.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport ReceptionForm from \"@/components/ReceptionForm\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Reception } from \"@shared/schema\";\n\nexport default function ReceptionPage() {\n  const [showForm, setShowForm] = useState(false);\n  const [editingReception, setEditingReception] = useState<Reception | null>(null);\n  const [search, setSearch] = useState(\"\");\n  const { toast } = useToast();\n\n  const { data: receptions = [], isLoading } = useQuery<Reception[]>({\n    queryKey: [\"/api/receptions\"],\n  });\n\n  const { data: articles = [] } = useQuery({\n    queryKey: [\"/api/articles\"],\n  });\n\n  const { data: suppliers = [] } = useQuery({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/receptions/${id}`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/receptions\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Réception supprimée\",\n        description: \"La réception a été supprimée avec succès\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de supprimer la réception\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const filteredReceptions = receptions.filter(reception => {\n    const article = articles.find((a: any) => a.id === reception.articleId);\n    const supplier = suppliers.find((s: any) => s.id === reception.supplierId);\n    \n    return !search || \n      (article && (article.codeArticle.toLowerCase().includes(search.toLowerCase()) ||\n                   article.designation.toLowerCase().includes(search.toLowerCase()))) ||\n      (supplier && supplier.nom.toLowerCase().includes(search.toLowerCase())) ||\n      (reception.numeroBonLivraison && reception.numeroBonLivraison.toLowerCase().includes(search.toLowerCase()));\n  });\n\n  const getArticleName = (articleId: string) => {\n    const article = articles.find((a: any) => a.id === articleId);\n    return article ? `${article.codeArticle} - ${article.designation}` : \"Article inconnu\";\n  };\n\n  const getSupplierName = (supplierId: string) => {\n    const supplier = suppliers.find((s: any) => s.id === supplierId);\n    return supplier?.nom || \"Fournisseur inconnu\";\n  };\n\n  const handleEdit = (reception: Reception) => {\n    setEditingReception(reception);\n    setShowForm(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (window.confirm(\"Êtes-vous sûr de vouloir supprimer cette réception ?\")) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const handleCloseForm = () => {\n    setShowForm(false);\n    setEditingReception(null);\n  };\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"animate-pulse space-y-4\">\n            {[...Array(5)].map((_, i) => (\n              <div key={i} className=\"h-12 bg-gray-200 rounded\"></div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"reception-page\">\n      <Card>\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-xl font-semibold text-ms-gray-dark\">Réception de Marchandises</h3>\n            <Button \n              onClick={() => setShowForm(true)}\n              className=\"btn-ms-blue flex items-center space-x-2\"\n              data-testid=\"button-add-reception\"\n            >\n              <i className=\"fas fa-plus\"></i>\n              <span>Nouvelle Réception</span>\n            </Button>\n          </div>\n        </div>\n\n        {/* Search */}\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"max-w-md\">\n            <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Rechercher</label>\n            <Input \n              type=\"text\" \n              placeholder=\"Article, fournisseur, NBL...\" \n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              data-testid=\"input-search\"\n            />\n          </div>\n        </div>\n\n        {/* Receptions Table */}\n        <CardContent className=\"p-0\">\n          {filteredReceptions.length > 0 ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-ms-gray-light\">\n                  <tr>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Date Réception</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Fournisseur</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Article</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Quantité</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Prix Unitaire</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">NBL</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredReceptions.map((reception) => (\n                    <tr key={reception.id} className=\"border-b border-gray-100 hover:bg-gray-50\">\n                      <td className=\"p-4 text-sm text-ms-gray-dark\">\n                        {new Date(reception.dateReception).toLocaleDateString('fr-FR')}\n                      </td>\n                      <td className=\"p-4 text-sm text-ms-gray-dark\">{getSupplierName(reception.supplierId)}</td>\n                      <td className=\"p-4 text-sm text-ms-gray-dark\">{getArticleName(reception.articleId)}</td>\n                      <td className=\"p-4 text-sm font-medium text-ms-gray-dark\">{reception.quantiteRecue}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">\n                        {reception.prixUnitaire ? `€${reception.prixUnitaire}` : '-'}\n                      </td>\n                      <td className=\"p-4 text-sm text-ms-gray\">{reception.numeroBonLivraison || '-'}</td>\n                      <td className=\"p-4\">\n                        <div className=\"flex space-x-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleEdit(reception)}\n                            data-testid={`button-edit-${reception.id}`}\n                          >\n                            <i className=\"fas fa-edit text-ms-blue\"></i>\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleDelete(reception.id)}\n                            data-testid={`button-delete-${reception.id}`}\n                          >\n                            <i className=\"fas fa-trash text-ms-red\"></i>\n                          </Button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"p-8 text-center text-ms-gray\" data-testid=\"empty-state\">\n              <i className=\"fas fa-truck text-4xl mb-4\"></i>\n              <p className=\"text-lg font-medium\">Aucune réception trouvée</p>\n              <p className=\"text-sm\">Commencez par enregistrer une nouvelle réception</p>\n              <Button \n                onClick={() => setShowForm(true)}\n                className=\"btn-ms-blue mt-4\"\n                data-testid=\"button-add-first-reception\"\n              >\n                Nouvelle réception\n              </Button>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {showForm && (\n        <ReceptionForm \n          reception={editingReception}\n          onClose={handleCloseForm}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":8509},"client/src/pages/Reports.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useLocalStorageBackup } from \"@/hooks/useLocalStorage\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Reports() {\n  const [reportType, setReportType] = useState(\"stock\");\n  const [exportFormat, setExportFormat] = useState(\"csv\");\n  const { exportData } = useLocalStorageBackup();\n  const { toast } = useToast();\n\n  const { data: articles = [] } = useQuery({\n    queryKey: [\"/api/articles\"],\n  });\n\n  const { data: stockMovements = [] } = useQuery({\n    queryKey: [\"/api/stock-movements\"],\n  });\n\n  const { data: purchaseRequests = [] } = useQuery({\n    queryKey: [\"/api/purchase-requests\"],\n  });\n\n  const { data: receptions = [] } = useQuery({\n    queryKey: [\"/api/receptions\"],\n  });\n\n  const { data: outbounds = [] } = useQuery({\n    queryKey: [\"/api/outbounds\"],\n  });\n\n  const { data: suppliers = [] } = useQuery({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  const { data: requestors = [] } = useQuery({\n    queryKey: [\"/api/requestors\"],\n  });\n\n  const { data: dashboardStats } = useQuery({\n    queryKey: [\"/api/dashboard/stats\"],\n  });\n\n  const exportToCSV = (data: any[], filename: string) => {\n    if (data.length === 0) {\n      toast({\n        title: \"Aucune donnée\",\n        description: \"Aucune donnée à exporter\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const headers = Object.keys(data[0]);\n    const csvContent = [\n      headers.join(','),\n      ...data.map(row => headers.map(header => \n        JSON.stringify(row[header] || '')\n      ).join(','))\n    ].join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `${filename}.csv`);\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  };\n\n  const generateStockReport = () => {\n    const stockData = articles.map((article: any) => ({\n      'Code Article': article.codeArticle,\n      'Désignation': article.designation,\n      'Catégorie': article.categorie,\n      'Marque': article.marque || '',\n      'Stock Actuel': article.stockActuel,\n      'Unité': article.unite,\n      'Prix Unitaire': article.prixUnitaire || '',\n      'Seuil Minimum': article.seuilMinimum || '',\n      'Valeur Stock': article.prixUnitaire ? (parseFloat(article.prixUnitaire) * article.stockActuel).toFixed(2) : '',\n    }));\n\n    return stockData;\n  };\n\n  const generateMovementsReport = () => {\n    const movementsData = stockMovements.map((movement: any) => {\n      const article = articles.find((a: any) => a.id === movement.articleId);\n      return {\n        'Date': new Date(movement.dateMovement).toLocaleDateString('fr-FR'),\n        'Article': article ? `${article.codeArticle} - ${article.designation}` : 'Inconnu',\n        'Type': movement.type === 'entree' ? 'Entrée' : 'Sortie',\n        'Quantité': movement.quantite,\n        'Stock Avant': movement.quantiteAvant,\n        'Stock Après': movement.quantiteApres,\n        'Description': movement.description || '',\n      };\n    });\n\n    return movementsData.sort((a, b) => new Date(b.Date).getTime() - new Date(a.Date).getTime());\n  };\n\n  const generateSuppliersReport = () => {\n    const suppliersData = suppliers.map((supplier: any) => ({\n      'Nom': supplier.nom,\n      'Contact': supplier.contact || '',\n      'Téléphone': supplier.telephone || '',\n      'Email': supplier.email || '',\n      'Adresse': supplier.adresse || '',\n      'Conditions Paiement': supplier.conditionsPaiement || '',\n      'Délai Livraison': supplier.delaiLivraison ? `${supplier.delaiLivraison} jours` : '',\n    }));\n\n    return suppliersData;\n  };\n\n  const generateRequestorsReport = () => {\n    const requestorsData = requestors.map((requestor: any) => ({\n      'Nom': requestor.nom,\n      'Prénom': requestor.prenom,\n      'Département': requestor.departement,\n      'Poste': requestor.poste || '',\n      'Email': requestor.email || '',\n      'Téléphone': requestor.telephone || '',\n    }));\n\n    return requestorsData;\n  };\n\n  const handleExport = () => {\n    let data: any[] = [];\n    let filename = '';\n\n    switch (reportType) {\n      case 'stock':\n        data = generateStockReport();\n        filename = 'rapport-stock';\n        break;\n      case 'movements':\n        data = generateMovementsReport();\n        filename = 'rapport-mouvements';\n        break;\n      case 'suppliers':\n        data = generateSuppliersReport();\n        filename = 'rapport-fournisseurs';\n        break;\n      case 'requestors':\n        data = generateRequestorsReport();\n        filename = 'rapport-demandeurs';\n        break;\n      default:\n        toast({\n          title: \"Erreur\",\n          description: \"Type de rapport non valide\",\n          variant: \"destructive\",\n        });\n        return;\n    }\n\n    if (exportFormat === 'csv') {\n      exportToCSV(data, filename);\n      toast({\n        title: \"Export réussi\",\n        description: `Le rapport ${reportType} a été exporté en CSV`,\n      });\n    }\n  };\n\n  const handleBackup = () => {\n    try {\n      exportData();\n      toast({\n        title: \"Sauvegarde créée\",\n        description: \"Toutes les données ont été sauvegardées\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Erreur de sauvegarde\",\n        description: \"Impossible de créer la sauvegarde\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const lowStockArticles = articles.filter((article: any) => \n    article.stockActuel <= (article.seuilMinimum || 10)\n  );\n\n  const totalStockValue = articles.reduce((total: number, article: any) => {\n    const price = parseFloat(article.prixUnitaire || \"0\");\n    return total + (price * article.stockActuel);\n  }, 0);\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"reports-page\">\n      {/* Stats Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6\">\n        <Card className=\"card-hover transition-smooth\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-ms-gray\">Total Articles</p>\n                <p className=\"text-2xl font-bold text-ms-gray-dark\">{articles.length}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center\">\n                <i className=\"fas fa-boxes text-ms-blue text-xl\"></i>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"card-hover transition-smooth\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-ms-gray\">Stock Bas</p>\n                <p className=\"text-2xl font-bold text-ms-red\">{lowStockArticles.length}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center\">\n                <i className=\"fas fa-exclamation-triangle text-ms-red text-xl\"></i>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"card-hover transition-smooth\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-ms-gray\">Fournisseurs</p>\n                <p className=\"text-2xl font-bold text-ms-gray-dark\">{suppliers.length}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center\">\n                <i className=\"fas fa-building text-ms-green text-xl\"></i>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"card-hover transition-smooth\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-ms-gray\">Valeur Stock</p>\n                <p className=\"text-2xl font-bold text-ms-gray-dark\">\n                  {new Intl.NumberFormat('fr-FR', {\n                    style: 'currency',\n                    currency: 'EUR'\n                  }).format(totalStockValue)}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center\">\n                <i className=\"fas fa-euro-sign text-ms-amber text-xl\"></i>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Export Section */}\n      <Card>\n        <div className=\"p-6 border-b border-gray-200\">\n          <h3 className=\"text-xl font-semibold text-ms-gray-dark\">Export de Données</h3>\n        </div>\n        <CardContent className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Type de rapport</label>\n              <Select value={reportType} onValueChange={setReportType}>\n                <SelectTrigger data-testid=\"select-report-type\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"stock\">État des Stocks</SelectItem>\n                  <SelectItem value=\"movements\">Mouvements de Stock</SelectItem>\n                  <SelectItem value=\"suppliers\">Liste des Fournisseurs</SelectItem>\n                  <SelectItem value=\"requestors\">Liste des Demandeurs</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Format</label>\n              <Select value={exportFormat} onValueChange={setExportFormat}>\n                <SelectTrigger data-testid=\"select-export-format\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"csv\">CSV (Excel)</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Action</label>\n              <Button \n                onClick={handleExport}\n                className=\"w-full btn-ms-blue\"\n                data-testid=\"button-export\"\n              >\n                <i className=\"fas fa-download mr-2\"></i>\n                Exporter\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Backup Section */}\n      <Card>\n        <div className=\"p-6 border-b border-gray-200\">\n          <h3 className=\"text-xl font-semibold text-ms-gray-dark\">Sauvegarde et Restauration</h3>\n        </div>\n        <CardContent className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <h4 className=\"font-medium text-ms-gray-dark mb-3\">Sauvegarde Complète</h4>\n              <p className=\"text-sm text-ms-gray mb-4\">\n                Exportez toutes vos données dans un fichier de sauvegarde JSON.\n              </p>\n              <Button \n                onClick={handleBackup}\n                className=\"btn-ms-green\"\n                data-testid=\"button-backup\"\n              >\n                <i className=\"fas fa-download mr-2\"></i>\n                Créer une sauvegarde\n              </Button>\n            </div>\n\n            <div>\n              <h4 className=\"font-medium text-ms-gray-dark mb-3\">Informations</h4>\n              <div className=\"space-y-2 text-sm text-ms-gray\">\n                <p>• Les données sont stockées localement dans votre navigateur</p>\n                <p>• Effectuez des sauvegardes régulières</p>\n                <p>• Les rapports incluent toutes les données actuelles</p>\n                <p>• Format CSV compatible avec Excel</p>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Quick Stats */}\n      <Card>\n        <div className=\"p-6 border-b border-gray-200\">\n          <h3 className=\"text-xl font-semibold text-ms-gray-dark\">Statistiques Rapides</h3>\n        </div>\n        <CardContent className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div className=\"text-center\">\n              <div className=\"text-3xl font-bold text-ms-blue mb-2\">{stockMovements.length}</div>\n              <div className=\"text-sm text-ms-gray\">Mouvements de stock</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-3xl font-bold text-ms-amber mb-2\">{purchaseRequests.length}</div>\n              <div className=\"text-sm text-ms-gray\">Demandes d'achat</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-3xl font-bold text-ms-green mb-2\">{receptions.length + outbounds.length}</div>\n              <div className=\"text-sm text-ms-gray\">Transactions totales</div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":13559},"client/src/pages/Requestors.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport RequestorForm from \"@/components/RequestorForm\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Requestor } from \"@shared/schema\";\n\nexport default function Requestors() {\n  const [showForm, setShowForm] = useState(false);\n  const [editingRequestor, setEditingRequestor] = useState<Requestor | null>(null);\n  const [search, setSearch] = useState(\"\");\n  const { toast } = useToast();\n\n  const { data: requestors = [], isLoading } = useQuery<Requestor[]>({\n    queryKey: [\"/api/requestors\"],\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/requestors/${id}`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/requestors\"] });\n      toast({\n        title: \"Demandeur supprimé\",\n        description: \"Le demandeur a été supprimé avec succès\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de supprimer le demandeur\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const filteredRequestors = requestors.filter(requestor => \n    !search || \n    requestor.nom.toLowerCase().includes(search.toLowerCase()) ||\n    requestor.prenom.toLowerCase().includes(search.toLowerCase()) ||\n    requestor.departement.toLowerCase().includes(search.toLowerCase())\n  );\n\n  const handleEdit = (requestor: Requestor) => {\n    setEditingRequestor(requestor);\n    setShowForm(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (window.confirm(\"Êtes-vous sûr de vouloir supprimer ce demandeur ?\")) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const handleCloseForm = () => {\n    setShowForm(false);\n    setEditingRequestor(null);\n  };\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"animate-pulse space-y-4\">\n            {[...Array(5)].map((_, i) => (\n              <div key={i} className=\"h-12 bg-gray-200 rounded\"></div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"requestors-page\">\n      <Card>\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-xl font-semibold text-ms-gray-dark\">Gestion des Demandeurs</h3>\n            <Button \n              onClick={() => setShowForm(true)}\n              className=\"btn-ms-blue flex items-center space-x-2\"\n              data-testid=\"button-add-requestor\"\n            >\n              <i className=\"fas fa-plus\"></i>\n              <span>Nouveau Demandeur</span>\n            </Button>\n          </div>\n        </div>\n\n        {/* Search */}\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"max-w-md\">\n            <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Rechercher</label>\n            <Input \n              type=\"text\" \n              placeholder=\"Nom, prénom, département...\" \n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              data-testid=\"input-search\"\n            />\n          </div>\n        </div>\n\n        {/* Requestors Table */}\n        <CardContent className=\"p-0\">\n          {filteredRequestors.length > 0 ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-ms-gray-light\">\n                  <tr>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Nom</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Prénom</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Département</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Poste</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Email</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Téléphone</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredRequestors.map((requestor) => (\n                    <tr key={requestor.id} className=\"border-b border-gray-100 hover:bg-gray-50\">\n                      <td className=\"p-4 text-sm font-medium text-ms-gray-dark\">{requestor.nom}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">{requestor.prenom}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">{requestor.departement}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">{requestor.poste || \"-\"}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">{requestor.email || \"-\"}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">{requestor.telephone || \"-\"}</td>\n                      <td className=\"p-4\">\n                        <div className=\"flex space-x-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleEdit(requestor)}\n                            data-testid={`button-edit-${requestor.id}`}\n                          >\n                            <i className=\"fas fa-edit text-ms-blue\"></i>\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleDelete(requestor.id)}\n                            data-testid={`button-delete-${requestor.id}`}\n                          >\n                            <i className=\"fas fa-trash text-ms-red\"></i>\n                          </Button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"p-8 text-center text-ms-gray\" data-testid=\"empty-state\">\n              <i className=\"fas fa-users text-4xl mb-4\"></i>\n              <p className=\"text-lg font-medium\">Aucun demandeur trouvé</p>\n              <p className=\"text-sm\">Commencez par ajouter votre premier demandeur</p>\n              <Button \n                onClick={() => setShowForm(true)}\n                className=\"btn-ms-blue mt-4\"\n                data-testid=\"button-add-first-requestor\"\n              >\n                Ajouter un demandeur\n              </Button>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {showForm && (\n        <RequestorForm \n          requestor={editingRequestor}\n          onClose={handleCloseForm}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":7179},"client/src/pages/Suppliers.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport SupplierForm from \"@/components/SupplierForm\";\nimport BulkImportExport from \"@/components/BulkImportExport\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Upload, Download, Plus, Edit, Trash2 } from \"lucide-react\";\nimport type { Supplier } from \"@shared/schema\";\n\nexport default function Suppliers() {\n  const [showForm, setShowForm] = useState(false);\n  const [editingSupplier, setEditingSupplier] = useState<Supplier | null>(null);\n  const [search, setSearch] = useState(\"\");\n  const [showImportExport, setShowImportExport] = useState(false);\n  const { toast } = useToast();\n\n  const { data: suppliers = [], isLoading } = useQuery<Supplier[]>({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/suppliers/${id}`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/suppliers\"] });\n      toast({\n        title: \"Fournisseur supprimé\",\n        description: \"Le fournisseur a été supprimé avec succès\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de supprimer le fournisseur\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const filteredSuppliers = suppliers.filter(supplier => \n    !search || \n    supplier.nom.toLowerCase().includes(search.toLowerCase()) ||\n    (supplier.contact && supplier.contact.toLowerCase().includes(search.toLowerCase()))\n  );\n\n  const handleEdit = (supplier: Supplier) => {\n    setEditingSupplier(supplier);\n    setShowForm(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (window.confirm(\"Êtes-vous sûr de vouloir supprimer ce fournisseur ?\")) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const handleCloseForm = () => {\n    setShowForm(false);\n    setEditingSupplier(null);\n  };\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"animate-pulse space-y-4\">\n            {[...Array(5)].map((_, i) => (\n              <div key={i} className=\"h-12 bg-gray-200 rounded\"></div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"suppliers-page\">\n      <Card>\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-xl font-semibold text-ms-gray-dark\">Gestion des Fournisseurs</h3>\n            <Button \n              onClick={() => setShowForm(true)}\n              className=\"btn-ms-blue flex items-center space-x-2\"\n              data-testid=\"button-add-supplier\"\n            >\n              <i className=\"fas fa-plus\"></i>\n              <span>Nouveau Fournisseur</span>\n            </Button>\n          </div>\n        </div>\n\n        {/* Search */}\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"max-w-md\">\n            <label className=\"block text-sm font-medium text-ms-gray-dark mb-2\">Rechercher</label>\n            <Input \n              type=\"text\" \n              placeholder=\"Nom, contact...\" \n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              data-testid=\"input-search\"\n            />\n          </div>\n        </div>\n\n        {/* Suppliers Table */}\n        <CardContent className=\"p-0\">\n          {filteredSuppliers.length > 0 ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-ms-gray-light\">\n                  <tr>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Nom</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Contact</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Téléphone</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Email</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Délai Livraison</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-ms-gray-dark\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredSuppliers.map((supplier) => (\n                    <tr key={supplier.id} className=\"border-b border-gray-100 hover:bg-gray-50\">\n                      <td className=\"p-4 text-sm font-medium text-ms-gray-dark\">{supplier.nom}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">{supplier.contact || \"-\"}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">{supplier.telephone || \"-\"}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">{supplier.email || \"-\"}</td>\n                      <td className=\"p-4 text-sm text-ms-gray\">\n                        {supplier.delaiLivraison ? `${supplier.delaiLivraison} jours` : \"-\"}\n                      </td>\n                      <td className=\"p-4\">\n                        <div className=\"flex space-x-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleEdit(supplier)}\n                            data-testid={`button-edit-${supplier.id}`}\n                          >\n                            <i className=\"fas fa-edit text-ms-blue\"></i>\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleDelete(supplier.id)}\n                            data-testid={`button-delete-${supplier.id}`}\n                          >\n                            <i className=\"fas fa-trash text-ms-red\"></i>\n                          </Button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"p-8 text-center text-ms-gray\" data-testid=\"empty-state\">\n              <i className=\"fas fa-building text-4xl mb-4\"></i>\n              <p className=\"text-lg font-medium\">Aucun fournisseur trouvé</p>\n              <p className=\"text-sm\">Commencez par ajouter votre premier fournisseur</p>\n              <Button \n                onClick={() => setShowForm(true)}\n                className=\"btn-ms-blue mt-4\"\n                data-testid=\"button-add-first-supplier\"\n              >\n                Ajouter un fournisseur\n              </Button>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {showForm && (\n        <SupplierForm \n          supplier={editingSupplier}\n          onClose={handleCloseForm}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":7205},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }","size_bytes":1127},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}","size_bytes":7294},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }","size_bytes":776},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/BarcodeGenerator.tsx":{"content":"import { useRef, useEffect, useState } from \"react\";\nimport QRCode from \"qrcode\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\n\ninterface BarcodeGeneratorProps {\n  article: {\n    id: string;\n    codeArticle: string;\n    designation: string;\n  };\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function BarcodeGenerator({ article, isOpen, onClose }: BarcodeGeneratorProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [qrDataUrl, setQrDataUrl] = useState<string>(\"\");\n\n  useEffect(() => {\n    if (isOpen && article && canvasRef.current) {\n      generateQRCode();\n    }\n  }, [isOpen, article]);\n\n  const generateQRCode = async () => {\n    try {\n      const qrData = JSON.stringify({\n        id: article.id,\n        code: article.codeArticle,\n        name: article.designation,\n        type: \"article\"\n      });\n\n      const dataUrl = await QRCode.toDataURL(qrData, {\n        width: 200,\n        margin: 2,\n        color: {\n          dark: \"#000000\",\n          light: \"#FFFFFF\"\n        }\n      });\n\n      setQrDataUrl(dataUrl);\n    } catch (error) {\n      console.error(\"Erreur lors de la génération du QR code:\", error);\n    }\n  };\n\n  const downloadQRCode = () => {\n    if (qrDataUrl) {\n      const link = document.createElement('a');\n      link.download = `qr-${article.codeArticle}.png`;\n      link.href = qrDataUrl;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  };\n\n  const printQRCode = () => {\n    const printWindow = window.open('', '_blank');\n    if (printWindow && qrDataUrl) {\n      printWindow.document.write(`\n        <html>\n          <head>\n            <title>QR Code - ${article.codeArticle}</title>\n            <style>\n              body { \n                font-family: Arial, sans-serif; \n                text-align: center; \n                padding: 20px; \n              }\n              .qr-container {\n                border: 2px solid #333;\n                padding: 20px;\n                display: inline-block;\n                margin: 20px;\n              }\n              h2 { margin-bottom: 10px; }\n              p { margin: 5px 0; }\n              img { margin: 10px 0; }\n            </style>\n          </head>\n          <body>\n            <div class=\"qr-container\">\n              <h2>${article.codeArticle}</h2>\n              <p><strong>${article.designation}</strong></p>\n              <img src=\"${qrDataUrl}\" alt=\"QR Code\" />\n              <p>Scanner ce code pour accéder aux détails</p>\n            </div>\n          </body>\n        </html>\n      `);\n      printWindow.document.close();\n      printWindow.print();\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-md\" data-testid=\"barcode-generator-modal\">\n        <DialogHeader>\n          <DialogTitle>Code QR - {article.codeArticle}</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          <div className=\"text-center\">\n            <h3 className=\"text-lg font-medium text-ms-gray-dark mb-2\">\n              {article.designation}\n            </h3>\n            <p className=\"text-sm text-ms-gray mb-4\">\n              Code Article: {article.codeArticle}\n            </p>\n          </div>\n\n          {qrDataUrl && (\n            <div className=\"text-center space-y-4\">\n              <div className=\"flex justify-center\">\n                <img \n                  src={qrDataUrl} \n                  alt=\"QR Code\" \n                  className=\"border border-gray-200 rounded p-2\"\n                />\n              </div>\n              \n              <p className=\"text-sm text-ms-gray\">\n                Scanner ce code QR pour accéder rapidement aux informations de l'article\n              </p>\n\n              <div className=\"flex space-x-3 justify-center\">\n                <Button \n                  onClick={downloadQRCode}\n                  className=\"btn-ms-blue\"\n                  data-testid=\"button-download-qr\"\n                >\n                  <i className=\"fas fa-download mr-2\"></i>\n                  Télécharger\n                </Button>\n                <Button \n                  onClick={printQRCode}\n                  variant=\"outline\"\n                  data-testid=\"button-print-qr\"\n                >\n                  <i className=\"fas fa-print mr-2\"></i>\n                  Imprimer\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":4581},"client/src/components/TopNavigation.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { useState } from \"react\";\nimport SettingsModal from \"@/components/Settings\";\nimport UserPreferences from \"@/components/UserPreferences\";\nimport { \n  Home, \n  Package, \n  ShoppingCart, \n  ClipboardList, \n  BarChart3, \n  Truck, \n  LogOut, \n  Building, \n  Users, \n  FileText,\n  Search,\n  Settings,\n  Bell,\n  User,\n  ChevronDown\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\nconst navigationItems = [\n  { id: \"dashboard\", path: \"/\", icon: Home, label: \"Accueil\" },\n  { id: \"articles\", path: \"/articles\", icon: Package, label: \"Articles\" },\n  { id: \"purchase-requests\", path: \"/purchase-requests\", icon: ShoppingCart, label: \"Demandes\" },\n  { id: \"purchase-follow\", path: \"/purchase-follow\", icon: ClipboardList, label: \"Suivi Achats\" },\n  { id: \"stock-status\", path: \"/stock-status\", icon: BarChart3, label: \"État Stock\" },\n  { id: \"reception\", path: \"/reception\", icon: Truck, label: \"Réception\" },\n  { id: \"outbound\", path: \"/outbound\", icon: LogOut, label: \"Sortie\" },\n  { id: \"suppliers\", path: \"/suppliers\", icon: Building, label: \"Fournisseurs\" },\n  { id: \"requestors\", path: \"/requestors\", icon: Users, label: \"Demandeurs\" },\n  { id: \"reports\", path: \"/reports\", icon: FileText, label: \"Rapports\" },\n];\n\nexport default function TopNavigation() {\n  const [location] = useLocation();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showSettings, setShowSettings] = useState(false);\n  const [showUserPreferences, setShowUserPreferences] = useState(false);\n\n  const isActive = (path: string) => {\n    if (path === \"/\" && (location === \"/\" || location === \"/dashboard\")) return true;\n    return location === path;\n  };\n\n  return (\n    <div className=\"windows-nav bg-white shadow-sm\">\n      {/* Main Top Bar - Profile, Settings, Alerts, Search */}\n      <div className=\"h-16 px-6 flex items-center justify-between border-b border-gray-200\">\n        {/* Left Section - Logo and Brand */}\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-windows-blue rounded-lg flex items-center justify-center shadow-sm\">\n              <Package className=\"w-6 h-6 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl font-semibold text-gray-900\">StockCéramique</h1>\n              <p className=\"text-xs text-gray-500\">Gestion de Stock</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Center Section - Search Bar */}\n        <div className=\"flex-1 max-w-xl mx-8\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n            <Input\n              type=\"search\"\n              placeholder=\"Rechercher articles, fournisseurs, demandes...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-10 pr-4 py-2 w-full bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:border-windows-blue focus:ring-1 focus:ring-windows-blue\"\n            />\n          </div>\n        </div>\n\n        {/* Right Section - Alerts, Settings, Profile */}\n        <div className=\"flex items-center space-x-3\">\n          {/* Notifications */}\n          <Button variant=\"ghost\" size=\"sm\" className=\"relative p-2 hover:bg-gray-100 rounded-lg\">\n            <Bell className=\"w-5 h-5 text-gray-600\" />\n            <span className=\"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full\"></span>\n          </Button>\n\n          {/* Settings */}\n          <Button \n            variant=\"ghost\" \n            size=\"sm\"\n            className=\"p-2 hover:bg-gray-100 rounded-lg\"\n            onClick={() => setShowSettings(true)}\n          >\n            <Settings className=\"w-5 h-5 text-gray-600\" />\n          </Button>\n\n          {/* User Profile Menu */}\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"sm\" className=\"flex items-center space-x-3 px-3 py-2 hover:bg-gray-100 rounded-lg\">\n                <div className=\"w-8 h-8 bg-windows-blue rounded-full flex items-center justify-center\">\n                  <User className=\"w-4 h-4 text-white\" />\n                </div>\n                <div className=\"text-left hidden lg:block\">\n                  <p className=\"text-sm font-medium text-gray-900\">Utilisateur</p>\n                  <p className=\"text-xs text-gray-500\">Administrateur</p>\n                </div>\n                <ChevronDown className=\"w-4 h-4 text-gray-500\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-48\">\n              <DropdownMenuLabel>Mon Compte</DropdownMenuLabel>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem onClick={() => setShowUserPreferences(true)}>\n                <User className=\"w-4 h-4 mr-2\" />\n                Profil\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => setShowSettings(true)}>\n                <Settings className=\"w-4 h-4 mr-2\" />\n                Paramètres\n              </DropdownMenuItem>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem className=\"text-red-600\">\n                <LogOut className=\"w-4 h-4 mr-2\" />\n                Se déconnecter\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      </div>\n\n      {/* Secondary Navigation Bar - Main Menu Items */}\n      <div className=\"h-12 px-6 bg-windows-blue text-white\">\n        <div className=\"flex items-center space-x-1 overflow-x-auto\">\n          {navigationItems.map((item) => {\n            const Icon = item.icon;\n            const active = isActive(item.path);\n            \n            return (\n              <Link key={item.id} href={item.path}>\n                <Button\n                  variant=\"ghost\"\n                  className={`\n                    flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-none border-b-2 transition-all whitespace-nowrap h-12\n                    ${active \n                      ? 'text-white border-white bg-blue-700/30' \n                      : 'text-blue-100 border-transparent hover:text-white hover:bg-blue-700/20 hover:border-blue-300'\n                    }\n                  `}\n                >\n                  <Icon className=\"w-4 h-4\" />\n                  <span>{item.label}</span>\n                </Button>\n              </Link>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Mobile Navigation - Collapsed Menu */}\n      <div className=\"md:hidden px-4 py-2 bg-gray-50 border-t border-gray-200\">\n        <div className=\"grid grid-cols-3 gap-1\">\n          {navigationItems.slice(0, 6).map((item) => {\n            const Icon = item.icon;\n            return (\n              <Link\n                key={item.id}\n                href={item.path}\n                className={`windows-nav-item-mobile px-2 py-2 rounded text-xs flex flex-col items-center space-y-1 ${\n                  isActive(item.path) \n                    ? 'bg-windows-blue text-white' \n                    : 'text-gray-600 hover:bg-gray-100'\n                }`}\n              >\n                <Icon className=\"w-4 h-4\" />\n                <span className=\"text-center\">{item.label}</span>\n              </Link>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Settings Modal */}\n      {showSettings && (\n        <SettingsModal onClose={() => setShowSettings(false)} />\n      )}\n\n      {/* User Preferences Modal */}\n      {showUserPreferences && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden\">\n            <UserPreferences onClose={() => setShowUserPreferences(false)} />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":8240},"client/src/components/WindowsButton.tsx":{"content":"import { forwardRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface WindowsButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: \"default\" | \"primary\" | \"secondary\" | \"success\" | \"danger\" | \"outline\";\n  size?: \"sm\" | \"md\" | \"lg\";\n}\n\nconst WindowsButton = forwardRef<HTMLButtonElement, WindowsButtonProps>(\n  ({ className, variant = \"default\", size = \"md\", ...props }, ref) => {\n    const baseClasses = \"inline-flex items-center justify-center font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\";\n    \n    const variants = {\n      default: \"windows-button text-gray-700\",\n      primary: \"windows-button-primary\",\n      secondary: \"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200\",\n      success: \"bg-green-600 text-white border border-green-700 hover:bg-green-700\",\n      danger: \"bg-red-600 text-white border border-red-700 hover:bg-red-700\",\n      outline: \"border border-gray-300 text-gray-700 bg-transparent hover:bg-gray-50\",\n    };\n\n    const sizes = {\n      sm: \"px-3 py-1.5 text-sm rounded-sm\",\n      md: \"px-4 py-2 text-sm rounded-sm\",\n      lg: \"px-6 py-3 text-base rounded-sm\",\n    };\n\n    return (\n      <button\n        ref={ref}\n        className={cn(\n          baseClasses,\n          variants[variant],\n          sizes[size],\n          className\n        )}\n        {...props}\n      />\n    );\n  }\n);\nWindowsButton.displayName = \"WindowsButton\";\n\nexport { WindowsButton };","size_bytes":1530},"client/src/components/WindowsCard.tsx":{"content":"import { forwardRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface WindowsCardProps extends React.HTMLAttributes<HTMLDivElement> {\n  hoverable?: boolean;\n  variant?: \"default\" | \"elevated\" | \"outline\";\n}\n\ninterface WindowsCardHeaderProps extends React.HTMLAttributes<HTMLDivElement> {}\ninterface WindowsCardContentProps extends React.HTMLAttributes<HTMLDivElement> {}\ninterface WindowsCardFooterProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nconst WindowsCard = forwardRef<HTMLDivElement, WindowsCardProps>(\n  ({ className, hoverable = true, variant = \"default\", ...props }, ref) => {\n    const baseClasses = \"rounded-sm transition-all duration-200\";\n    \n    const variants = {\n      default: \"bg-white border border-gray-200 shadow-sm\",\n      elevated: \"bg-white border border-gray-200 shadow-lg\",\n      outline: \"border-2 border-gray-200 bg-transparent\",\n    };\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          baseClasses,\n          variants[variant],\n          hoverable && \"hover:shadow-md hover:-translate-y-0.5 cursor-pointer\",\n          \"windows-card\",\n          className\n        )}\n        style={{\n          background: variant === \"default\" ? \"linear-gradient(180deg, #ffffff 0%, #fafbfc 100%)\" : undefined,\n          boxShadow: variant === \"default\" ? \"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24)\" : undefined,\n        }}\n        {...props}\n      />\n    );\n  }\n);\nWindowsCard.displayName = \"WindowsCard\";\n\nconst WindowsCardHeader = forwardRef<HTMLDivElement, WindowsCardHeaderProps>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\"px-4 py-3 border-b border-gray-100\", className)}\n      {...props}\n    />\n  )\n);\nWindowsCardHeader.displayName = \"WindowsCardHeader\";\n\nconst WindowsCardContent = forwardRef<HTMLDivElement, WindowsCardContentProps>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn(\"p-4\", className)} {...props} />\n  )\n);\nWindowsCardContent.displayName = \"WindowsCardContent\";\n\nconst WindowsCardFooter = forwardRef<HTMLDivElement, WindowsCardFooterProps>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\"px-4 py-3 border-t border-gray-100\", className)}\n      {...props}\n    />\n  )\n);\nWindowsCardFooter.displayName = \"WindowsCardFooter\";\n\nexport { WindowsCard, WindowsCardHeader, WindowsCardContent, WindowsCardFooter };","size_bytes":2406},"client/src/lib/pdfUtils.ts":{"content":"import jsPDF from 'jspdf';\nimport autoTable from 'jspdf-autotable';\n\n// Extend jsPDF type to include autoTable\ndeclare module 'jspdf' {\n  interface jsPDF {\n    autoTable: typeof autoTable;\n  }\n}\n\nexport interface PDFOptions {\n  title: string;\n  subtitle?: string;\n  headers: string[];\n  data: any[][];\n  filename: string;\n}\n\nexport const generatePDF = ({ title, subtitle, headers, data, filename }: PDFOptions) => {\n  const doc = new jsPDF();\n\n  // Add company logo/header\n  doc.setFontSize(20);\n  doc.setFont('helvetica', 'bold');\n  doc.text('StockCéramique', 20, 20);\n\n  // Add title\n  doc.setFontSize(16);\n  doc.setFont('helvetica', 'bold');\n  doc.text(title, 20, 35);\n\n  // Add subtitle if provided\n  let yPosition = 45;\n  if (subtitle) {\n    doc.setFontSize(12);\n    doc.setFont('helvetica', 'normal');\n    doc.text(subtitle, 20, yPosition);\n    yPosition += 10;\n  }\n\n  // Add generation date\n  doc.setFontSize(10);\n  doc.setFont('helvetica', 'normal');\n  doc.text(`Généré le: ${new Date().toLocaleDateString('fr-FR')} à ${new Date().toLocaleTimeString('fr-FR')}`, 20, yPosition);\n\n  // Generate table\n  autoTable(doc, {\n    startY: yPosition + 10,\n    head: [headers],\n    body: data,\n    theme: 'grid',\n    styles: {\n      fontSize: 9,\n      cellPadding: 3,\n    },\n    headStyles: {\n      fillColor: [41, 98, 255], // Microsoft blue\n      textColor: 255,\n      fontStyle: 'bold',\n    },\n    alternateRowStyles: {\n      fillColor: [245, 245, 245],\n    },\n    columnStyles: {\n      0: { cellWidth: 25 },\n    },\n  });\n\n  // Save the PDF\n  doc.save(`${filename}.pdf`);\n};\n\nexport const generatePurchaseRequestPDF = (request: any, article: any, requestor: any, supplier: any) => {\n  const doc = new jsPDF();\n\n  // Header\n  doc.setFontSize(20);\n  doc.setFont('helvetica', 'bold');\n  doc.text('StockCéramique', 20, 20);\n\n  doc.setFontSize(16);\n  doc.text('DEMANDE D\\'ACHAT', 20, 35);\n\n  // Request details\n  let yPos = 55;\n  doc.setFontSize(12);\n  doc.setFont('helvetica', 'bold');\n  doc.text('Informations de la demande:', 20, yPos);\n\n  yPos += 10;\n  doc.setFont('helvetica', 'normal');\n  doc.text(`Date de demande: ${new Date(request.dateDemande).toLocaleDateString('fr-FR')}`, 25, yPos);\n  \n  yPos += 8;\n  doc.text(`Statut: ${request.statut === 'en_attente' ? 'En attente' : \n                     request.statut === 'approuve' ? 'Approuvé' : \n                     request.statut === 'refuse' ? 'Refusé' : 'Commandé'}`, 25, yPos);\n\n  // Requestor details\n  yPos += 15;\n  doc.setFont('helvetica', 'bold');\n  doc.text('Demandeur:', 20, yPos);\n\n  yPos += 10;\n  doc.setFont('helvetica', 'normal');\n  doc.text(`Nom: ${requestor.prenom} ${requestor.nom}`, 25, yPos);\n  \n  yPos += 8;\n  doc.text(`Département: ${requestor.departement}`, 25, yPos);\n  \n  if (requestor.poste) {\n    yPos += 8;\n    doc.text(`Poste: ${requestor.poste}`, 25, yPos);\n  }\n\n  // Article details\n  yPos += 15;\n  doc.setFont('helvetica', 'bold');\n  doc.text('Article demandé:', 20, yPos);\n\n  yPos += 10;\n  doc.setFont('helvetica', 'normal');\n  doc.text(`Code: ${article.codeArticle}`, 25, yPos);\n  \n  yPos += 8;\n  doc.text(`Désignation: ${article.designation}`, 25, yPos);\n  \n  yPos += 8;\n  doc.text(`Catégorie: ${article.categorie}`, 25, yPos);\n  \n  yPos += 8;\n  doc.text(`Quantité demandée: ${request.quantiteDemandee} ${article.unite}`, 25, yPos);\n\n  // Supplier details if available\n  if (supplier) {\n    yPos += 15;\n    doc.setFont('helvetica', 'bold');\n    doc.text('Fournisseur suggéré:', 20, yPos);\n\n    yPos += 10;\n    doc.setFont('helvetica', 'normal');\n    doc.text(`Nom: ${supplier.nom}`, 25, yPos);\n    \n    if (supplier.contact) {\n      yPos += 8;\n      doc.text(`Contact: ${supplier.contact}`, 25, yPos);\n    }\n  }\n\n  // Observations\n  if (request.observations) {\n    yPos += 15;\n    doc.setFont('helvetica', 'bold');\n    doc.text('Observations:', 20, yPos);\n\n    yPos += 10;\n    doc.setFont('helvetica', 'normal');\n    const splitText = doc.splitTextToSize(request.observations, 160);\n    doc.text(splitText, 25, yPos);\n  }\n\n  // Footer\n  const pageHeight = doc.internal.pageSize.height;\n  doc.setFontSize(8);\n  doc.setFont('helvetica', 'italic');\n  doc.text(`Généré le ${new Date().toLocaleDateString('fr-FR')} à ${new Date().toLocaleTimeString('fr-FR')}`, 20, pageHeight - 20);\n\n  // Save\n  doc.save(`demande-achat-${request.id}.pdf`);\n};\n\nexport const generateStockReportPDF = (articles: any[], title: string = 'Rapport de Stock') => {\n  const headers = ['Code Article', 'Désignation', 'Catégorie', 'Stock Actuel', 'Unité', 'Prix Unit.', 'Valeur'];\n  \n  const data = articles.map(article => [\n    article.codeArticle,\n    article.designation,\n    article.categorie,\n    article.stockActuel.toString(),\n    article.unite,\n    article.prixUnitaire ? `${article.prixUnitaire}€` : '-',\n    article.prixUnitaire ? `${(article.prixUnitaire * article.stockActuel).toFixed(2)}€` : '-'\n  ]);\n\n  const totalValue = articles.reduce((total, article) => {\n    const price = parseFloat(article.prixUnitaire || \"0\");\n    return total + (price * article.stockActuel);\n  }, 0);\n\n  generatePDF({\n    title,\n    subtitle: `Total articles: ${articles.length} - Valeur totale: ${totalValue.toFixed(2)}€`,\n    headers,\n    data,\n    filename: 'rapport-stock'\n  });\n};","size_bytes":5261},"client/src/pages/PurchaseFollow.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Calendar, Package, Clock, User, Building, CheckCircle, AlertCircle } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { fr } from \"date-fns/locale\";\nimport type { PurchaseRequest, Article, Supplier } from \"@shared/schema\";\n\nexport default function PurchaseFollow() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const queryClient = useQueryClient();\n\n  // Fetch purchase requests\n  const { data: purchaseRequests = [], isLoading } = useQuery<PurchaseRequest[]>({\n    queryKey: [\"/api/purchase-requests\"],\n  });\n\n  // Fetch articles for reference\n  const { data: articles = [] } = useQuery<Article[]>({\n    queryKey: [\"/api/articles\"],\n  });\n\n  // Fetch suppliers for reference\n  const { data: suppliers = [] } = useQuery<Supplier[]>({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  // Update status mutation\n  const updateStatusMutation = useMutation({\n    mutationFn: async ({ id, statut }: { id: string; statut: string }) => {\n      const response = await fetch(`/api/purchase-requests/${id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ statut }),\n      });\n      if (!response.ok) throw new Error(\"Failed to update status\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/purchase-requests\"] });\n    },\n  });\n\n  // Filter requests based on search and status\n  const filteredRequests = purchaseRequests.filter((request) => {\n    const article = articles.find(a => a.id === request.articleId);\n    const supplier = suppliers.find(s => s.id === request.supplierId);\n    \n    const matchesSearch = !searchTerm || \n      article?.codeArticle.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      article?.designation.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      supplier?.nom.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesStatus = statusFilter === \"all\" || request.statut === statusFilter;\n    \n    return matchesSearch && matchesStatus;\n  });\n\n  // Group requests by status\n  const groupedRequests = {\n    en_attente: filteredRequests.filter(r => r.statut === \"en_attente\"),\n    approuve: filteredRequests.filter(r => r.statut === \"approuve\"),\n    commande: filteredRequests.filter(r => r.statut === \"commande\"),\n    refuse: filteredRequests.filter(r => r.statut === \"refuse\"),\n  };\n\n  const getStatusBadge = (statut: string) => {\n    const statusConfig = {\n      en_attente: { color: \"bg-yellow-100 text-yellow-800\", label: \"En Attente\", icon: Clock },\n      approuve: { color: \"bg-green-100 text-green-800\", label: \"Approuvé\", icon: CheckCircle },\n      commande: { color: \"bg-blue-100 text-blue-800\", label: \"Commandé\", icon: Package },\n      refuse: { color: \"bg-red-100 text-red-800\", label: \"Refusé\", icon: AlertCircle },\n    };\n    \n    const config = statusConfig[statut as keyof typeof statusConfig] || statusConfig.en_attente;\n    const Icon = config.icon;\n    \n    return (\n      <Badge variant=\"secondary\" className={config.color}>\n        <Icon className=\"w-3 h-3 mr-1\" />\n        {config.label}\n      </Badge>\n    );\n  };\n\n  const RequestCard = ({ request }: { request: PurchaseRequest }) => {\n    const article = articles.find(a => a.id === request.articleId);\n    const supplier = suppliers.find(s => s.id === request.supplierId);\n\n    return (\n      <Card className=\"mb-4\">\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex justify-between items-start\">\n            <div className=\"space-y-1\">\n              <CardTitle className=\"text-lg\">{article?.designation || \"Article non trouvé\"}</CardTitle>\n              <CardDescription className=\"flex items-center space-x-2\">\n                <Package className=\"w-4 h-4\" />\n                <span>Code: {article?.codeArticle}</span>\n                <span>•</span>\n                <span>Qté: {request.quantiteDemandee} {article?.unite}</span>\n              </CardDescription>\n            </div>\n            {getStatusBadge(request.statut)}\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <div className=\"grid grid-cols-2 gap-4 text-sm\">\n            <div className=\"flex items-center space-x-2\">\n              <Calendar className=\"w-4 h-4 text-gray-500\" />\n              <span>Date demande: {format(new Date(request.dateDemande), \"dd/MM/yyyy\", { locale: fr })}</span>\n            </div>\n            {supplier && (\n              <div className=\"flex items-center space-x-2\">\n                <Building className=\"w-4 h-4 text-gray-500\" />\n                <span>Fournisseur: {supplier.nom}</span>\n              </div>\n            )}\n          </div>\n          \n          {request.observations && (\n            <div className=\"bg-gray-50 p-3 rounded-md\">\n              <p className=\"text-sm text-gray-700\">{request.observations}</p>\n            </div>\n          )}\n          \n          {request.statut === \"en_attente\" && (\n            <div className=\"flex space-x-2 pt-2\">\n              <Button\n                size=\"sm\"\n                variant=\"default\"\n                onClick={() => updateStatusMutation.mutate({ id: request.id, statut: \"approuve\" })}\n                disabled={updateStatusMutation.isPending}\n              >\n                Approuver\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => updateStatusMutation.mutate({ id: request.id, statut: \"refuse\" })}\n                disabled={updateStatusMutation.isPending}\n              >\n                Refuser\n              </Button>\n            </div>\n          )}\n          \n          {request.statut === \"approuve\" && (\n            <Button\n              size=\"sm\"\n              variant=\"default\"\n              onClick={() => updateStatusMutation.mutate({ id: request.id, statut: \"commande\" })}\n              disabled={updateStatusMutation.isPending}\n            >\n              Marquer comme Commandé\n            </Button>\n          )}\n        </CardContent>\n      </Card>\n    );\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"space-y-4\">\n          {Array(3).fill(0).map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader>\n                <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n                <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  <div className=\"h-3 bg-gray-200 rounded\"></div>\n                  <div className=\"h-3 bg-gray-200 rounded w-5/6\"></div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Suivi des Achats</h1>\n          <p className=\"text-gray-600\">Gestion et suivi des demandes d'achat</p>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex space-x-4\">\n        <Input\n          placeholder=\"Rechercher par article ou fournisseur...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"max-w-sm\"\n        />\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\n          <SelectTrigger className=\"max-w-xs\">\n            <SelectValue placeholder=\"Filtrer par statut\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">Tous les statuts</SelectItem>\n            <SelectItem value=\"en_attente\">En Attente</SelectItem>\n            <SelectItem value=\"approuve\">Approuvé</SelectItem>\n            <SelectItem value=\"commande\">Commandé</SelectItem>\n            <SelectItem value=\"refuse\">Refusé</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Status Summary */}\n      <div className=\"grid grid-cols-4 gap-4\">\n        {Object.entries(groupedRequests).map(([status, requests]) => (\n          <Card key={status}>\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-sm font-medium\">\n                {status === \"en_attente\" && \"En Attente\"}\n                {status === \"approuve\" && \"Approuvé\"}\n                {status === \"commande\" && \"Commandé\"}\n                {status === \"refuse\" && \"Refusé\"}\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{requests.length}</div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* Tabs for different statuses */}\n      <Tabs defaultValue=\"en_attente\" className=\"space-y-4\">\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"en_attente\">En Attente ({groupedRequests.en_attente.length})</TabsTrigger>\n          <TabsTrigger value=\"approuve\">Approuvé ({groupedRequests.approuve.length})</TabsTrigger>\n          <TabsTrigger value=\"commande\">Commandé ({groupedRequests.commande.length})</TabsTrigger>\n          <TabsTrigger value=\"refuse\">Refusé ({groupedRequests.refuse.length})</TabsTrigger>\n        </TabsList>\n\n        {Object.entries(groupedRequests).map(([status, requests]) => (\n          <TabsContent key={status} value={status} className=\"space-y-4\">\n            {requests.length === 0 ? (\n              <Card>\n                <CardContent className=\"p-6 text-center text-gray-500\">\n                  Aucune demande avec le statut \"{status.replace('_', ' ')}\"\n                </CardContent>\n              </Card>\n            ) : (\n              requests.map((request) => (\n                <RequestCard key={request.id} request={request} />\n              ))\n            )}\n          </TabsContent>\n        ))}\n      </Tabs>\n    </div>\n  );\n}","size_bytes":10535},"client/src/pages/StockStatus.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { \n  Package, \n  AlertTriangle, \n  CheckCircle, \n  TrendingDown, \n  TrendingUp,\n  Search,\n  Filter,\n  Download,\n  BarChart3\n} from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { fr } from \"date-fns/locale\";\nimport type { Article, Supplier, StockMovement } from \"@shared/schema\";\n\nexport default function StockStatus() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState<string>(\"all\");\n  const [stockFilter, setStockFilter] = useState<string>(\"all\");\n  const [sortBy, setSortBy] = useState<string>(\"name\");\n\n  // Fetch data\n  const { data: articles = [], isLoading } = useQuery<Article[]>({\n    queryKey: [\"/api/articles\"],\n  });\n\n  const { data: suppliers = [] } = useQuery<Supplier[]>({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  const { data: stockMovements = [] } = useQuery<StockMovement[]>({\n    queryKey: [\"/api/stock-movements\"],\n  });\n\n  // Process and filter articles\n  const processedArticles = useMemo(() => {\n    return articles.map(article => {\n      const supplier = suppliers.find(s => s.id === article.fournisseurId);\n      const stockPercentage = article.seuilMinimum ? (article.stockActuel / article.seuilMinimum) * 100 : 100;\n      const recentMovements = stockMovements\n        .filter(m => m.articleId === article.id)\n        .sort((a, b) => new Date(b.dateMovement).getTime() - new Date(a.dateMovement).getTime())\n        .slice(0, 5);\n      \n      let stockStatus: \"critical\" | \"low\" | \"medium\" | \"good\";\n      if (article.stockActuel === 0) stockStatus = \"critical\";\n      else if (article.stockActuel <= (article.seuilMinimum || 10)) stockStatus = \"low\";\n      else if (article.stockActuel <= (article.seuilMinimum || 10) * 2) stockStatus = \"medium\";\n      else stockStatus = \"good\";\n\n      return {\n        ...article,\n        supplier,\n        stockPercentage,\n        stockStatus,\n        recentMovements,\n        stockValue: article.stockActuel * (parseFloat(article.prixUnitaire || \"0\") || 0),\n      };\n    });\n  }, [articles, suppliers, stockMovements]);\n\n  // Apply filters and sorting\n  const filteredAndSortedArticles = useMemo(() => {\n    let filtered = processedArticles.filter(article => {\n      const matchesSearch = !searchTerm || \n        article.codeArticle.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        article.designation.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        article.marque?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        article.supplier?.nom.toLowerCase().includes(searchTerm.toLowerCase());\n      \n      const matchesCategory = categoryFilter === \"all\" || article.categorie === categoryFilter;\n      \n      const matchesStock = stockFilter === \"all\" || article.stockStatus === stockFilter;\n      \n      return matchesSearch && matchesCategory && matchesStock;\n    });\n\n    // Sort articles\n    filtered.sort((a, b) => {\n      switch (sortBy) {\n        case \"name\":\n          return a.designation.localeCompare(b.designation);\n        case \"stock\":\n          return b.stockActuel - a.stockActuel;\n        case \"status\":\n          const statusOrder = { critical: 0, low: 1, medium: 2, good: 3 };\n          return statusOrder[a.stockStatus] - statusOrder[b.stockStatus];\n        case \"value\":\n          return b.stockValue - a.stockValue;\n        default:\n          return 0;\n      }\n    });\n\n    return filtered;\n  }, [processedArticles, searchTerm, categoryFilter, stockFilter, sortBy]);\n\n  // Calculate summary statistics\n  const summaryStats = useMemo(() => {\n    const total = processedArticles.length;\n    const critical = processedArticles.filter(a => a.stockStatus === \"critical\").length;\n    const low = processedArticles.filter(a => a.stockStatus === \"low\").length;\n    const medium = processedArticles.filter(a => a.stockStatus === \"medium\").length;\n    const good = processedArticles.filter(a => a.stockStatus === \"good\").length;\n    const totalValue = processedArticles.reduce((sum, a) => sum + a.stockValue, 0);\n    \n    return { total, critical, low, medium, good, totalValue };\n  }, [processedArticles]);\n\n  // Get unique categories\n  const categories = useMemo(() => {\n    return Array.from(new Set(articles.map(a => a.categorie))).filter(Boolean);\n  }, [articles]);\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"critical\": return \"bg-red-100 text-red-800 border-red-200\";\n      case \"low\": return \"bg-orange-100 text-orange-800 border-orange-200\";\n      case \"medium\": return \"bg-yellow-100 text-yellow-800 border-yellow-200\";\n      case \"good\": return \"bg-green-100 text-green-800 border-green-200\";\n      default: return \"bg-gray-100 text-gray-800 border-gray-200\";\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"critical\": return <AlertTriangle className=\"w-4 h-4 text-red-500\" />;\n      case \"low\": return <TrendingDown className=\"w-4 h-4 text-orange-500\" />;\n      case \"medium\": return <TrendingUp className=\"w-4 h-4 text-yellow-500\" />;\n      case \"good\": return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\n      default: return <Package className=\"w-4 h-4\" />;\n    }\n  };\n\n  const ArticleCard = ({ article }: { article: typeof processedArticles[0] }) => (\n    <Card className=\"hover:shadow-md transition-shadow\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex justify-between items-start\">\n          <div className=\"space-y-1 flex-1\">\n            <CardTitle className=\"text-lg\">{article.designation}</CardTitle>\n            <CardDescription className=\"flex items-center space-x-2\">\n              <Package className=\"w-4 h-4\" />\n              <span>{article.codeArticle}</span>\n              <span>•</span>\n              <span>{article.categorie}</span>\n              {article.marque && (\n                <>\n                  <span>•</span>\n                  <span>{article.marque}</span>\n                </>\n              )}\n            </CardDescription>\n          </div>\n          <Badge className={getStatusColor(article.stockStatus)}>\n            {getStatusIcon(article.stockStatus)}\n            <span className=\"ml-1 capitalize\">\n              {article.stockStatus === \"critical\" && \"Critique\"}\n              {article.stockStatus === \"low\" && \"Bas\"}\n              {article.stockStatus === \"medium\" && \"Moyen\"}\n              {article.stockStatus === \"good\" && \"Bon\"}\n            </span>\n          </Badge>\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Stock Level */}\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between items-center text-sm\">\n            <span className=\"font-medium\">Stock Actuel</span>\n            <span className=\"text-2xl font-bold\">{article.stockActuel} {article.unite}</span>\n          </div>\n          <div className=\"flex justify-between text-xs text-gray-600\">\n            <span>Seuil min: {article.seuilMinimum || 10}</span>\n            <span>Stock initial: {article.stockInitial}</span>\n          </div>\n          <Progress \n            value={Math.min(100, article.stockPercentage)} \n            className=\"h-2\"\n          />\n        </div>\n\n        {/* Additional Info */}\n        <div className=\"grid grid-cols-2 gap-4 text-sm\">\n          {article.supplier && (\n            <div>\n              <span className=\"text-gray-600\">Fournisseur:</span>\n              <p className=\"font-medium\">{article.supplier.nom}</p>\n            </div>\n          )}\n          {article.prixUnitaire && (\n            <div>\n              <span className=\"text-gray-600\">Prix unitaire:</span>\n              <p className=\"font-medium\">{parseFloat(article.prixUnitaire).toFixed(2)} €</p>\n            </div>\n          )}\n          <div>\n            <span className=\"text-gray-600\">Valeur stock:</span>\n            <p className=\"font-medium\">{article.stockValue.toFixed(2)} €</p>\n          </div>\n          <div>\n            <span className=\"text-gray-600\">Dernière MAJ:</span>\n            <p className=\"font-medium\">\n              {format(new Date(article.createdAt || Date.now()), \"dd/MM/yyyy\", { locale: fr })}\n            </p>\n          </div>\n        </div>\n\n        {/* Recent Movements */}\n        {article.recentMovements.length > 0 && (\n          <div className=\"border-t pt-3\">\n            <h4 className=\"text-sm font-medium mb-2\">Mouvements récents</h4>\n            <div className=\"space-y-1\">\n              {article.recentMovements.slice(0, 3).map((movement, index) => (\n                <div key={index} className=\"flex justify-between items-center text-xs\">\n                  <span className={`px-2 py-1 rounded ${\n                    movement.type === \"entree\" ? \"bg-green-100 text-green-800\" : \"bg-red-100 text-red-800\"\n                  }`}>\n                    {movement.type === \"entree\" ? \"+\" : \"-\"}{Math.abs(movement.quantite)}\n                  </span>\n                  <span className=\"text-gray-600\">\n                    {format(new Date(movement.dateMovement), \"dd/MM\", { locale: fr })}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n\n  if (isLoading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"space-y-4\">\n          {Array(6).fill(0).map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader>\n                <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n                <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  <div className=\"h-3 bg-gray-200 rounded\"></div>\n                  <div className=\"h-3 bg-gray-200 rounded w-5/6\"></div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">État du Stock</h1>\n          <p className=\"text-gray-600\">Vue d'ensemble et gestion des niveaux de stock</p>\n        </div>\n        <Button variant=\"outline\" size=\"sm\">\n          <Download className=\"w-4 h-4 mr-2\" />\n          Exporter\n        </Button>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-gray-600\">Total Articles</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{summaryStats.total}</div>\n          </CardContent>\n        </Card>\n        <Card className=\"border-red-200\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-red-600\">Stock Critique</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-red-600\">{summaryStats.critical}</div>\n          </CardContent>\n        </Card>\n        <Card className=\"border-orange-200\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-orange-600\">Stock Bas</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-orange-600\">{summaryStats.low}</div>\n          </CardContent>\n        </Card>\n        <Card className=\"border-yellow-200\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-yellow-600\">Stock Moyen</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-yellow-600\">{summaryStats.medium}</div>\n          </CardContent>\n        </Card>\n        <Card className=\"border-green-200\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-green-600\">Stock Bon</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">{summaryStats.good}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex flex-wrap gap-4\">\n        <div className=\"flex-1 min-w-[300px]\">\n          <Input\n            placeholder=\"Rechercher par nom, code, marque ou fournisseur...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-full\"\n          />\n        </div>\n        <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n          <SelectTrigger className=\"w-[200px]\">\n            <SelectValue placeholder=\"Toutes catégories\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">Toutes catégories</SelectItem>\n            {categories.map(category => (\n              <SelectItem key={category} value={category}>{category}</SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n        <Select value={stockFilter} onValueChange={setStockFilter}>\n          <SelectTrigger className=\"w-[150px]\">\n            <SelectValue placeholder=\"Tous états\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">Tous états</SelectItem>\n            <SelectItem value=\"critical\">Critique</SelectItem>\n            <SelectItem value=\"low\">Bas</SelectItem>\n            <SelectItem value=\"medium\">Moyen</SelectItem>\n            <SelectItem value=\"good\">Bon</SelectItem>\n          </SelectContent>\n        </Select>\n        <Select value={sortBy} onValueChange={setSortBy}>\n          <SelectTrigger className=\"w-[150px]\">\n            <SelectValue placeholder=\"Trier par\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"name\">Nom</SelectItem>\n            <SelectItem value=\"stock\">Stock</SelectItem>\n            <SelectItem value=\"status\">État</SelectItem>\n            <SelectItem value=\"value\">Valeur</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Stock Status Tabs */}\n      <Tabs defaultValue=\"all\" className=\"space-y-4\">\n        <TabsList className=\"grid w-full grid-cols-5\">\n          <TabsTrigger value=\"all\">Tous ({filteredAndSortedArticles.length})</TabsTrigger>\n          <TabsTrigger value=\"critical\">Critique ({summaryStats.critical})</TabsTrigger>\n          <TabsTrigger value=\"low\">Bas ({summaryStats.low})</TabsTrigger>\n          <TabsTrigger value=\"medium\">Moyen ({summaryStats.medium})</TabsTrigger>\n          <TabsTrigger value=\"good\">Bon ({summaryStats.good})</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"all\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\n            {filteredAndSortedArticles.map((article) => (\n              <ArticleCard key={article.id} article={article} />\n            ))}\n          </div>\n        </TabsContent>\n\n        {[\"critical\", \"low\", \"medium\", \"good\"].map((status) => (\n          <TabsContent key={status} value={status} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\n              {filteredAndSortedArticles\n                .filter((article) => article.stockStatus === status)\n                .map((article) => (\n                  <ArticleCard key={article.id} article={article} />\n                ))}\n            </div>\n          </TabsContent>\n        ))}\n      </Tabs>\n\n      {filteredAndSortedArticles.length === 0 && (\n        <Card>\n          <CardContent className=\"p-6 text-center text-gray-500\">\n            <Package className=\"w-12 h-12 mx-auto mb-4 text-gray-400\" />\n            <p className=\"text-lg font-medium mb-2\">Aucun article trouvé</p>\n            <p>Essayez de modifier vos critères de recherche</p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}","size_bytes":16485},"PROJECT_PROMPT.md":{"content":"# StockCéramique - Next-Generation Smart Inventory Management System\n\n## System Overview\nStockCéramique is an enterprise-grade, AI-powered inventory management system specifically designed for ceramic spare parts and industrial components. This cutting-edge application combines traditional inventory control with advanced predictive analytics, mobile-first design, and Industry 4.0 integration capabilities. The system provides complete stock control, intelligent supplier management, automated purchase workflows, and comprehensive business intelligence reporting.\n\n## Key Features & Modules\n\n### 1. **Dashboard & Analytics**\n- Real-time inventory overview with key performance indicators\n- Low stock alerts and inventory health monitoring\n- Visual charts and statistics for quick decision making\n- Recent activity tracking and notifications\n\n### 2. **Inventory Management (Articles)**\n- Complete spare parts catalog with detailed specifications\n- Stock level tracking with minimum quantity alerts\n- Barcode generation and scanning capabilities\n- Price history and cost analysis\n- Category and classification management\n\n### 3. **Supplier Management**\n- Comprehensive supplier database with contact information\n- Payment terms and delivery conditions tracking\n- Supplier performance metrics and rating system\n- Purchase history and relationship management\n\n### 4. **Purchase Request Workflow**\n- Multi-stage approval process (En Attente, Approuvé, Commandé, Refusé)\n- Request tracking from initiation to completion\n- Budget approval and authorization controls\n- Purchase order generation and management\n\n### 5. **Reception Management**\n- Incoming inventory processing and validation\n- Quality control checkpoints and inspection records\n- Delivery confirmation and discrepancy handling\n- Automatic stock level updates upon reception\n\n### 6. **Outbound Operations**\n- Stock consumption tracking with detailed reasons\n- Work order and maintenance request integration\n- Return processing and inventory adjustments\n- Movement history and audit trails\n\n### 7. **Reporting & Analytics**\n- Comprehensive inventory reports and stock analysis\n- Purchase performance and supplier evaluation reports\n- Movement tracking and usage pattern analysis\n- Export capabilities (PDF, Excel) for compliance and auditing\n\n### 8. **Data Management & Business Intelligence**\n- Bulk import/export functionality for large datasets\n- Backup and restore capabilities\n- Data validation and integrity checks\n- Integration-ready API for external systems\n- **Interactive Charts & Graphs**: Real-time visual analytics with drill-down capabilities\n- **Custom Dashboard Builder**: Drag-and-drop dashboard creation with 20+ chart types\n- **Executive Summary Reports**: High-level KPIs with visual scorecards and gauges\n- **Trend Analysis**: Time-series charts with predictive projections and forecasting\n- **Heat Maps**: Visual representation of warehouse activity and supplier performance\n\n### 9. **Advanced Features & Strategic Enhancements**\n\n#### **AI-Powered Intelligence**\n- **Smart Demand Forecasting**: Historical data analysis to predict future needs\n- **AI-Powered Reorder Points**: Dynamic minimum quantities based on usage patterns\n- **Anomaly Detection**: Alerts for unusual consumption patterns\n- **Price Optimization**: ML algorithms for optimal pricing opportunities\n- **Supplier Recommendation Engine**: Pattern-based supplier suggestions\n\n#### **Mobile & Modern Experience**\n- **Progressive Web App (PWA)**: Offline capability for warehouse operations\n- **Barcode Scanner Integration**: Native mobile camera scanning\n- **Voice Commands**: Hands-free inventory operations\n- **Push Notifications**: Real-time alerts for critical stock levels\n- **Field Technician App**: Simplified interface for maintenance teams\n\n#### **Advanced Warehouse Management**\n- **Interactive Warehouse Maps**: Visual storage locations with GPS coordinates\n- **Bin Location Optimization**: AI-suggested optimal placement\n- **Pick Path Optimization**: Route planning for efficient inventory picking\n- **Cycle Counting Workflows**: Automated inventory audit scheduling\n- **Multi-Location Management**: Support for multiple warehouses\n\n#### **Quality Control & Compliance**\n- **Certificate Management**: Track quality certificates and expiration dates\n- **Batch/Lot Tracking**: Complete traceability from supplier to installation\n- **Quality Inspection Workflows**: Customizable inspection checklists\n- **Supplier Quality Scorecards**: Track defect rates and quality metrics\n- **Compliance Dashboard**: Monitor regulatory requirements\n\n#### **Financial Integration**\n- **Budget Management**: Department-wise budget allocation and tracking\n- **Cost Center Attribution**: Link costs to specific projects\n- **Price Alert System**: Supplier price change notifications\n- **Carrying Cost Calculator**: Total cost of ownership analysis\n- **ROI Analytics**: Return on investment tracking\n\n#### **Supplier Portal & Collaboration**\n- **Supplier Self-Service Portal**: Catalog and pricing updates\n- **RFQ Management**: Streamlined quote comparison\n- **Contract Management**: Track agreements and renewal dates\n- **Supplier Risk Assessment**: Monitor financial health\n- **Vendor Collaboration Tools**: Shared workspaces\n\n#### **Integration & Automation**\n- **ERP Integration**: Connect with SAP, Oracle, or other enterprise systems\n- **CMMS Integration**: Link with maintenance management systems\n- **E-Procurement Platforms**: Integrate with Ariba, Coupa\n- **API Marketplace**: Pre-built connectors for industrial software\n- **Automated Purchase Orders**: Generate POs at reorder points\n\n#### **Environmental & Sustainability**\n- **Carbon Footprint Tracking**: Monitor environmental impact\n- **Recycling Management**: Track ceramic waste and opportunities\n- **Sustainability Scorecards**: Evaluate suppliers on environmental practices\n- **Green Supplier Discovery**: Identify eco-friendly alternatives\n- **Circular Economy Features**: Track refurbishment and reuse\n\n#### **Industry 4.0 Integration**\n- **IoT Sensor Integration**: Connect with smart shelves and storage sensors\n- **AR/VR Support**: Augmented reality for warehouse navigation\n- **Digital Twin**: Virtual representation of inventory operations\n- **Blockchain Integration**: Immutable supply chain tracking\n\n## Technical Architecture\n\n### Frontend\n- **Framework**: React 18 with TypeScript\n- **UI Components**: Shadcn/ui with Radix UI primitives\n- **Styling**: Tailwind CSS with Microsoft-inspired design system\n- **State Management**: TanStack Query for server state\n- **Routing**: Wouter for client-side navigation\n- **Forms**: React Hook Form with Zod validation\n\n### Backend\n- **Runtime**: Node.js with Express.js\n- **Database**: PostgreSQL with Drizzle ORM\n- **Validation**: Shared Zod schemas between client/server\n- **API**: RESTful endpoints with comprehensive error handling\n\n### Key Technical Features\n- **Real-time Updates**: Live inventory tracking and notifications\n- **Type Safety**: End-to-end TypeScript for reliability\n- **Responsive Design**: Works seamlessly on desktop and mobile devices\n- **Performance Optimized**: Fast loading with efficient data caching\n- **Security**: Input validation and secure database operations\n- **Accessibility**: WCAG compliant UI components\n\n## Business Value & ROI\n\n### For Operations Teams\n- **80% reduction** in stockout incidents through AI-powered predictions\n- **60% decrease** in manual data entry with advanced automation\n- **50% faster** purchase request processing with streamlined workflows\n- **25% improvement** in inventory turnover rates\n- Real-time mobile access with offline capabilities for uninterrupted operations\n\n### For Management\n- **15% reduction** in carrying costs through optimized inventory levels\n- **10% supplier cost savings** through enhanced negotiation intelligence\n- **70% decrease** in emergency purchases via predictive analytics\n- **95% budget adherence** with advanced financial tracking\n- Executive dashboards with real-time KPIs and trend analysis\n\n### For Maintenance Teams\n- Predictive maintenance integration with equipment schedules\n- Quick access to spare parts with AR-guided warehouse navigation\n- Historical usage data for data-driven maintenance planning\n- Mobile-first interface for field technician efficiency\n- Integration with CMMS systems for seamless workflow\n\n### For Finance & Procurement\n- Total cost of ownership visibility including storage and obsolescence\n- Automated budget allocation and tracking by department/project\n- Supplier risk assessment and alternative sourcing recommendations\n- ROI analytics for inventory optimization initiatives\n- Compliance monitoring with automated regulatory reporting\n\n## Usage Scenarios\n\n1. **Daily Operations**: Monitor stock levels, process incoming/outgoing inventory, handle urgent purchase requests\n2. **Weekly Planning**: Review low stock items, analyze supplier performance, generate procurement reports\n3. **Monthly Reviews**: Comprehensive inventory analysis, cost optimization, supplier relationship management\n4. **Quarterly Audits**: Full inventory reconciliation, compliance reporting, system performance review\n\n## Implementation Roadmap\n\n### **Phase 1 (Months 1-3): Foundation Enhancement**\n- Mobile PWA development with offline capabilities\n- Advanced search and filtering with AI-powered queries\n- Basic predictive analytics for demand forecasting\n- Enhanced barcode scanning and voice commands\n\n### **Phase 2 (Months 4-6): Integration Focus**\n- ERP integration framework (SAP, Oracle)\n- API development for external systems\n- Supplier portal with self-service capabilities\n- Quality control workflows with inspection checklists\n\n### **Phase 3 (Months 7-9): Advanced Intelligence**\n- AI-powered demand forecasting and anomaly detection\n- Advanced warehouse management with interactive maps\n- Comprehensive business intelligence suite\n- Environmental sustainability tracking and reporting\n\n### **Phase 4 (Months 10-12): Industry 4.0 Ready**\n- IoT integration with smart sensors\n- AR/VR capabilities for warehouse operations\n- Machine learning optimization features\n- Blockchain integration for supply chain transparency\n\n## Success Metrics\n\n### **Operational Efficiency Targets**\n- 80% reduction in stockout incidents\n- 60% decrease in manual data entry time\n- 50% faster purchase request processing\n- 25% improvement in inventory turnover rate\n\n### **Cost Optimization Goals**\n- 15% reduction in carrying costs\n- 10% supplier cost savings\n- 70% decrease in emergency purchases\n- 95% budget accuracy and adherence\n\n### **User Experience Objectives**\n- 85% user adoption rate within 3 months\n- 40% reduction in training time for new users\n- Sub-2 second page load times\n- 50% of transactions via mobile interface\n\n## Getting Started\n\nThe system is ready for immediate deployment with:\n- Modern, intuitive interface with Microsoft-inspired design\n- Comprehensive module ecosystem for all inventory operations\n- Scalable architecture supporting growth from startup to enterprise\n- Extensive API capabilities for seamless integration\n- Progressive enhancement roadmap for continuous improvement\n\nThis next-generation solution represents the future of inventory management, combining proven operational excellence with cutting-edge technology to deliver measurable business value and competitive advantage.","size_bytes":11379},"client/src/components/AdvancedSearch.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, Filter, X, TrendingUp, AlertTriangle } from \"lucide-react\";\nimport { WindowsCard, WindowsCardContent } from \"@/components/WindowsCard\";\n\ninterface SearchFilters {\n  query: string;\n  category: string;\n  stockLevel: string;\n  priceRange: string;\n  supplier: string;\n  status: string;\n}\n\ninterface AdvancedSearchProps {\n  onFiltersChange: (filters: SearchFilters) => void;\n  categories?: string[];\n  suppliers?: Array<{ id: string; nom: string }>;\n  showAnalytics?: boolean;\n}\n\nexport default function AdvancedSearch({ \n  onFiltersChange, \n  categories = [], \n  suppliers = [],\n  showAnalytics = false \n}: AdvancedSearchProps) {\n  const [filters, setFilters] = useState<SearchFilters>({\n    query: \"\",\n    category: \"\",\n    stockLevel: \"\",\n    priceRange: \"\",\n    supplier: \"\",\n    status: \"\"\n  });\n\n  const [showAdvanced, setShowAdvanced] = useState(false);\n  const [searchSuggestions, setSearchSuggestions] = useState<string[]>([]);\n\n  useEffect(() => {\n    onFiltersChange(filters);\n  }, [filters, onFiltersChange]);\n\n  // AI-powered search suggestions based on query\n  useEffect(() => {\n    if (filters.query.length > 2) {\n      const suggestions = generateSmartSuggestions(filters.query, categories);\n      setSearchSuggestions(suggestions);\n    } else {\n      setSearchSuggestions([]);\n    }\n  }, [filters.query, categories]);\n\n  const generateSmartSuggestions = (query: string, categories: string[]): string[] => {\n    const suggestions: string[] = [];\n    const lowercaseQuery = query.toLowerCase();\n\n    // Suggest categories that match\n    categories.forEach(cat => {\n      if (cat.toLowerCase().includes(lowercaseQuery)) {\n        suggestions.push(`Catégorie: ${cat}`);\n      }\n    });\n\n    // Smart search patterns\n    if (lowercaseQuery.includes('stock') || lowercaseQuery.includes('bas')) {\n      suggestions.push(\"Articles en stock bas\");\n    }\n    if (lowercaseQuery.includes('cher') || lowercaseQuery.includes('prix')) {\n      suggestions.push(\"Articles les plus chers\");\n    }\n    if (lowercaseQuery.includes('recent') || lowercaseQuery.includes('nouveau')) {\n      suggestions.push(\"Articles récents\");\n    }\n\n    return suggestions.slice(0, 5);\n  };\n\n  const handleFilterChange = (key: keyof SearchFilters, value: string) => {\n    setFilters(prev => ({ ...prev, [key]: value }));\n  };\n\n  const clearFilters = () => {\n    setFilters({\n      query: \"\",\n      category: \"\",\n      stockLevel: \"\",\n      priceRange: \"\",\n      supplier: \"\",\n      status: \"\"\n    });\n  };\n\n  const getActiveFiltersCount = () => {\n    return Object.values(filters).filter(value => value !== \"\").length;\n  };\n\n  const getFilterBadges = () => {\n    const badges: Array<{ key: keyof SearchFilters; label: string; value: string }> = [];\n    \n    if (filters.category) badges.push({ key: 'category', label: 'Catégorie', value: filters.category });\n    if (filters.stockLevel) badges.push({ key: 'stockLevel', label: 'Stock', value: filters.stockLevel });\n    if (filters.priceRange) badges.push({ key: 'priceRange', label: 'Prix', value: filters.priceRange });\n    if (filters.supplier) badges.push({ key: 'supplier', label: 'Fournisseur', value: suppliers.find(s => s.id === filters.supplier)?.nom || filters.supplier });\n    if (filters.status) badges.push({ key: 'status', label: 'Statut', value: filters.status });\n\n    return badges;\n  };\n\n  return (\n    <WindowsCard className=\"mb-6\">\n      <WindowsCardContent className=\"p-6\">\n        <div className=\"space-y-4\">\n          {/* Main Search Bar */}\n          <div className=\"relative\">\n            <div className=\"relative flex items-center space-x-2\">\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                <Input\n                  placeholder=\"Rechercher par code, désignation, marque... (ex: 'stock bas', 'céramique', 'roulement')\"\n                  value={filters.query}\n                  onChange={(e) => handleFilterChange('query', e.target.value)}\n                  className=\"pl-10 pr-4 py-2 text-sm\"\n                />\n              </div>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setShowAdvanced(!showAdvanced)}\n                className=\"flex items-center space-x-2\"\n              >\n                <Filter className=\"w-4 h-4\" />\n                <span>Filtres</span>\n                {getActiveFiltersCount() > 0 && (\n                  <Badge variant=\"secondary\" className=\"text-xs\">\n                    {getActiveFiltersCount()}\n                  </Badge>\n                )}\n              </Button>\n              {getActiveFiltersCount() > 0 && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={clearFilters}\n                  className=\"text-red-600 hover:text-red-700\"\n                >\n                  <X className=\"w-4 h-4\" />\n                </Button>\n              )}\n            </div>\n\n            {/* Search Suggestions */}\n            {searchSuggestions.length > 0 && (\n              <div className=\"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10\">\n                {searchSuggestions.map((suggestion, index) => (\n                  <button\n                    key={index}\n                    className=\"w-full text-left px-3 py-2 hover:bg-gray-50 text-sm border-b border-gray-100 last:border-b-0\"\n                    onClick={() => handleFilterChange('query', suggestion)}\n                  >\n                    <div className=\"flex items-center space-x-2\">\n                      <Search className=\"w-3 h-3 text-gray-400\" />\n                      <span>{suggestion}</span>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Active Filter Badges */}\n          {getFilterBadges().length > 0 && (\n            <div className=\"flex flex-wrap gap-2\">\n              {getFilterBadges().map((badge) => (\n                <Badge\n                  key={badge.key}\n                  variant=\"secondary\"\n                  className=\"flex items-center space-x-1 px-2 py-1\"\n                >\n                  <span className=\"text-xs\">{badge.label}: {badge.value}</span>\n                  <X\n                    className=\"w-3 h-3 cursor-pointer hover:text-red-600\"\n                    onClick={() => handleFilterChange(badge.key, \"all\")}\n                  />\n                </Badge>\n              ))}\n            </div>\n          )}\n\n          {/* Advanced Filters */}\n          {showAdvanced && (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pt-4 border-t border-gray-200\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Catégorie</label>\n                <Select value={filters.category} onValueChange={(value) => handleFilterChange('category', value)}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Toutes catégories\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Toutes catégories</SelectItem>\n                    {categories.map((category) => (\n                      <SelectItem key={category} value={category}>\n                        {category}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Niveau de Stock</label>\n                <Select value={filters.stockLevel} onValueChange={(value) => handleFilterChange('stockLevel', value)}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Tous niveaux\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Tous niveaux</SelectItem>\n                    <SelectItem value=\"critical\">\n                      <div className=\"flex items-center space-x-2\">\n                        <AlertTriangle className=\"w-4 h-4 text-red-500\" />\n                        <span>Stock critique</span>\n                      </div>\n                    </SelectItem>\n                    <SelectItem value=\"low\">\n                      <div className=\"flex items-center space-x-2\">\n                        <AlertTriangle className=\"w-4 h-4 text-amber-500\" />\n                        <span>Stock bas</span>\n                      </div>\n                    </SelectItem>\n                    <SelectItem value=\"normal\">\n                      <div className=\"flex items-center space-x-2\">\n                        <TrendingUp className=\"w-4 h-4 text-green-500\" />\n                        <span>Stock normal</span>\n                      </div>\n                    </SelectItem>\n                    <SelectItem value=\"high\">Stock élevé</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Fourchette de Prix</label>\n                <Select value={filters.priceRange} onValueChange={(value) => handleFilterChange('priceRange', value)}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Tous prix\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Tous prix</SelectItem>\n                    <SelectItem value=\"0-10\">0€ - 10€</SelectItem>\n                    <SelectItem value=\"10-50\">10€ - 50€</SelectItem>\n                    <SelectItem value=\"50-100\">50€ - 100€</SelectItem>\n                    <SelectItem value=\"100-500\">100€ - 500€</SelectItem>\n                    <SelectItem value=\"500+\">500€+</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Fournisseur</label>\n                <Select value={filters.supplier} onValueChange={(value) => handleFilterChange('supplier', value)}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Tous fournisseurs\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Tous fournisseurs</SelectItem>\n                    {suppliers.map((supplier) => (\n                      <SelectItem key={supplier.id} value={supplier.id}>\n                        {supplier.nom}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Statut</label>\n                <Select value={filters.status} onValueChange={(value) => handleFilterChange('status', value)}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Tous statuts\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Tous statuts</SelectItem>\n                    <SelectItem value=\"active\">Actif</SelectItem>\n                    <SelectItem value=\"discontinued\">Discontinué</SelectItem>\n                    <SelectItem value=\"new\">Nouveau</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n          )}\n\n          {/* Quick Analytics Insights */}\n          {showAnalytics && filters.query && (\n            <div className=\"pt-4 border-t border-gray-200\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"bg-blue-50 p-3 rounded-sm\">\n                  <div className=\"flex items-center space-x-2\">\n                    <TrendingUp className=\"w-4 h-4 text-blue-600\" />\n                    <span className=\"text-sm font-medium text-blue-900\">Recherche Intelligente</span>\n                  </div>\n                  <p className=\"text-xs text-blue-700 mt-1\">\n                    Utilisez des termes comme \"stock bas\", \"cher\", \"récent\" pour des suggestions automatiques\n                  </p>\n                </div>\n                \n                <div className=\"bg-green-50 p-3 rounded-sm\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Search className=\"w-4 h-4 text-green-600\" />\n                    <span className=\"text-sm font-medium text-green-900\">Recherche Floue</span>\n                  </div>\n                  <p className=\"text-xs text-green-700 mt-1\">\n                    Pas besoin d'orthographe exacte - nous trouvons les articles similaires\n                  </p>\n                </div>\n\n                <div className=\"bg-amber-50 p-3 rounded-sm\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Filter className=\"w-4 h-4 text-amber-600\" />\n                    <span className=\"text-sm font-medium text-amber-900\">Filtres Combinés</span>\n                  </div>\n                  <p className=\"text-xs text-amber-700 mt-1\">\n                    Combinez plusieurs filtres pour des résultats précis\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </WindowsCardContent>\n    </WindowsCard>\n  );\n}","size_bytes":13801},"client/src/components/BulkImportExport.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { WindowsCard, WindowsCardContent, WindowsCardHeader } from \"@/components/WindowsCard\";\nimport { WindowsButton } from \"@/components/WindowsButton\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { \n  Upload, \n  Download, \n  FileSpreadsheet, \n  FileText, \n  AlertTriangle, \n  CheckCircle,\n  X\n} from \"lucide-react\";\nimport * as XLSX from 'xlsx';\nimport Papa from 'papaparse';\n\ninterface BulkImportExportProps {\n  entityType: 'articles' | 'suppliers' | 'requestors';\n  onClose?: () => void;\n}\n\ninterface ImportResult {\n  success: number;\n  errors: Array<{ row: number; error: string; data: any }>;\n  total: number;\n}\n\nexport default function BulkImportExport({ entityType, onClose }: BulkImportExportProps) {\n  const [importing, setImporting] = useState(false);\n  const [exporting, setExporting] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [importResults, setImportResults] = useState<ImportResult | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Template data for different entity types\n  const getTemplateData = (): any[] => {\n    switch (entityType) {\n      case 'articles':\n        return [\n          {\n            codeArticle: 'ART001',\n            designation: 'Exemple Article',\n            categorie: 'Électronique',\n            marque: 'Samsung',\n            reference: 'REF123',\n            stockInitial: 100,\n            unite: 'pcs',\n            prixUnitaire: 25.50,\n            seuilMinimum: 10,\n            fournisseurId: 'FOURNISSEUR_ID'\n          }\n        ];\n      case 'suppliers':\n        return [\n          {\n            nom: 'Exemple Fournisseur',\n            contact: 'Jean Dupont',\n            telephone: '+33123456789',\n            email: 'contact@fournisseur.com',\n            adresse: '123 Rue de la Paix, Paris',\n            conditionsPaiement: '30 jours',\n            delaiLivraison: 7\n          }\n        ];\n      case 'requestors':\n        return [\n          {\n            nom: 'Dupont',\n            prenom: 'Jean',\n            departement: 'Production',\n            poste: 'Superviseur',\n            email: 'jean.dupont@entreprise.com',\n            telephone: '+33987654321'\n          }\n        ];\n      default:\n        return [];\n    }\n  };\n\n  const downloadTemplate = (format: 'csv' | 'xlsx') => {\n    const data = getTemplateData();\n    const filename = `template_${entityType}.${format}`;\n\n    if (format === 'csv') {\n      const csv = Papa.unparse(data);\n      const blob = new Blob([csv], { type: 'text/csv' });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      a.click();\n      window.URL.revokeObjectURL(url);\n    } else {\n      const ws = XLSX.utils.json_to_sheet(data);\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws, entityType);\n      XLSX.writeFile(wb, filename);\n    }\n\n    toast({\n      title: \"Modèle téléchargé\",\n      description: `Le modèle ${format.toUpperCase()} a été téléchargé avec succès.`,\n    });\n  };\n\n  const exportData = useMutation({\n    mutationFn: async (format: 'csv' | 'xlsx' | 'pdf') => {\n      const response = await fetch(`/api/${entityType}/export?format=${format}`, {\n        method: 'GET',\n      });\n      \n      if (!response.ok) {\n        throw new Error('Erreur lors de l\\'export');\n      }\n\n      const contentType = response.headers.get('content-type');\n      if (format === 'pdf' || contentType?.includes('application/pdf')) {\n        return response.blob();\n      } else {\n        return response.text();\n      }\n    },\n    onSuccess: (data, format) => {\n      const filename = `export_${entityType}_${new Date().toISOString().split('T')[0]}.${format}`;\n      \n      if (format === 'pdf') {\n        const blob = new Blob([data as Blob], { type: 'application/pdf' });\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = filename;\n        a.click();\n        window.URL.revokeObjectURL(url);\n      } else {\n        const blob = new Blob([data as string], { \n          type: format === 'csv' ? 'text/csv' : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' \n        });\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = filename;\n        a.click();\n        window.URL.revokeObjectURL(url);\n      }\n\n      toast({\n        title: \"Export réussi\",\n        description: `Les données ont été exportées en ${format.toUpperCase()}.`,\n      });\n      setExporting(false);\n    },\n    onError: (error) => {\n      toast({\n        title: \"Erreur d'export\",\n        description: \"Une erreur s'est produite lors de l'export.\",\n        variant: \"destructive\",\n      });\n      setExporting(false);\n    }\n  });\n\n  const processFile = async (file: File) => {\n    return new Promise<any[]>((resolve, reject) => {\n      const fileExtension = file.name.split('.').pop()?.toLowerCase();\n\n      if (fileExtension === 'csv') {\n        Papa.parse(file, {\n          header: true,\n          skipEmptyLines: true,\n          complete: (results) => {\n            resolve(results.data);\n          },\n          error: (error) => {\n            reject(error);\n          }\n        });\n      } else if (fileExtension === 'xlsx' || fileExtension === 'xls') {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          try {\n            const data = new Uint8Array(e.target?.result as ArrayBuffer);\n            const workbook = XLSX.read(data, { type: 'array' });\n            const sheetName = workbook.SheetNames[0];\n            const worksheet = workbook.Sheets[sheetName];\n            const jsonData = XLSX.utils.sheet_to_json(worksheet);\n            resolve(jsonData);\n          } catch (error) {\n            reject(error);\n          }\n        };\n        reader.readAsArrayBuffer(file);\n      } else {\n        reject(new Error('Format de fichier non supporté. Utilisez CSV ou XLSX.'));\n      }\n    });\n  };\n\n  const importData = useMutation({\n    mutationFn: async (data: any[]): Promise<ImportResult> => {\n      const response = await fetch(`/api/${entityType}/bulk-import`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ data }),\n      });\n      \n      if (!response.ok) {\n        throw new Error('Import failed');\n      }\n      \n      return response.json();\n    },\n    onSuccess: (result: ImportResult) => {\n      setImportResults(result);\n      setImporting(false);\n      setProgress(100);\n      \n      queryClient.invalidateQueries({ queryKey: [`/api/${entityType}`] });\n      \n      toast({\n        title: \"Import terminé\",\n        description: `${result.success}/${result.total} enregistrements importés avec succès.`,\n        variant: result.errors.length > 0 ? \"destructive\" : \"default\",\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: \"Erreur d'import\",\n        description: \"Une erreur s'est produite lors de l'import.\",\n        variant: \"destructive\",\n      });\n      setImporting(false);\n      setProgress(0);\n    }\n  });\n\n  const handleFileImport = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    setImporting(true);\n    setProgress(10);\n    setImportResults(null);\n\n    try {\n      setProgress(30);\n      const data = await processFile(file);\n      setProgress(60);\n      \n      if (data.length === 0) {\n        throw new Error('Le fichier est vide ou ne contient pas de données valides.');\n      }\n\n      setProgress(80);\n      importData.mutate(data);\n    } catch (error) {\n      toast({\n        title: \"Erreur de lecture\",\n        description: error instanceof Error ? error.message : \"Erreur lors de la lecture du fichier.\",\n        variant: \"destructive\",\n      });\n      setImporting(false);\n      setProgress(0);\n    }\n\n    // Reset file input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const getEntityDisplayName = () => {\n    switch (entityType) {\n      case 'articles': return 'Articles';\n      case 'suppliers': return 'Fournisseurs';\n      case 'requestors': return 'Demandeurs';\n      default: return entityType;\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-2xl font-semibold text-windows-gray-dark\">\n          Import/Export - {getEntityDisplayName()}\n        </h2>\n        {onClose && (\n          <WindowsButton variant=\"outline\" onClick={onClose} size=\"sm\">\n            <X className=\"w-4 h-4\" />\n          </WindowsButton>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Import Section */}\n        <WindowsCard>\n          <WindowsCardHeader>\n            <div className=\"flex items-center space-x-2\">\n              <Upload className=\"w-5 h-5 text-windows-blue\" />\n              <h3 className=\"text-lg font-semibold text-windows-gray-dark\">Import en Masse</h3>\n            </div>\n          </WindowsCardHeader>\n          <WindowsCardContent className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"import-file\">Sélectionner un fichier (CSV, XLSX)</Label>\n              <Input\n                id=\"import-file\"\n                type=\"file\"\n                accept=\".csv,.xlsx,.xls\"\n                onChange={handleFileImport}\n                disabled={importing}\n                ref={fileInputRef}\n                className=\"mt-1\"\n              />\n            </div>\n\n            {importing && (\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span>Import en cours...</span>\n                  <span>{progress}%</span>\n                </div>\n                <Progress value={progress} className=\"h-2\" />\n              </div>\n            )}\n\n            <div className=\"space-y-2\">\n              <h4 className=\"font-medium text-windows-gray-dark\">Télécharger un modèle</h4>\n              <div className=\"flex space-x-2\">\n                <WindowsButton\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => downloadTemplate('csv')}\n                  className=\"flex items-center space-x-1\"\n                >\n                  <FileText className=\"w-4 h-4\" />\n                  <span>CSV</span>\n                </WindowsButton>\n                <WindowsButton\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => downloadTemplate('xlsx')}\n                  className=\"flex items-center space-x-1\"\n                >\n                  <FileSpreadsheet className=\"w-4 h-4\" />\n                  <span>Excel</span>\n                </WindowsButton>\n              </div>\n            </div>\n          </WindowsCardContent>\n        </WindowsCard>\n\n        {/* Export Section */}\n        <WindowsCard>\n          <WindowsCardHeader>\n            <div className=\"flex items-center space-x-2\">\n              <Download className=\"w-5 h-5 text-windows-green\" />\n              <h3 className=\"text-lg font-semibold text-windows-gray-dark\">Export des Données</h3>\n            </div>\n          </WindowsCardHeader>\n          <WindowsCardContent className=\"space-y-4\">\n            <p className=\"text-sm text-windows-gray\">\n              Exportez toutes vos données dans le format de votre choix.\n            </p>\n\n            <div className=\"space-y-2\">\n              <h4 className=\"font-medium text-windows-gray-dark\">Formats disponibles</h4>\n              <div className=\"grid grid-cols-1 gap-2\">\n                <WindowsButton\n                  variant=\"outline\"\n                  onClick={() => {\n                    setExporting(true);\n                    exportData.mutate('csv');\n                  }}\n                  disabled={exporting}\n                  className=\"flex items-center justify-start space-x-2 p-3\"\n                >\n                  <FileText className=\"w-4 h-4\" />\n                  <div className=\"text-left\">\n                    <p className=\"font-medium\">CSV</p>\n                    <p className=\"text-xs text-windows-gray\">Compatible avec Excel, LibreOffice</p>\n                  </div>\n                </WindowsButton>\n\n                <WindowsButton\n                  variant=\"outline\"\n                  onClick={() => {\n                    setExporting(true);\n                    exportData.mutate('xlsx');\n                  }}\n                  disabled={exporting}\n                  className=\"flex items-center justify-start space-x-2 p-3\"\n                >\n                  <FileSpreadsheet className=\"w-4 h-4\" />\n                  <div className=\"text-left\">\n                    <p className=\"font-medium\">Excel</p>\n                    <p className=\"text-xs text-windows-gray\">Format natif Excel (.xlsx)</p>\n                  </div>\n                </WindowsButton>\n\n                <WindowsButton\n                  variant=\"outline\"\n                  onClick={() => {\n                    setExporting(true);\n                    exportData.mutate('pdf');\n                  }}\n                  disabled={exporting}\n                  className=\"flex items-center justify-start space-x-2 p-3\"\n                >\n                  <FileText className=\"w-4 h-4\" />\n                  <div className=\"text-left\">\n                    <p className=\"font-medium\">PDF</p>\n                    <p className=\"text-xs text-windows-gray\">Document imprimable</p>\n                  </div>\n                </WindowsButton>\n              </div>\n            </div>\n          </WindowsCardContent>\n        </WindowsCard>\n      </div>\n\n      {/* Import Results */}\n      {importResults && (\n        <WindowsCard>\n          <WindowsCardHeader>\n            <div className=\"flex items-center space-x-2\">\n              {importResults.errors.length === 0 ? (\n                <CheckCircle className=\"w-5 h-5 text-windows-green\" />\n              ) : (\n                <AlertTriangle className=\"w-5 h-5 text-windows-amber\" />\n              )}\n              <h3 className=\"text-lg font-semibold text-windows-gray-dark\">Résultats de l'Import</h3>\n            </div>\n          </WindowsCardHeader>\n          <WindowsCardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-3 gap-4 text-center\">\n              <div className=\"p-3 bg-green-50 rounded-sm\">\n                <div className=\"text-2xl font-bold text-windows-green\">{importResults.success}</div>\n                <div className=\"text-sm text-windows-gray\">Succès</div>\n              </div>\n              <div className=\"p-3 bg-red-50 rounded-sm\">\n                <div className=\"text-2xl font-bold text-windows-red\">{importResults.errors.length}</div>\n                <div className=\"text-sm text-windows-gray\">Erreurs</div>\n              </div>\n              <div className=\"p-3 bg-blue-50 rounded-sm\">\n                <div className=\"text-2xl font-bold text-windows-blue\">{importResults.total}</div>\n                <div className=\"text-sm text-windows-gray\">Total</div>\n              </div>\n            </div>\n\n            {importResults.errors.length > 0 && (\n              <div>\n                <h4 className=\"font-medium text-windows-gray-dark mb-2\">Erreurs détectées :</h4>\n                <div className=\"max-h-40 overflow-y-auto space-y-2\">\n                  {importResults.errors.slice(0, 10).map((error, index) => (\n                    <div key={index} className=\"p-2 bg-red-50 rounded-sm text-sm\">\n                      <span className=\"font-medium\">Ligne {error.row}:</span> {error.error}\n                    </div>\n                  ))}\n                  {importResults.errors.length > 10 && (\n                    <div className=\"text-sm text-windows-gray\">\n                      ... et {importResults.errors.length - 10} autres erreurs\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </WindowsCardContent>\n        </WindowsCard>\n      )}\n    </div>\n  );\n}","size_bytes":16576},"client/src/components/FluentChart.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, LineChart, Line, Cell } from \"recharts\";\nimport { motion } from \"framer-motion\";\nimport { WindowsCard, WindowsCardContent } from \"@/components/WindowsCard\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { TrendingUp, TrendingDown, BarChart3, Activity, Download } from \"lucide-react\";\n\ninterface ChartData {\n  [key: string]: any;\n}\n\ninterface FluentChartProps {\n  data: ChartData[];\n  title: string;\n  description?: string;\n  type: 'line' | 'bar' | 'prediction';\n  xAxisKey: string;\n  yAxisKey: string;\n  colors?: string[];\n  showAnalytics?: boolean;\n  onExport?: (format: 'png' | 'csv' | 'pdf') => void;\n}\n\n// Windows 11 Fluent Design color palette\nconst FLUENT_COLORS = {\n  blue: '#0078d4',\n  green: '#107c10', \n  yellow: '#ffb900',\n  red: '#d13438',\n  purple: '#881798',\n  teal: '#00b7c3',\n  orange: '#ff8c00',\n  pink: '#e3008c'\n};\n\nconst CHART_COLORS = [\n  FLUENT_COLORS.blue,\n  FLUENT_COLORS.green,\n  FLUENT_COLORS.yellow,\n  FLUENT_COLORS.red,\n  FLUENT_COLORS.purple,\n  FLUENT_COLORS.teal,\n  FLUENT_COLORS.orange,\n  FLUENT_COLORS.pink\n];\n\nexport default function FluentChart({\n  data,\n  title,\n  description,\n  type,\n  xAxisKey,\n  yAxisKey,\n  colors = CHART_COLORS,\n  showAnalytics = true,\n  onExport\n}: FluentChartProps) {\n  const [isHovered, setIsHovered] = useState(false);\n\n  // Analytics calculations\n  const analytics = useMemo(() => {\n    if (!data || data.length === 0) return null;\n\n    const values = data.map(item => Number(item[yAxisKey]) || 0);\n    const total = values.reduce((sum, val) => sum + val, 0);\n    const average = total / values.length;\n    const max = Math.max(...values);\n    const min = Math.min(...values);\n    \n    // Trend calculation\n    const trend = values.length >= 2 ? \n      (values[values.length - 1] - values[0]) / values.length : 0;\n\n    return {\n      total,\n      average,\n      max,\n      min,\n      trend,\n      count: data.length\n    };\n  }, [data, yAxisKey]);\n\n  const formatValue = (value: number) => {\n    if (value >= 1000000) {\n      return `${(value / 1000000).toFixed(1)}M`;\n    } else if (value >= 1000) {\n      return `${(value / 1000).toFixed(1)}K`;\n    }\n    return value.toFixed(0);\n  };\n\n  // Custom Fluent Design Tooltip\n  const CustomTooltip = ({ active, payload, label }: any) => {\n    if (active && payload && payload.length) {\n      return (\n        <motion.div\n          initial={{ opacity: 0, scale: 0.9, y: 10 }}\n          animate={{ opacity: 1, scale: 1, y: 0 }}\n          transition={{ duration: 0.15, ease: \"easeOut\" }}\n          className=\"bg-white/90 backdrop-blur-md border border-gray-200/50 rounded-xl p-4 shadow-xl\"\n          style={{\n            background: 'rgba(255, 255, 255, 0.9)',\n            backdropFilter: 'blur(20px)',\n            boxShadow: '0 8px 32px rgba(0, 0, 0, 0.12)',\n            fontFamily: 'Segoe UI Variable, Segoe UI, system-ui, sans-serif'\n          }}\n        >\n          <p className=\"text-sm font-semibold text-gray-900 mb-2\">{label}</p>\n          {payload.map((entry: any, index: number) => (\n            <div key={index} className=\"flex items-center space-x-2\">\n              <div \n                className=\"w-3 h-3 rounded-full\"\n                style={{ backgroundColor: entry.color }}\n              />\n              <span className=\"text-lg font-medium text-gray-900\">\n                {formatValue(entry.value)}\n              </span>\n            </div>\n          ))}\n        </motion.div>\n      );\n    }\n    return null;\n  };\n\n  // Custom Dot Component with glow effect\n  const CustomDot = ({ cx, cy, fill }: any) => (\n    <g>\n      <circle\n        cx={cx}\n        cy={cy}\n        r={4}\n        fill={fill}\n        stroke=\"white\"\n        strokeWidth={2}\n        style={{\n          filter: isHovered ? `drop-shadow(0 0 8px ${fill}66)` : 'none',\n          transition: 'filter 0.2s ease'\n        }}\n      />\n    </g>\n  );\n\n  const renderChart = () => {\n    const commonProps = {\n      data: data,\n      margin: { top: 20, right: 30, left: 20, bottom: 20 }\n    };\n\n    switch (type) {\n      case 'line':\n        return (\n          <LineChart {...commonProps}>\n            <defs>\n              <linearGradient id=\"lineGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"0%\" stopColor={colors[0]} stopOpacity={0.3} />\n                <stop offset=\"100%\" stopColor={colors[0]} stopOpacity={0} />\n              </linearGradient>\n            </defs>\n            <CartesianGrid \n              strokeDasharray=\"none\" \n              stroke=\"rgba(0, 0, 0, 0.05)\" \n              strokeWidth={1}\n              horizontal={true}\n              vertical={false}\n            />\n            <XAxis \n              dataKey={xAxisKey} \n              tick={{ fontSize: 12, fontFamily: 'Segoe UI Variable', fill: '#605e5c' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n            />\n            <YAxis \n              tick={{ fontSize: 12, fontFamily: 'Segoe UI Variable', fill: '#605e5c' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n              tickFormatter={formatValue}\n            />\n            <Tooltip content={<CustomTooltip />} />\n            <Line \n              type=\"monotone\" \n              dataKey={yAxisKey} \n              stroke={colors[0]} \n              strokeWidth={3}\n              dot={<CustomDot />}\n              activeDot={{ \n                r: 6, \n                stroke: colors[0], \n                strokeWidth: 3,\n                fill: 'white',\n                style: { filter: `drop-shadow(0 0 12px ${colors[0]}66)` }\n              }}\n              style={{\n                filter: `drop-shadow(0 2px 4px ${colors[0]}33)`\n              }}\n            />\n            <defs>\n              <filter id=\"glow\">\n                <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\"/>\n                <feMerge> \n                  <feMergeNode in=\"coloredBlur\"/>\n                  <feMergeNode in=\"SourceGraphic\"/>\n                </feMerge>\n              </filter>\n            </defs>\n          </LineChart>\n        );\n\n      case 'prediction':\n        return (\n          <LineChart {...commonProps}>\n            <defs>\n              <linearGradient id=\"predictionGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"0%\" stopColor={FLUENT_COLORS.purple} stopOpacity={0.3} />\n                <stop offset=\"100%\" stopColor={FLUENT_COLORS.purple} stopOpacity={0} />\n              </linearGradient>\n            </defs>\n            <CartesianGrid \n              strokeDasharray=\"none\" \n              stroke=\"rgba(0, 0, 0, 0.05)\" \n              strokeWidth={1}\n              horizontal={true}\n              vertical={false}\n            />\n            <XAxis \n              dataKey={xAxisKey} \n              tick={{ fontSize: 12, fontFamily: 'Segoe UI Variable', fill: '#605e5c' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n            />\n            <YAxis \n              tick={{ fontSize: 12, fontFamily: 'Segoe UI Variable', fill: '#605e5c' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n              tickFormatter={formatValue}\n            />\n            <Tooltip content={<CustomTooltip />} />\n            <Line \n              type=\"monotone\" \n              dataKey={yAxisKey} \n              stroke={FLUENT_COLORS.purple} \n              strokeWidth={3}\n              strokeDasharray=\"5 5\"\n              dot={<CustomDot />}\n              activeDot={{ \n                r: 6, \n                stroke: FLUENT_COLORS.purple, \n                strokeWidth: 3,\n                fill: 'white',\n                style: { filter: `drop-shadow(0 0 12px ${FLUENT_COLORS.purple}66)` }\n              }}\n              style={{\n                filter: `drop-shadow(0 2px 4px ${FLUENT_COLORS.purple}33)`\n              }}\n            />\n          </LineChart>\n        );\n\n      default: // bar\n        return (\n          <BarChart {...commonProps}>\n            <defs>\n              {colors.map((color, index) => (\n                <linearGradient key={index} id={`barGradient${index}`} x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                  <stop offset=\"0%\" stopColor={color} stopOpacity={1} />\n                  <stop offset=\"100%\" stopColor={color} stopOpacity={0.7} />\n                </linearGradient>\n              ))}\n            </defs>\n            <CartesianGrid \n              strokeDasharray=\"none\" \n              stroke=\"rgba(0, 0, 0, 0.05)\" \n              strokeWidth={1}\n              horizontal={true}\n              vertical={false}\n            />\n            <XAxis \n              dataKey={xAxisKey} \n              tick={{ fontSize: 12, fontFamily: 'Segoe UI Variable', fill: '#605e5c' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n            />\n            <YAxis \n              tick={{ fontSize: 12, fontFamily: 'Segoe UI Variable', fill: '#605e5c' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n              tickFormatter={formatValue}\n            />\n            <Tooltip content={<CustomTooltip />} />\n            <Bar \n              dataKey={yAxisKey} \n              radius={[8, 8, 0, 0]}\n              style={{\n                filter: 'drop-shadow(0 2px 8px rgba(0, 0, 0, 0.1))'\n              }}\n            >\n              {data.map((entry, index) => (\n                <Cell \n                  key={`cell-${index}`} \n                  fill={`url(#barGradient${index % colors.length})`}\n                />\n              ))}\n            </Bar>\n          </BarChart>\n        );\n    }\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5, ease: \"easeOut\" }}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      className=\"h-full\"\n    >\n      <div className=\"relative h-full\">\n        {title && (\n          <div className=\"p-6 border-b border-gray-100/50\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                  {title}\n                </h3>\n                {description && (\n                  <p className=\"text-sm text-gray-600 mt-1\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                    {description}\n                  </p>\n                )}\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                {onExport && (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => onExport('png')}\n                    className=\"flex items-center space-x-1 bg-white/50 backdrop-blur-sm border-gray-200/50 hover:bg-white/70\"\n                  >\n                    <Download className=\"w-4 h-4\" />\n                    <span>Export</span>\n                  </Button>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"p-6\">\n          {showAnalytics && analytics && (\n              <motion.div \n                className=\"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                transition={{ delay: 0.2, duration: 0.4 }}\n              >\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-gray-900\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                    {formatValue(analytics.total)}\n                  </div>\n                  <div className=\"text-xs text-gray-600\" style={{ fontFamily: 'Segoe UI Variable' }}>Total</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-gray-900\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                    {formatValue(analytics.average)}\n                  </div>\n                  <div className=\"text-xs text-gray-600\" style={{ fontFamily: 'Segoe UI Variable' }}>Moyenne</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-green-600\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                    {formatValue(analytics.max)}\n                  </div>\n                  <div className=\"text-xs text-gray-600\" style={{ fontFamily: 'Segoe UI Variable' }}>Maximum</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-red-600\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                    {formatValue(analytics.min)}\n                  </div>\n                  <div className=\"text-xs text-gray-600\" style={{ fontFamily: 'Segoe UI Variable' }}>Minimum</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center space-x-1\">\n                    {analytics.trend > 0 ? (\n                      <TrendingUp className=\"w-4 h-4 text-green-600\" />\n                    ) : (\n                      <TrendingDown className=\"w-4 h-4 text-red-600\" />\n                    )}\n                    <span className={`text-2xl font-bold ${analytics.trend > 0 ? 'text-green-600' : 'text-red-600'}`} style={{ fontFamily: 'Segoe UI Variable' }}>\n                      {analytics.trend > 0 ? '+' : ''}{analytics.trend.toFixed(1)}\n                    </span>\n                  </div>\n                  <div className=\"text-xs text-gray-600\" style={{ fontFamily: 'Segoe UI Variable' }}>Tendance</div>\n                </div>\n              </motion.div>\n            )}\n\n            {/* Chart */}\n            <motion.div \n              className=\"h-64\"\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ delay: 0.3, duration: 0.5, ease: \"easeOut\" }}\n            >\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                {renderChart()}\n              </ResponsiveContainer>\n            </motion.div>\n\n            {/* Legend */}\n            {type === 'bar' && data.length > 0 && (\n              <motion.div \n                className=\"flex justify-center mt-6\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                transition={{ delay: 0.5, duration: 0.4 }}\n              >\n                <div className=\"flex flex-wrap justify-center gap-4\">\n                  {data.map((entry, index) => (\n                    <div \n                      key={index} \n                      className=\"flex items-center space-x-2 px-3 py-1 rounded-lg bg-white/50 backdrop-blur-sm transition-all hover:bg-white/70\"\n                    >\n                      <div \n                        className=\"w-3 h-3 rounded-full\"\n                        style={{ backgroundColor: colors[index % colors.length] }}\n                      />\n                      <span \n                        className=\"text-sm text-gray-700\" \n                        style={{ fontFamily: 'Segoe UI Variable' }}\n                      >\n                        {entry[xAxisKey]}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n        {/* Mica effect overlay */}\n        <div \n          className=\"absolute inset-0 pointer-events-none\"\n          style={{\n            background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)',\n            backgroundImage: 'radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%)',\n          }}\n        />\n        \n        <div className=\"relative z-10\">\n          {/* Header */}\n          <div className=\"p-6 border-b border-gray-100/50\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                  {title}\n                </h3>\n                {description && (\n                  <p className=\"text-sm text-gray-600 mt-1\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                    {description}\n                  </p>\n                )}\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                {onExport && (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => onExport('png')}\n                    className=\"flex items-center space-x-1 bg-white/50 backdrop-blur-sm border-gray-200/50 hover:bg-white/70\"\n                  >\n                    <Download className=\"w-4 h-4\" />\n                    <span>Export</span>\n                  </Button>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"p-6\">\n            {/* Analytics Summary */}\n            {showAnalytics && analytics && (\n              <motion.div \n                className=\"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                transition={{ delay: 0.2, duration: 0.4 }}\n              >\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-gray-900\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                    {formatValue(analytics.total)}\n                  </div>\n                  <div className=\"text-xs text-gray-600\" style={{ fontFamily: 'Segoe UI Variable' }}>Total</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-gray-900\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                    {formatValue(analytics.average)}\n                  </div>\n                  <div className=\"text-xs text-gray-600\" style={{ fontFamily: 'Segoe UI Variable' }}>Moyenne</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-green-600\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                    {formatValue(analytics.max)}\n                  </div>\n                  <div className=\"text-xs text-gray-600\" style={{ fontFamily: 'Segoe UI Variable' }}>Maximum</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-red-600\" style={{ fontFamily: 'Segoe UI Variable' }}>\n                    {formatValue(analytics.min)}\n                  </div>\n                  <div className=\"text-xs text-gray-600\" style={{ fontFamily: 'Segoe UI Variable' }}>Minimum</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center space-x-1\">\n                    {analytics.trend > 0 ? (\n                      <TrendingUp className=\"w-4 h-4 text-green-600\" />\n                    ) : (\n                      <TrendingDown className=\"w-4 h-4 text-red-600\" />\n                    )}\n                    <span className={`text-2xl font-bold ${analytics.trend > 0 ? 'text-green-600' : 'text-red-600'}`} style={{ fontFamily: 'Segoe UI Variable' }}>\n                      {analytics.trend > 0 ? '+' : ''}{analytics.trend.toFixed(1)}\n                    </span>\n                  </div>\n                  <div className=\"text-xs text-gray-600\" style={{ fontFamily: 'Segoe UI Variable' }}>Tendance</div>\n                </div>\n              </motion.div>\n            )}\n\n            {/* Chart */}\n            <motion.div \n              className=\"h-80\"\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ delay: 0.3, duration: 0.5, ease: \"easeOut\" }}\n            >\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                {renderChart()}\n              </ResponsiveContainer>\n            </motion.div>\n\n            {/* Legend */}\n            {type === 'bar' && data.length > 0 && (\n              <motion.div \n                className=\"flex justify-center mt-6\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                transition={{ delay: 0.5, duration: 0.4 }}\n              >\n                <div className=\"flex flex-wrap justify-center gap-4\">\n                  {data.map((entry, index) => (\n                    <div \n                      key={index} \n                      className=\"flex items-center space-x-2 px-3 py-1 rounded-lg bg-white/50 backdrop-blur-sm transition-all hover:bg-white/70\"\n                    >\n                      <div \n                        className=\"w-3 h-3 rounded-full\"\n                        style={{ backgroundColor: colors[index % colors.length] }}\n                      />\n                      <span \n                        className=\"text-sm text-gray-700\" \n                        style={{ fontFamily: 'Segoe UI Variable' }}\n                      >\n                        {entry[xAxisKey]}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}","size_bytes":21740},"client/src/components/InteractiveChart.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, LineChart, Line, PieChart, Pie, Cell, Area, AreaChart } from \"recharts\";\nimport { WindowsCard, WindowsCardContent } from \"@/components/WindowsCard\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { TrendingUp, TrendingDown, BarChart3, PieChart as PieChartIcon, Activity, Download } from \"lucide-react\";\n\ninterface ChartData {\n  [key: string]: any;\n}\n\ninterface InteractiveChartProps {\n  data: ChartData[];\n  title: string;\n  description?: string;\n  defaultType?: 'bar' | 'line' | 'area' | 'pie';\n  xAxisKey: string;\n  yAxisKey: string;\n  categoryKey?: string;\n  colors?: string[];\n  enableDrillDown?: boolean;\n  showAnalytics?: boolean;\n  onDrillDown?: (dataPoint: ChartData) => void;\n  onExport?: (format: 'png' | 'csv' | 'pdf') => void;\n}\n\nconst CHART_COLORS = [\n  '#3B82F6', // Blue\n  '#EF4444', // Red  \n  '#10B981', // Green\n  '#F59E0B', // Amber\n  '#8B5CF6', // Purple\n  '#06B6D4', // Cyan\n  '#84CC16', // Lime\n  '#F97316', // Orange\n];\n\nexport default function InteractiveChart({\n  data,\n  title,\n  description,\n  defaultType = 'bar',\n  xAxisKey,\n  yAxisKey,\n  categoryKey,\n  colors = CHART_COLORS,\n  enableDrillDown = false,\n  showAnalytics = true,\n  onDrillDown,\n  onExport\n}: InteractiveChartProps) {\n  const [chartType, setChartType] = useState<'bar' | 'line' | 'area' | 'pie'>(defaultType);\n  const [timeRange, setTimeRange] = useState('all');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n\n  // Analytics calculations\n  const analytics = useMemo(() => {\n    if (!data || data.length === 0) return null;\n\n    const values = data.map(item => Number(item[yAxisKey]) || 0);\n    const total = values.reduce((sum, val) => sum + val, 0);\n    const average = total / values.length;\n    const max = Math.max(...values);\n    const min = Math.min(...values);\n    \n    // Trend calculation (simple linear regression)\n    const trend = values.length >= 2 ? \n      (values[values.length - 1] - values[0]) / values.length : 0;\n\n    return {\n      total,\n      average,\n      max,\n      min,\n      trend,\n      count: data.length\n    };\n  }, [data, yAxisKey]);\n\n  // Filter data based on selections\n  const filteredData = useMemo(() => {\n    let filtered = [...data];\n\n    if (selectedCategory !== 'all' && categoryKey) {\n      filtered = filtered.filter(item => item[categoryKey] === selectedCategory);\n    }\n\n    if (timeRange !== 'all') {\n      // Implement time range filtering if data has date fields\n      // This would depend on your data structure\n    }\n\n    return filtered;\n  }, [data, selectedCategory, categoryKey, timeRange]);\n\n  const formatValue = (value: number) => {\n    if (value >= 1000000) {\n      return `${(value / 1000000).toFixed(1)}M`;\n    } else if (value >= 1000) {\n      return `${(value / 1000).toFixed(1)}K`;\n    }\n    return value.toFixed(0);\n  };\n\n  const formatCurrency = (value: number) => {\n    return new Intl.NumberFormat('fr-FR', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(value);\n  };\n\n  const handleDataPointClick = (dataPoint: any) => {\n    if (enableDrillDown && onDrillDown) {\n      onDrillDown(dataPoint);\n    }\n  };\n\n  const renderChart = () => {\n    const commonProps = {\n      data: filteredData,\n      margin: { top: 5, right: 30, left: 20, bottom: 5 }\n    };\n\n    switch (chartType) {\n      case 'line':\n        return (\n          <LineChart {...commonProps}>\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\n            <XAxis \n              dataKey={xAxisKey} \n              tick={{ fontSize: 12 }}\n              stroke=\"#666\"\n            />\n            <YAxis \n              tick={{ fontSize: 12 }}\n              stroke=\"#666\"\n              tickFormatter={formatValue}\n            />\n            <Tooltip \n              formatter={(value: number) => [formatValue(value), title]}\n              labelStyle={{ color: '#333' }}\n              contentStyle={{ \n                backgroundColor: 'white', \n                border: '1px solid #ccc',\n                borderRadius: '4px'\n              }}\n            />\n            <Line \n              type=\"monotone\" \n              dataKey={yAxisKey} \n              stroke={colors[0]} \n              strokeWidth={2}\n              dot={{ fill: colors[0], strokeWidth: 2, r: 4 }}\n              activeDot={{ r: 6, stroke: colors[0], strokeWidth: 2 }}\n              onClick={handleDataPointClick}\n            />\n          </LineChart>\n        );\n\n      case 'area':\n        return (\n          <AreaChart {...commonProps}>\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\n            <XAxis \n              dataKey={xAxisKey} \n              tick={{ fontSize: 12 }}\n              stroke=\"#666\"\n            />\n            <YAxis \n              tick={{ fontSize: 12 }}\n              stroke=\"#666\"\n              tickFormatter={formatValue}\n            />\n            <Tooltip \n              formatter={(value: number) => [formatValue(value), title]}\n              labelStyle={{ color: '#333' }}\n              contentStyle={{ \n                backgroundColor: 'white', \n                border: '1px solid #ccc',\n                borderRadius: '4px'\n              }}\n            />\n            <Area \n              type=\"monotone\" \n              dataKey={yAxisKey} \n              stroke={colors[0]} \n              fill={colors[0]}\n              fillOpacity={0.3}\n              onClick={handleDataPointClick}\n            />\n          </AreaChart>\n        );\n\n      case 'pie':\n        return (\n          <PieChart width={400} height={300}>\n            <Pie\n              data={filteredData}\n              cx={200}\n              cy={150}\n              labelLine={false}\n              label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\n              outerRadius={80}\n              fill=\"#8884d8\"\n              dataKey={yAxisKey}\n              onClick={handleDataPointClick}\n            >\n              {filteredData.map((entry, index) => (\n                <Cell key={`cell-${index}`} fill={colors[index % colors.length]} />\n              ))}\n            </Pie>\n            <Tooltip \n              formatter={(value: number) => [formatValue(value), title]}\n              contentStyle={{ \n                backgroundColor: 'white', \n                border: '1px solid #ccc',\n                borderRadius: '4px'\n              }}\n            />\n          </PieChart>\n        );\n\n      default: // bar\n        return (\n          <BarChart {...commonProps}>\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\n            <XAxis \n              dataKey={xAxisKey} \n              tick={{ fontSize: 12 }}\n              stroke=\"#666\"\n            />\n            <YAxis \n              tick={{ fontSize: 12 }}\n              stroke=\"#666\"\n              tickFormatter={formatValue}\n            />\n            <Tooltip \n              formatter={(value: number) => [formatValue(value), title]}\n              labelStyle={{ color: '#333' }}\n              contentStyle={{ \n                backgroundColor: 'white', \n                border: '1px solid #ccc',\n                borderRadius: '4px'\n              }}\n            />\n            <Bar \n              dataKey={yAxisKey} \n              fill={colors[0]}\n              onClick={handleDataPointClick}\n              radius={[2, 2, 0, 0]}\n            />\n          </BarChart>\n        );\n    }\n  };\n\n  const categories = categoryKey ? Array.from(new Set(data.map(item => item[categoryKey]))) : [];\n\n  return (\n    <WindowsCard>\n      <div className=\"p-6 border-b border-gray-100\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900\">{title}</h3>\n            {description && (\n              <p className=\"text-sm text-gray-600 mt-1\">{description}</p>\n            )}\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            {/* Chart Type Selector */}\n            <Select value={chartType} onValueChange={(value: any) => setChartType(value)}>\n              <SelectTrigger className=\"w-32\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"bar\">\n                  <div className=\"flex items-center space-x-2\">\n                    <BarChart3 className=\"w-4 h-4\" />\n                    <span>Barres</span>\n                  </div>\n                </SelectItem>\n                <SelectItem value=\"line\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Activity className=\"w-4 h-4\" />\n                    <span>Ligne</span>\n                  </div>\n                </SelectItem>\n                <SelectItem value=\"area\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Activity className=\"w-4 h-4\" />\n                    <span>Zone</span>\n                  </div>\n                </SelectItem>\n                <SelectItem value=\"pie\">\n                  <div className=\"flex items-center space-x-2\">\n                    <PieChartIcon className=\"w-4 h-4\" />\n                    <span>Secteur</span>\n                  </div>\n                </SelectItem>\n              </SelectContent>\n            </Select>\n\n            {/* Category Filter */}\n            {categories.length > 0 && (\n              <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n                <SelectTrigger className=\"w-40\">\n                  <SelectValue placeholder=\"Catégorie\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Toutes</SelectItem>\n                  {categories.map((category) => (\n                    <SelectItem key={category} value={category}>\n                      {category}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            )}\n\n            {/* Export Button */}\n            {onExport && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => onExport('png')}\n                className=\"flex items-center space-x-1\"\n              >\n                <Download className=\"w-4 h-4\" />\n                <span>Export</span>\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <WindowsCardContent className=\"p-6\">\n        {/* Analytics Summary */}\n        {showAnalytics && analytics && (\n          <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-gray-900\">{formatValue(analytics.total)}</div>\n              <div className=\"text-xs text-gray-600\">Total</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-gray-900\">{formatValue(analytics.average)}</div>\n              <div className=\"text-xs text-gray-600\">Moyenne</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-600\">{formatValue(analytics.max)}</div>\n              <div className=\"text-xs text-gray-600\">Maximum</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-red-600\">{formatValue(analytics.min)}</div>\n              <div className=\"text-xs text-gray-600\">Minimum</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"flex items-center justify-center space-x-1\">\n                {analytics.trend > 0 ? (\n                  <TrendingUp className=\"w-4 h-4 text-green-600\" />\n                ) : (\n                  <TrendingDown className=\"w-4 h-4 text-red-600\" />\n                )}\n                <span className={`text-2xl font-bold ${analytics.trend > 0 ? 'text-green-600' : 'text-red-600'}`}>\n                  {analytics.trend > 0 ? '+' : ''}{analytics.trend.toFixed(1)}\n                </span>\n              </div>\n              <div className=\"text-xs text-gray-600\">Tendance</div>\n            </div>\n          </div>\n        )}\n\n        {/* Chart */}\n        <div className=\"h-80\">\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            {renderChart()}\n          </ResponsiveContainer>\n        </div>\n\n        {/* Drill Down Hint */}\n        {enableDrillDown && (\n          <div className=\"mt-4 text-center\">\n            <p className=\"text-xs text-gray-500\">\n              💡 Cliquez sur un élément du graphique pour explorer en détail\n            </p>\n          </div>\n        )}\n      </WindowsCardContent>\n    </WindowsCard>\n  );\n}","size_bytes":12850},"client/src/components/PWASupport.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { WindowsCard, WindowsCardContent } from \"@/components/WindowsCard\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Smartphone, Download, Wifi, WifiOff, RefreshCw } from \"lucide-react\";\n\ninterface BeforeInstallPromptEvent extends Event {\n  readonly platforms: Array<string>;\n  readonly userChoice: Promise<{\n    outcome: 'accepted' | 'dismissed';\n    platform: string;\n  }>;\n  prompt(): Promise<void>;\n}\n\ndeclare global {\n  interface WindowEventMap {\n    beforeinstallprompt: BeforeInstallPromptEvent;\n  }\n}\n\nexport default function PWASupport() {\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\n  const [isInstalled, setIsInstalled] = useState(false);\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n  const [showOfflineAlert, setShowOfflineAlert] = useState(false);\n  const [updateAvailable, setUpdateAvailable] = useState(false);\n  const [showPWACard, setShowPWACard] = useState(true);\n\n  useEffect(() => {\n    // Check if app is already installed\n    const isStandalone = window.matchMedia('(display-mode: standalone)').matches;\n    const isInWebAppiOS = (window.navigator as any).standalone === true;\n    setIsInstalled(isStandalone || isInWebAppiOS);\n\n    // Listen for beforeinstallprompt event\n    const handleBeforeInstallPrompt = (e: BeforeInstallPromptEvent) => {\n      e.preventDefault();\n      setDeferredPrompt(e);\n    };\n\n    // Listen for online/offline events\n    const handleOnline = () => {\n      setIsOnline(true);\n      setShowOfflineAlert(false);\n    };\n\n    const handleOffline = () => {\n      setIsOnline(false);\n      setShowOfflineAlert(true);\n    };\n\n    // Listen for service worker updates\n    const handleServiceWorkerUpdate = () => {\n      setUpdateAvailable(true);\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    // Register service worker\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.register('/service-worker.js')\n        .then((registration) => {\n          console.log('Service Worker registered:', registration);\n          \n          // Check for updates\n          registration.addEventListener('updatefound', () => {\n            const newWorker = registration.installing;\n            if (newWorker) {\n              newWorker.addEventListener('statechange', () => {\n                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n                  handleServiceWorkerUpdate();\n                }\n              });\n            }\n          });\n        })\n        .catch((error) => {\n          console.log('Service Worker registration failed:', error);\n        });\n    }\n\n    // Auto-hide PWA card after 3 seconds\n    const timer = setTimeout(() => {\n      setShowPWACard(false);\n    }, 3000);\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n      clearTimeout(timer);\n    };\n  }, []);\n\n  const handleInstallClick = async () => {\n    if (!deferredPrompt) return;\n\n    deferredPrompt.prompt();\n    const { outcome } = await deferredPrompt.userChoice;\n    \n    if (outcome === 'accepted') {\n      setDeferredPrompt(null);\n      setIsInstalled(true);\n    }\n  };\n\n  const handleUpdateClick = () => {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.getRegistration().then((registration) => {\n        if (registration) {\n          registration.update();\n          window.location.reload();\n        }\n      });\n    }\n  };\n\n  const getConnectionType = () => {\n    const connection = (navigator as any).connection || (navigator as any).mozConnection || (navigator as any).webkitConnection;\n    if (connection) {\n      return connection.effectiveType || connection.type || 'unknown';\n    }\n    return 'unknown';\n  };\n\n  const getNetworkStatus = () => {\n    if (!isOnline) return { color: 'bg-red-500', text: 'Hors ligne' };\n    const connectionType = getConnectionType();\n    switch (connectionType) {\n      case 'slow-2g':\n      case '2g':\n        return { color: 'bg-red-500', text: 'Connexion lente' };\n      case '3g':\n        return { color: 'bg-yellow-500', text: 'Connexion modérée' };\n      case '4g':\n        return { color: 'bg-green-500', text: 'Connexion rapide' };\n      default:\n        return { color: 'bg-blue-500', text: 'En ligne' };\n    }\n  };\n\n  const networkStatus = getNetworkStatus();\n\n  return (\n    <>\n      {/* Offline Alert */}\n      {showOfflineAlert && (\n        <Alert className=\"fixed top-4 right-4 z-50 w-80 sm:w-72 md:w-80 max-w-[calc(100vw-2rem)] border-orange-200 bg-orange-50\">\n          <WifiOff className=\"h-4 w-4 text-orange-600\" />\n          <AlertDescription className=\"text-orange-800\">\n            <strong>Mode hors ligne</strong><br />\n            Certaines fonctionnalités peuvent être limitées. Les données seront synchronisées lors de la reconnexion.\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {/* Update Available Alert */}\n      {updateAvailable && (\n        <Alert className=\"fixed top-4 right-4 z-50 w-80 sm:w-72 md:w-80 max-w-[calc(100vw-2rem)] border-blue-200 bg-blue-50\">\n          <RefreshCw className=\"h-4 w-4 text-blue-600\" />\n          <AlertDescription className=\"text-blue-800\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <strong>Mise à jour disponible</strong><br />\n                Une nouvelle version de l'application est prête.\n              </div>\n              <Button size=\"sm\" onClick={handleUpdateClick} className=\"ml-2\">\n                Mettre à jour\n              </Button>\n            </div>\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {/* PWA Status Card */}\n      {showPWACard && (\n        <WindowsCard className=\"fixed bottom-4 right-4 z-40 w-80 sm:w-72 md:w-80 lg:w-80 xl:w-80 max-w-[calc(100vw-2rem)] transition-all duration-300 animate-in slide-in-from-bottom-2 fade-in\">\n          <WindowsCardContent className=\"p-3 sm:p-4\">\n            <div className=\"flex items-center justify-between mb-3\">\n            <h4 className=\"text-sm font-semibold text-gray-900 flex items-center\">\n              <Smartphone className=\"w-4 h-4 mr-2\" />\n              Application Mobile\n            </h4>\n            <div className=\"flex items-center space-x-2\">\n              <div className={`w-2 h-2 rounded-full ${networkStatus.color}`}></div>\n              <Badge variant=\"secondary\" className=\"text-xs\">\n                {isOnline ? <Wifi className=\"w-3 h-3\" /> : <WifiOff className=\"w-3 h-3\" />}\n              </Badge>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-gray-600\">Statut:</span>\n              <Badge variant={isInstalled ? \"default\" : \"secondary\"}>\n                {isInstalled ? \"Installée\" : \"Navigateur\"}\n              </Badge>\n            </div>\n\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-gray-600\">Connexion:</span>\n              <span className=\"text-gray-900 text-xs\">{networkStatus.text}</span>\n            </div>\n\n            {!isInstalled && deferredPrompt && (\n              <Button\n                onClick={handleInstallClick}\n                size=\"sm\"\n                className=\"w-full mt-3 flex items-center justify-center space-x-2\"\n              >\n                <Download className=\"w-4 h-4\" />\n                <span>Installer l'app</span>\n              </Button>\n            )}\n\n            {isInstalled && (\n              <div className=\"text-xs text-green-600 text-center mt-2\">\n                ✓ Application installée et prête à l'utilisation hors ligne\n              </div>\n            )}\n            </div>\n          </WindowsCardContent>\n        </WindowsCard>\n      )}\n    </>\n  );\n}","size_bytes":8257},"client/src/components/PerformanceMonitor.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { WindowsCard, WindowsCardContent } from \"@/components/WindowsCard\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { \n  Activity, \n  Database, \n  Users, \n  Clock, \n  TrendingUp, \n  AlertCircle,\n  CheckCircle,\n  Zap,\n  Server,\n  Globe\n} from \"lucide-react\";\n\ninterface PerformanceMetrics {\n  responseTime: number;\n  throughput: number;\n  errorRate: number;\n  activeUsers: number;\n  dbConnections: number;\n  memoryUsage: number;\n  cpuUsage: number;\n  cacheHitRate: number;\n}\n\ninterface SystemHealth {\n  status: 'healthy' | 'warning' | 'critical';\n  uptime: number;\n  lastBackup: string;\n  alerts: Array<{\n    type: 'warning' | 'error' | 'info';\n    message: string;\n    timestamp: string;\n  }>;\n}\n\nexport default function PerformanceMonitor() {\n  const [metrics, setMetrics] = useState<PerformanceMetrics>({\n    responseTime: 0,\n    throughput: 0,\n    errorRate: 0,\n    activeUsers: 0,\n    dbConnections: 0,\n    memoryUsage: 0,\n    cpuUsage: 0,\n    cacheHitRate: 0\n  });\n\n  const [health, setHealth] = useState<SystemHealth>({\n    status: 'healthy',\n    uptime: 0,\n    lastBackup: '',\n    alerts: []\n  });\n\n  const [realTimeData, setRealTimeData] = useState<number[]>([]);\n\n  // Simulate real-time performance monitoring\n  useEffect(() => {\n    const interval = setInterval(() => {\n      // Generate realistic performance metrics\n      const newMetrics: PerformanceMetrics = {\n        responseTime: Math.random() * 500 + 50, // 50-550ms\n        throughput: Math.random() * 100 + 50, // 50-150 req/sec\n        errorRate: Math.random() * 5, // 0-5%\n        activeUsers: Math.floor(Math.random() * 50 + 10), // 10-60 users\n        dbConnections: Math.floor(Math.random() * 20 + 5), // 5-25 connections\n        memoryUsage: Math.random() * 30 + 40, // 40-70%\n        cpuUsage: Math.random() * 40 + 20, // 20-60%\n        cacheHitRate: Math.random() * 20 + 75 // 75-95%\n      };\n\n      setMetrics(newMetrics);\n\n      // Update real-time chart data\n      setRealTimeData(prev => {\n        const newData = [...prev, newMetrics.responseTime];\n        return newData.slice(-20); // Keep last 20 data points\n      });\n\n      // Update system health\n      const status = newMetrics.errorRate > 3 ? 'critical' : \n                   newMetrics.responseTime > 400 ? 'warning' : 'healthy';\n      \n      setHealth(prev => ({\n        ...prev,\n        status,\n        uptime: prev.uptime + 5,\n        lastBackup: new Date(Date.now() - Math.random() * 86400000).toISOString(),\n        alerts: generateAlerts(newMetrics)\n      }));\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const generateAlerts = (metrics: PerformanceMetrics) => {\n    const alerts = [];\n    \n    if (metrics.responseTime > 400) {\n      alerts.push({\n        type: 'warning' as const,\n        message: 'Temps de réponse élevé détecté',\n        timestamp: new Date().toISOString()\n      });\n    }\n    \n    if (metrics.errorRate > 3) {\n      alerts.push({\n        type: 'error' as const,\n        message: 'Taux d\\'erreur élevé',\n        timestamp: new Date().toISOString()\n      });\n    }\n    \n    if (metrics.memoryUsage > 80) {\n      alerts.push({\n        type: 'warning' as const,\n        message: 'Utilisation mémoire élevée',\n        timestamp: new Date().toISOString()\n      });\n    }\n\n    return alerts.slice(0, 5);\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'healthy': return 'text-green-600 bg-green-50';\n      case 'warning': return 'text-yellow-600 bg-yellow-50';\n      case 'critical': return 'text-red-600 bg-red-50';\n      default: return 'text-gray-600 bg-gray-50';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'healthy': return CheckCircle;\n      case 'warning': return AlertCircle;\n      case 'critical': return AlertCircle;\n      default: return Activity;\n    }\n  };\n\n  const formatUptime = (seconds: number) => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    return `${hours}h ${minutes}m`;\n  };\n\n  const formatBytes = (bytes: number) => {\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return `${(bytes / Math.pow(1024, i)).toFixed(1)} ${sizes[i]}`;\n  };\n\n  const StatusIcon = getStatusIcon(health.status);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* System Status Overview */}\n      <WindowsCard>\n        <div className=\"p-6 border-b border-gray-100\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className={`w-10 h-10 rounded-sm flex items-center justify-center ${getStatusColor(health.status)}`}>\n                <StatusIcon className=\"w-5 h-5\" />\n              </div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900\">État du Système</h3>\n                <p className=\"text-sm text-gray-600\">Surveillance en temps réel</p>\n              </div>\n            </div>\n            <Badge className={getStatusColor(health.status)}>\n              {health.status === 'healthy' ? 'Optimal' : \n               health.status === 'warning' ? 'Attention' : 'Critique'}\n            </Badge>\n          </div>\n        </div>\n        <WindowsCardContent className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-600\">{formatUptime(health.uptime)}</div>\n              <div className=\"text-xs text-gray-600\">Temps de fonctionnement</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">{metrics.activeUsers}</div>\n              <div className=\"text-xs text-gray-600\">Utilisateurs actifs</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-purple-600\">{metrics.responseTime.toFixed(0)}ms</div>\n              <div className=\"text-xs text-gray-600\">Temps de réponse moyen</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-orange-600\">{metrics.errorRate.toFixed(1)}%</div>\n              <div className=\"text-xs text-gray-600\">Taux d'erreur</div>\n            </div>\n          </div>\n        </WindowsCardContent>\n      </WindowsCard>\n\n      {/* Performance Metrics */}\n      <Tabs defaultValue=\"performance\" className=\"space-y-4\">\n        <TabsList className=\"grid w-full grid-cols-3\">\n          <TabsTrigger value=\"performance\">Performance</TabsTrigger>\n          <TabsTrigger value=\"resources\">Ressources</TabsTrigger>\n          <TabsTrigger value=\"alerts\">Alertes</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"performance\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Response Time Chart */}\n            <WindowsCard>\n              <div className=\"p-6 border-b border-gray-100\">\n                <h4 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n                  <Clock className=\"w-5 h-5 mr-2 text-blue-600\" />\n                  Temps de Réponse\n                </h4>\n              </div>\n              <WindowsCardContent className=\"p-6\">\n                <div className=\"h-32 bg-gray-50 rounded-sm mb-4 flex items-end justify-around p-2\">\n                  {realTimeData.map((value, index) => (\n                    <div\n                      key={index}\n                      className=\"bg-blue-500 w-2 rounded-t-sm\"\n                      style={{ height: `${Math.max(4, (value / 600) * 100)}%` }}\n                    />\n                  ))}\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-xl font-bold text-gray-900\">{metrics.responseTime.toFixed(0)}ms</div>\n                  <div className=\"text-sm text-gray-600\">Temps moyen actuel</div>\n                </div>\n              </WindowsCardContent>\n            </WindowsCard>\n\n            {/* Throughput */}\n            <WindowsCard>\n              <div className=\"p-6 border-b border-gray-100\">\n                <h4 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n                  <TrendingUp className=\"w-5 h-5 mr-2 text-green-600\" />\n                  Débit\n                </h4>\n              </div>\n              <WindowsCardContent className=\"p-6\">\n                <div className=\"space-y-4\">\n                  <div>\n                    <div className=\"flex justify-between text-sm mb-1\">\n                      <span>Requêtes/seconde</span>\n                      <span>{metrics.throughput.toFixed(1)}</span>\n                    </div>\n                    <Progress value={metrics.throughput} className=\"h-2\" />\n                  </div>\n                  <div>\n                    <div className=\"flex justify-between text-sm mb-1\">\n                      <span>Taux de cache</span>\n                      <span>{metrics.cacheHitRate.toFixed(1)}%</span>\n                    </div>\n                    <Progress value={metrics.cacheHitRate} className=\"h-2\" />\n                  </div>\n                </div>\n              </WindowsCardContent>\n            </WindowsCard>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"resources\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {/* CPU Usage */}\n            <WindowsCard>\n              <div className=\"p-6 border-b border-gray-100\">\n                <h4 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n                  <Zap className=\"w-5 h-5 mr-2 text-yellow-600\" />\n                  Processeur\n                </h4>\n              </div>\n              <WindowsCardContent className=\"p-6\">\n                <div className=\"text-center\">\n                  <div className=\"text-3xl font-bold text-gray-900 mb-2\">{metrics.cpuUsage.toFixed(1)}%</div>\n                  <Progress value={metrics.cpuUsage} className=\"h-3 mb-2\" />\n                  <div className=\"text-sm text-gray-600\">Utilisation CPU</div>\n                </div>\n              </WindowsCardContent>\n            </WindowsCard>\n\n            {/* Memory Usage */}\n            <WindowsCard>\n              <div className=\"p-6 border-b border-gray-100\">\n                <h4 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n                  <Server className=\"w-5 h-5 mr-2 text-purple-600\" />\n                  Mémoire\n                </h4>\n              </div>\n              <WindowsCardContent className=\"p-6\">\n                <div className=\"text-center\">\n                  <div className=\"text-3xl font-bold text-gray-900 mb-2\">{metrics.memoryUsage.toFixed(1)}%</div>\n                  <Progress value={metrics.memoryUsage} className=\"h-3 mb-2\" />\n                  <div className=\"text-sm text-gray-600\">RAM utilisée</div>\n                </div>\n              </WindowsCardContent>\n            </WindowsCard>\n\n            {/* Database Connections */}\n            <WindowsCard>\n              <div className=\"p-6 border-b border-gray-100\">\n                <h4 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n                  <Database className=\"w-5 h-5 mr-2 text-blue-600\" />\n                  Base de Données\n                </h4>\n              </div>\n              <WindowsCardContent className=\"p-6\">\n                <div className=\"text-center\">\n                  <div className=\"text-3xl font-bold text-gray-900 mb-2\">{metrics.dbConnections}</div>\n                  <div className=\"text-sm text-gray-600 mb-2\">Connexions actives</div>\n                  <div className=\"text-xs text-green-600\">Pool: 25 max</div>\n                </div>\n              </WindowsCardContent>\n            </WindowsCard>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"alerts\" className=\"space-y-4\">\n          <WindowsCard>\n            <div className=\"p-6 border-b border-gray-100\">\n              <h4 className=\"text-lg font-semibold text-gray-900\">Alertes Système</h4>\n            </div>\n            <WindowsCardContent className=\"p-0\">\n              {health.alerts.length > 0 ? (\n                <div className=\"divide-y divide-gray-100\">\n                  {health.alerts.map((alert, index) => (\n                    <div key={index} className=\"p-6 flex items-center space-x-4\">\n                      <div className={`w-8 h-8 rounded-sm flex items-center justify-center ${\n                        alert.type === 'error' ? 'bg-red-100' : \n                        alert.type === 'warning' ? 'bg-yellow-100' : 'bg-blue-100'\n                      }`}>\n                        <AlertCircle className={`w-4 h-4 ${\n                          alert.type === 'error' ? 'text-red-600' : \n                          alert.type === 'warning' ? 'text-yellow-600' : 'text-blue-600'\n                        }`} />\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm font-medium text-gray-900\">{alert.message}</p>\n                        <p className=\"text-xs text-gray-500\">\n                          {new Date(alert.timestamp).toLocaleString('fr-FR')}\n                        </p>\n                      </div>\n                      <Badge variant={alert.type === 'error' ? 'destructive' : 'secondary'}>\n                        {alert.type === 'error' ? 'Erreur' : \n                         alert.type === 'warning' ? 'Attention' : 'Info'}\n                      </Badge>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-12\">\n                  <CheckCircle className=\"w-12 h-12 text-green-500 mx-auto mb-4\" />\n                  <h4 className=\"text-lg font-medium text-gray-900 mb-2\">Aucune alerte</h4>\n                  <p className=\"text-gray-600\">Système fonctionnel, aucun problème détecté</p>\n                </div>\n              )}\n            </WindowsCardContent>\n          </WindowsCard>\n        </TabsContent>\n      </Tabs>\n\n      {/* Quick Actions */}\n      <WindowsCard>\n        <div className=\"p-6 border-b border-gray-100\">\n          <h4 className=\"text-lg font-semibold text-gray-900\">Actions Rapides</h4>\n        </div>\n        <WindowsCardContent className=\"p-6\">\n          <div className=\"flex flex-wrap gap-2\">\n            <Button variant=\"outline\" size=\"sm\">\n              <Activity className=\"w-4 h-4 mr-2\" />\n              Restart Services\n            </Button>\n            <Button variant=\"outline\" size=\"sm\">\n              <Database className=\"w-4 h-4 mr-2\" />\n              Clear Cache\n            </Button>\n            <Button variant=\"outline\" size=\"sm\">\n              <Globe className=\"w-4 h-4 mr-2\" />\n              Health Check\n            </Button>\n            <Button variant=\"outline\" size=\"sm\">\n              <Server className=\"w-4 h-4 mr-2\" />\n              Generate Report\n            </Button>\n          </div>\n        </WindowsCardContent>\n      </WindowsCard>\n    </div>\n  );\n}","size_bytes":15383},"client/src/components/PerformanceOptimizer.tsx":{"content":"import { useState, useEffect, useCallback } from \"react\";\nimport { WindowsCard, WindowsCardContent } from \"@/components/WindowsCard\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { \n  Zap, \n  Database, \n  Image, \n  Wifi,\n  HardDrive,\n  Clock,\n  TrendingUp,\n  Settings,\n  Trash2,\n  RefreshCw\n} from \"lucide-react\";\n\ninterface PerformanceMetrics {\n  loadTime: number;\n  renderTime: number;\n  cacheSize: number;\n  memoryUsage: number;\n  networkRequests: number;\n  errorRate: number;\n}\n\ninterface OptimizationAction {\n  id: string;\n  name: string;\n  description: string;\n  impact: 'high' | 'medium' | 'low';\n  effort: 'low' | 'medium' | 'high';\n  action: () => Promise<void>;\n  completed: boolean;\n}\n\nexport default function PerformanceOptimizer() {\n  const [metrics, setMetrics] = useState<PerformanceMetrics>({\n    loadTime: 0,\n    renderTime: 0,\n    cacheSize: 0,\n    memoryUsage: 0,\n    networkRequests: 0,\n    errorRate: 0\n  });\n\n  const [optimizations, setOptimizations] = useState<OptimizationAction[]>([]);\n  const [isOptimizing, setIsOptimizing] = useState(false);\n  const [performanceScore, setPerformanceScore] = useState(0);\n\n  // Performance monitoring\n  useEffect(() => {\n    const measurePerformance = () => {\n      const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;\n      const loadTime = navigation.loadEventEnd - navigation.loadEventStart;\n      const renderTime = navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart;\n\n      // Estimate cache size\n      const cacheSize = navigator.storage ? 0 : Math.random() * 50; // MB\n\n      // Estimate memory usage\n      const memoryUsage = (performance as any).memory \n        ? (performance as any).memory.usedJSHeapSize / 1024 / 1024 \n        : Math.random() * 100;\n\n      // Count network requests\n      const resources = performance.getEntriesByType('resource');\n      const networkRequests = resources.length;\n\n      setMetrics({\n        loadTime,\n        renderTime,\n        cacheSize,\n        memoryUsage,\n        networkRequests,\n        errorRate: Math.random() * 5 // Simulated error rate\n      });\n\n      // Calculate performance score\n      const score = Math.max(0, 100 - (loadTime / 10) - (renderTime / 5) - (memoryUsage / 2));\n      setPerformanceScore(Math.round(score));\n    };\n\n    measurePerformance();\n    const interval = setInterval(measurePerformance, 30000); // Update every 30 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // Initialize optimization actions\n  useEffect(() => {\n    const actions: OptimizationAction[] = [\n      {\n        id: 'cache-clear',\n        name: 'Vider le Cache',\n        description: 'Supprime les données mises en cache pour libérer de l\\'espace',\n        impact: 'medium',\n        effort: 'low',\n        action: clearCache,\n        completed: false\n      },\n      {\n        id: 'lazy-loading',\n        name: 'Chargement Paresseux',\n        description: 'Active le chargement différé des images et composants',\n        impact: 'high',\n        effort: 'medium',\n        action: enableLazyLoading,\n        completed: false\n      },\n      {\n        id: 'preload-critical',\n        name: 'Préchargement Critique',\n        description: 'Précharge les ressources critiques pour améliorer les performances',\n        impact: 'high',\n        effort: 'low',\n        action: preloadCriticalResources,\n        completed: false\n      },\n      {\n        id: 'optimize-images',\n        name: 'Optimiser Images',\n        description: 'Compresse et optimise les images pour réduire la taille',\n        impact: 'medium',\n        effort: 'medium',\n        action: optimizeImages,\n        completed: false\n      },\n      {\n        id: 'service-worker',\n        name: 'Service Worker',\n        description: 'Active la mise en cache avancée avec Service Worker',\n        impact: 'high',\n        effort: 'high',\n        action: enableServiceWorker,\n        completed: false\n      },\n      {\n        id: 'bundle-optimization',\n        name: 'Optimisation Bundle',\n        description: 'Optimise les bundles JavaScript pour réduire la taille',\n        impact: 'high',\n        effort: 'medium',\n        action: optimizeBundles,\n        completed: false\n      }\n    ];\n\n    setOptimizations(actions);\n  }, []);\n\n  const clearCache = async () => {\n    if ('caches' in window) {\n      const cacheNames = await caches.keys();\n      await Promise.all(cacheNames.map(name => caches.delete(name)));\n    }\n    \n    // Clear localStorage and sessionStorage\n    localStorage.clear();\n    sessionStorage.clear();\n    \n    // Clear IndexedDB\n    if ('indexedDB' in window) {\n      // This is a simplified version - in production, you'd want more sophisticated clearing\n      console.log('Cache cleared successfully');\n    }\n  };\n\n  const enableLazyLoading = async (): Promise<void> => {\n    // This would typically involve code changes to components\n    // For demo purposes, we'll simulate the action\n    return new Promise(resolve => {\n      setTimeout(() => {\n        console.log('Lazy loading enabled');\n        resolve();\n      }, 1000);\n    });\n  };\n\n  const preloadCriticalResources = async () => {\n    const criticalResources = [\n      '/api/dashboard/stats',\n      '/api/articles',\n      '/static/css/critical.css'\n    ];\n\n    const promises = criticalResources.map(resource => {\n      return fetch(resource, { cache: 'force-cache' }).catch(() => {\n        console.log(`Failed to preload: ${resource}`);\n      });\n    });\n\n    await Promise.all(promises);\n    console.log('Critical resources preloaded');\n  };\n\n  const optimizeImages = async (): Promise<void> => {\n    // This would typically involve image compression\n    // For demo purposes, we'll simulate the action\n    return new Promise(resolve => {\n      setTimeout(() => {\n        console.log('Images optimized');\n        resolve();\n      }, 2000);\n    });\n  };\n\n  const enableServiceWorker = async () => {\n    if ('serviceWorker' in navigator) {\n      try {\n        await navigator.serviceWorker.register('/service-worker.js');\n        console.log('Service Worker enabled');\n      } catch (error) {\n        console.error('Service Worker registration failed:', error);\n      }\n    }\n  };\n\n  const optimizeBundles = async (): Promise<void> => {\n    // This would typically involve build process optimizations\n    // For demo purposes, we'll simulate the action\n    return new Promise(resolve => {\n      setTimeout(() => {\n        console.log('Bundles optimized');\n        resolve();\n      }, 1500);\n    });\n  };\n\n  const executeOptimization = async (id: string) => {\n    setIsOptimizing(true);\n    const optimization = optimizations.find(opt => opt.id === id);\n    \n    if (optimization) {\n      try {\n        await optimization.action();\n        setOptimizations(prev => \n          prev.map(opt => \n            opt.id === id ? { ...opt, completed: true } : opt\n          )\n        );\n      } catch (error) {\n        console.error(`Optimization ${id} failed:`, error);\n      }\n    }\n    \n    setIsOptimizing(false);\n  };\n\n  const executeAllOptimizations = async () => {\n    setIsOptimizing(true);\n    \n    for (const optimization of optimizations) {\n      if (!optimization.completed) {\n        try {\n          await optimization.action();\n          setOptimizations(prev => \n            prev.map(opt => \n              opt.id === optimization.id ? { ...opt, completed: true } : opt\n            )\n          );\n        } catch (error) {\n          console.error(`Optimization ${optimization.id} failed:`, error);\n        }\n      }\n    }\n    \n    setIsOptimizing(false);\n  };\n\n  const getScoreColor = (score: number) => {\n    if (score >= 80) return 'text-green-600';\n    if (score >= 60) return 'text-yellow-600';\n    return 'text-red-600';\n  };\n\n  const getImpactColor = (impact: string) => {\n    switch (impact) {\n      case 'high': return 'bg-green-100 text-green-800';\n      case 'medium': return 'bg-yellow-100 text-yellow-800';\n      case 'low': return 'bg-gray-100 text-gray-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const completedOptimizations = optimizations.filter(opt => opt.completed).length;\n  const totalOptimizations = optimizations.length;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Performance Score */}\n      <WindowsCard>\n        <div className=\"p-6 border-b border-gray-100\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-blue-50 rounded-sm flex items-center justify-center\">\n                <Zap className=\"w-5 h-5 text-blue-600\" />\n              </div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900\">Score de Performance</h3>\n                <p className=\"text-sm text-gray-600\">Optimisation en temps réel</p>\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <div className={`text-4xl font-bold ${getScoreColor(performanceScore)}`}>\n                {performanceScore}\n              </div>\n              <div className=\"text-xs text-gray-600\">/ 100</div>\n            </div>\n          </div>\n        </div>\n        <WindowsCardContent className=\"p-6\">\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <Clock className=\"w-6 h-6 mx-auto mb-2 text-gray-600\" />\n              <div className=\"text-lg font-semibold\">{metrics.loadTime.toFixed(0)}ms</div>\n              <div className=\"text-xs text-gray-600\">Temps de chargement</div>\n            </div>\n            <div className=\"text-center\">\n              <Database className=\"w-6 h-6 mx-auto mb-2 text-gray-600\" />\n              <div className=\"text-lg font-semibold\">{metrics.memoryUsage.toFixed(0)}MB</div>\n              <div className=\"text-xs text-gray-600\">Mémoire utilisée</div>\n            </div>\n            <div className=\"text-center\">\n              <Wifi className=\"w-6 h-6 mx-auto mb-2 text-gray-600\" />\n              <div className=\"text-lg font-semibold\">{metrics.networkRequests}</div>\n              <div className=\"text-xs text-gray-600\">Requêtes réseau</div>\n            </div>\n            <div className=\"text-center\">\n              <HardDrive className=\"w-6 h-6 mx-auto mb-2 text-gray-600\" />\n              <div className=\"text-lg font-semibold\">{metrics.cacheSize.toFixed(1)}MB</div>\n              <div className=\"text-xs text-gray-600\">Cache utilisé</div>\n            </div>\n          </div>\n        </WindowsCardContent>\n      </WindowsCard>\n\n      {/* Optimization Actions */}\n      <Tabs defaultValue=\"quick\" className=\"space-y-4\">\n        <TabsList className=\"grid w-full grid-cols-3\">\n          <TabsTrigger value=\"quick\">Optimisation Rapide</TabsTrigger>\n          <TabsTrigger value=\"advanced\">Avancé</TabsTrigger>\n          <TabsTrigger value=\"monitoring\">Surveillance</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"quick\" className=\"space-y-4\">\n          <WindowsCard>\n            <div className=\"p-6 border-b border-gray-100\">\n              <div className=\"flex items-center justify-between\">\n                <h4 className=\"text-lg font-semibold text-gray-900\">Actions d'Optimisation</h4>\n                <div className=\"flex items-center space-x-2\">\n                  <Progress value={(completedOptimizations / totalOptimizations) * 100} className=\"w-24\" />\n                  <span className=\"text-sm text-gray-600\">\n                    {completedOptimizations}/{totalOptimizations}\n                  </span>\n                </div>\n              </div>\n            </div>\n            <WindowsCardContent className=\"p-6\">\n              <div className=\"space-y-4\">\n                {optimizations.map((optimization) => (\n                  <div \n                    key={optimization.id}\n                    className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg\"\n                  >\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <h5 className=\"font-medium text-gray-900\">{optimization.name}</h5>\n                        <Badge className={getImpactColor(optimization.impact)}>\n                          Impact {optimization.impact}\n                        </Badge>\n                        {optimization.completed && (\n                          <Badge variant=\"default\" className=\"bg-green-100 text-green-800\">\n                            ✓ Terminé\n                          </Badge>\n                        )}\n                      </div>\n                      <p className=\"text-sm text-gray-600\">{optimization.description}</p>\n                    </div>\n                    <div className=\"ml-4\">\n                      <Button\n                        onClick={() => executeOptimization(optimization.id)}\n                        disabled={optimization.completed || isOptimizing}\n                        size=\"sm\"\n                      >\n                        {optimization.completed ? 'Terminé' : 'Optimiser'}\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n              \n              <div className=\"mt-6 pt-6 border-t border-gray-200\">\n                <Button\n                  onClick={executeAllOptimizations}\n                  disabled={isOptimizing || completedOptimizations === totalOptimizations}\n                  className=\"w-full flex items-center justify-center space-x-2\"\n                >\n                  {isOptimizing ? (\n                    <>\n                      <RefreshCw className=\"w-4 h-4 animate-spin\" />\n                      <span>Optimisation en cours...</span>\n                    </>\n                  ) : (\n                    <>\n                      <TrendingUp className=\"w-4 h-4\" />\n                      <span>Optimiser Tout</span>\n                    </>\n                  )}\n                </Button>\n              </div>\n            </WindowsCardContent>\n          </WindowsCard>\n        </TabsContent>\n\n        <TabsContent value=\"advanced\" className=\"space-y-4\">\n          <WindowsCard>\n            <div className=\"p-6 border-b border-gray-100\">\n              <h4 className=\"text-lg font-semibold text-gray-900\">Optimisations Avancées</h4>\n            </div>\n            <WindowsCardContent className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <Button variant=\"outline\" className=\"h-16 flex-col\">\n                  <Image className=\"w-6 h-6 mb-2\" />\n                  <span>Compression Images</span>\n                </Button>\n                <Button variant=\"outline\" className=\"h-16 flex-col\">\n                  <Database className=\"w-6 h-6 mb-2\" />\n                  <span>Optimisation DB</span>\n                </Button>\n                <Button variant=\"outline\" className=\"h-16 flex-col\">\n                  <Settings className=\"w-6 h-6 mb-2\" />\n                  <span>Configuration</span>\n                </Button>\n                <Button variant=\"outline\" className=\"h-16 flex-col\">\n                  <Trash2 className=\"w-6 h-6 mb-2\" />\n                  <span>Nettoyage Avancé</span>\n                </Button>\n              </div>\n            </WindowsCardContent>\n          </WindowsCard>\n        </TabsContent>\n\n        <TabsContent value=\"monitoring\" className=\"space-y-4\">\n          <WindowsCard>\n            <div className=\"p-6 border-b border-gray-100\">\n              <h4 className=\"text-lg font-semibold text-gray-900\">Surveillance Continue</h4>\n            </div>\n            <WindowsCardContent className=\"p-6\">\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span>Surveillance automatique</span>\n                  <Badge variant=\"default\" className=\"bg-green-100 text-green-800\">Activée</Badge>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span>Alertes de performance</span>\n                  <Badge variant=\"default\" className=\"bg-blue-100 text-blue-800\">Configurées</Badge>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span>Optimisation automatique</span>\n                  <Badge variant=\"secondary\">Désactivée</Badge>\n                </div>\n              </div>\n            </WindowsCardContent>\n          </WindowsCard>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}","size_bytes":16774},"client/src/components/PredictiveAnalytics.tsx":{"content":"import { useState, useEffect, useMemo } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { WindowsCard, WindowsCardContent } from \"@/components/WindowsCard\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { TrendingUp, TrendingDown, AlertTriangle, Brain, Calendar, Package, ShoppingCart } from \"lucide-react\";\nimport InteractiveChart from \"./InteractiveChart\";\n\ninterface PredictiveInsight {\n  type: 'stockout_risk' | 'demand_forecast' | 'price_alert' | 'supplier_risk';\n  articleId?: string;\n  articleName?: string;\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  message: string;\n  recommendation: string;\n  confidence: number;\n  timeframe?: string;\n  impact?: string;\n  data?: any;\n}\n\ninterface DemandForecast {\n  articleId: string;\n  predictions: Array<{\n    date: string;\n    predicted: number;\n    confidence: number;\n    factors: string[];\n  }>;\n}\n\ninterface PredictiveAnalyticsProps {\n  articleId?: string;\n  showGlobalInsights?: boolean;\n}\n\nexport default function PredictiveAnalytics({ \n  articleId, \n  showGlobalInsights = true \n}: PredictiveAnalyticsProps) {\n  const [insights, setInsights] = useState<PredictiveInsight[]>([]);\n  const [demandForecasts, setDemandForecasts] = useState<DemandForecast[]>([]);\n\n  // Fetch articles data for analysis\n  const { data: articles = [] } = useQuery<any[]>({\n    queryKey: [\"/api/articles\"],\n  });\n\n  const { data: stockMovements = [] } = useQuery<any[]>({\n    queryKey: [\"/api/stock-movements\", articleId],\n  });\n\n  const { data: purchaseRequests = [] } = useQuery<any[]>({\n    queryKey: [\"/api/purchase-requests\"],\n  });\n\n  // Generate predictive insights\n  useEffect(() => {\n    if (Array.isArray(articles) && articles.length > 0) {\n      const generatedInsights = generatePredictiveInsights(articles, stockMovements, purchaseRequests);\n      setInsights(generatedInsights);\n      \n      const forecasts = generateDemandForecasts(articles, stockMovements);\n      setDemandForecasts(forecasts);\n    }\n  }, [articles, stockMovements, purchaseRequests]);\n\n  const generatePredictiveInsights = (\n    articles: any[], \n    movements: any[], \n    requests: any[]\n  ): PredictiveInsight[] => {\n    const insights: PredictiveInsight[] = [];\n\n    // Stockout Risk Analysis\n    articles.forEach(article => {\n      const consumption = calculateConsumptionRate(article.id, movements);\n      const daysUntilStockout = article.stockActuel / (consumption || 1);\n      \n      if (daysUntilStockout <= 7) {\n        insights.push({\n          type: 'stockout_risk',\n          articleId: article.id,\n          articleName: article.designation,\n          severity: daysUntilStockout <= 3 ? 'critical' : 'high',\n          message: `Risque de rupture dans ${Math.ceil(daysUntilStockout)} jours`,\n          recommendation: `Commander ${Math.ceil(consumption * 30)} unités pour couvrir 30 jours`,\n          confidence: calculateConfidence(movements.length),\n          timeframe: `${Math.ceil(daysUntilStockout)} jours`,\n          impact: 'Production arrêtée'\n        });\n      }\n    });\n\n    // Demand Pattern Analysis\n    const seasonalArticles = detectSeasonalPatterns(articles, movements);\n    seasonalArticles.forEach(article => {\n      insights.push({\n        type: 'demand_forecast',\n        articleId: article.id,\n        articleName: article.name,\n        severity: 'medium',\n        message: `Pic de demande prévu ${article.nextPeak}`,\n        recommendation: `Augmenter le stock de ${article.recommendedIncrease}%`,\n        confidence: article.confidence,\n        timeframe: article.nextPeak\n      });\n    });\n\n    // Price Alert Analysis\n    const priceAlerts = detectPriceAnomalies(articles);\n    priceAlerts.forEach(alert => {\n      insights.push({\n        type: 'price_alert',\n        articleId: alert.articleId,\n        articleName: alert.articleName,\n        severity: alert.severity,\n        message: alert.message,\n        recommendation: alert.recommendation,\n        confidence: 85\n      });\n    });\n\n    return insights.slice(0, 10); // Limit to top 10 insights\n  };\n\n  const generateDemandForecasts = (articles: any[], movements: any[]): DemandForecast[] => {\n    return articles.slice(0, 5).map(article => ({\n      articleId: article.id,\n      predictions: generateForecastData(article, movements)\n    }));\n  };\n\n  const generateForecastData = (article: any, movements: any[]) => {\n    const predictions = [];\n    const baseConsumption = calculateConsumptionRate(article.id, movements) || 5;\n    \n    for (let i = 0; i < 12; i++) {\n      const date = new Date();\n      date.setMonth(date.getMonth() + i);\n      \n      // Simple seasonal adjustment\n      const seasonalFactor = 1 + 0.2 * Math.sin((date.getMonth() / 12) * 2 * Math.PI);\n      const predicted = Math.round(baseConsumption * seasonalFactor * (0.9 + Math.random() * 0.2));\n      \n      predictions.push({\n        date: date.toISOString().split('T')[0],\n        predicted,\n        confidence: Math.max(60, 95 - (i * 5)), // Decreasing confidence over time\n        factors: ['Tendance historique', 'Variations saisonnières', 'Cycles de maintenance']\n      });\n    }\n    \n    return predictions;\n  };\n\n  const calculateConsumptionRate = (articleId: string, movements: any[]): number => {\n    const outboundMovements = movements.filter(m => \n      m.articleId === articleId && m.type === 'sortie'\n    );\n    \n    if (outboundMovements.length === 0) return 0;\n    \n    const totalQuantity = outboundMovements.reduce((sum, m) => sum + m.quantite, 0);\n    const days = Math.max(1, (Date.now() - new Date(outboundMovements[0].dateMovement).getTime()) / (1000 * 60 * 60 * 24));\n    \n    return totalQuantity / days;\n  };\n\n  const calculateConfidence = (dataPoints: number): number => {\n    return Math.min(95, Math.max(50, dataPoints * 10));\n  };\n\n  const detectSeasonalPatterns = (articles: any[], movements: any[]) => {\n    // Simplified seasonal detection\n    return articles.slice(0, 2).map(article => ({\n      id: article.id,\n      name: article.designation,\n      nextPeak: 'dans 3 mois',\n      recommendedIncrease: 25,\n      confidence: 75\n    }));\n  };\n\n  const detectPriceAnomalies = (articles: any[]) => {\n    return articles\n      .filter(article => article.prixUnitaire > 100)\n      .slice(0, 2)\n      .map(article => ({\n        articleId: article.id,\n        articleName: article.designation,\n        severity: 'medium' as const,\n        message: `Prix élevé détecté: ${article.prixUnitaire}€`,\n        recommendation: 'Rechercher des fournisseurs alternatifs'\n      }));\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'critical': return 'bg-red-500';\n      case 'high': return 'bg-orange-500';\n      case 'medium': return 'bg-yellow-500';\n      case 'low': return 'bg-blue-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const getSeverityIcon = (type: string) => {\n    switch (type) {\n      case 'stockout_risk': return AlertTriangle;\n      case 'demand_forecast': return TrendingUp;\n      case 'price_alert': return Package;\n      case 'supplier_risk': return ShoppingCart;\n      default: return Brain;\n    }\n  };\n\n  const criticalInsights = insights.filter(i => i.severity === 'critical');\n  const highPriorityInsights = insights.filter(i => i.severity === 'high');\n\n  return (\n    <div className=\"space-y-6\">\n      {/* AI Insights Header */}\n      <WindowsCard>\n        <div className=\"p-6 border-b border-gray-100\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-blue-50 rounded-sm flex items-center justify-center\">\n              <Brain className=\"w-5 h-5 text-blue-600\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900\">Intelligence Prédictive</h3>\n              <p className=\"text-sm text-gray-600\">Analyse automatique des tendances et prédictions</p>\n            </div>\n          </div>\n        </div>\n        <WindowsCardContent className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-red-600\">{criticalInsights.length}</div>\n              <div className=\"text-xs text-gray-600\">Alertes Critiques</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-orange-600\">{highPriorityInsights.length}</div>\n              <div className=\"text-xs text-gray-600\">Priorité Haute</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">{demandForecasts.length}</div>\n              <div className=\"text-xs text-gray-600\">Prévisions Actives</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-600\">\n                {Math.round(insights.reduce((sum, i) => sum + i.confidence, 0) / insights.length || 0)}%\n              </div>\n              <div className=\"text-xs text-gray-600\">Confiance Moyenne</div>\n            </div>\n          </div>\n        </WindowsCardContent>\n      </WindowsCard>\n\n      {/* Critical Alerts */}\n      {criticalInsights.length > 0 && (\n        <Alert className=\"border-red-200 bg-red-50\">\n          <AlertTriangle className=\"h-4 w-4 text-red-600\" />\n          <AlertDescription>\n            <strong>{criticalInsights.length} alerte(s) critique(s)</strong> nécessitent une action immédiate\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {/* Insights List */}\n      <WindowsCard>\n        <div className=\"p-6 border-b border-gray-100\">\n          <h3 className=\"text-lg font-semibold text-gray-900\">Recommandations Intelligentes</h3>\n        </div>\n        <WindowsCardContent className=\"p-0\">\n          {insights.length > 0 ? (\n            <div className=\"divide-y divide-gray-100\">\n              {insights.map((insight, index) => {\n                const Icon = getSeverityIcon(insight.type);\n                return (\n                  <div key={index} className=\"p-6 hover:bg-gray-50\">\n                    <div className=\"flex items-start space-x-4\">\n                      <div className={`w-8 h-8 rounded-sm flex items-center justify-center ${getSeverityColor(insight.severity)}`}>\n                        <Icon className=\"w-4 h-4 text-white\" />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center space-x-2 mb-2\">\n                          <h4 className=\"text-sm font-medium text-gray-900\">{insight.message}</h4>\n                          <Badge variant=\"secondary\" className=\"text-xs\">\n                            {insight.confidence}% confiance\n                          </Badge>\n                          {insight.timeframe && (\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              <Calendar className=\"w-3 h-3 mr-1\" />\n                              {insight.timeframe}\n                            </Badge>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-gray-600 mb-2\">{insight.recommendation}</p>\n                        {insight.articleName && (\n                          <p className=\"text-xs text-gray-500\">Article: {insight.articleName}</p>\n                        )}\n                      </div>\n                      <Button variant=\"outline\" size=\"sm\">\n                        Action\n                      </Button>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            <div className=\"text-center py-12\">\n              <Brain className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n              <h4 className=\"text-lg font-medium text-gray-900 mb-2\">Analyse en cours</h4>\n              <p className=\"text-gray-600\">L'IA analyse vos données pour générer des insights</p>\n            </div>\n          )}\n        </WindowsCardContent>\n      </WindowsCard>\n\n      {/* Demand Forecasting Charts */}\n      {demandForecasts.length > 0 && (\n        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n          {demandForecasts.slice(0, 2).map((forecast) => {\n            const article = Array.isArray(articles) ? articles.find((a: any) => a.id === forecast.articleId) : null;\n            return (\n              <InteractiveChart\n                key={forecast.articleId}\n                data={forecast.predictions.map(p => ({\n                  date: new Date(p.date).toLocaleDateString('fr-FR', { month: 'short', year: '2-digit' }),\n                  predicted: p.predicted,\n                  confidence: p.confidence\n                }))}\n                title={`Prévision: ${article?.designation || 'Article'}`}\n                description=\"Demande prévue sur 12 mois\"\n                defaultType=\"line\"\n                xAxisKey=\"date\"\n                yAxisKey=\"predicted\"\n                colors={['#3B82F6']}\n                showAnalytics={true}\n              />\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":13252},"client/src/components/SecondaryNavBar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { \n  Home, \n  Package, \n  ShoppingCart, \n  TrendingUp, \n  Truck, \n  Users, \n  FileText, \n  BarChart3,\n  Settings,\n  HelpCircle\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\nconst navItems = [\n  { href: \"/\", label: \"Accueil\", icon: Home },\n  { href: \"/articles\", label: \"Articles\", icon: Package },\n  { href: \"/purchase-requests\", label: \"Demandes\", icon: ShoppingCart },\n  { href: \"/stock-status\", label: \"État Stock\", icon: TrendingUp },\n  { href: \"/reception\", label: \"Réception\", icon: Truck },\n  { href: \"/sortie\", label: \"Sortie\", icon: Package },\n  { href: \"/suppliers\", label: \"Fournisseurs\", icon: Users },\n  { href: \"/requestors\", label: \"Demandeurs\", icon: Users },\n  { href: \"/reports\", label: \"Rapports\", icon: FileText },\n];\n\nexport default function SecondaryNavBar() {\n  const [location] = useLocation();\n\n  return (\n    <div className=\"bg-blue-600 text-white shadow-sm\">\n      <div className=\"px-6\">\n        <div className=\"flex items-center space-x-1 overflow-x-auto\">\n          {navItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = location === item.href;\n            \n            return (\n              <Link key={item.href} href={item.href}>\n                <Button\n                  variant=\"ghost\"\n                  className={`\n                    flex items-center space-x-2 px-4 py-3 text-sm font-medium rounded-none border-b-2 transition-all whitespace-nowrap\n                    ${isActive \n                      ? 'text-white border-white bg-blue-700/30' \n                      : 'text-blue-100 border-transparent hover:text-white hover:bg-blue-700/20 hover:border-blue-300'\n                    }\n                  `}\n                >\n                  <Icon className=\"w-4 h-4\" />\n                  <span>{item.label}</span>\n                </Button>\n              </Link>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":1993},"client/src/components/Settings.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { WindowsCard, WindowsCardContent } from \"@/components/WindowsCard\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Settings as SettingsIcon, \n  Palette, \n  Shield, \n  Bell, \n  Database, \n  Zap,\n  Users,\n  FileText,\n  Globe,\n  Smartphone,\n  Eye,\n  Clock,\n  Save,\n  RefreshCw,\n  Download,\n  Upload\n} from \"lucide-react\";\n\ninterface AppSettings {\n  // Appearance\n  theme: 'light' | 'dark' | 'auto';\n  language: string;\n  density: 'compact' | 'comfortable' | 'spacious';\n  accentColor: string;\n  fontSize: number;\n  animations: boolean;\n  \n  // Functionality\n  autoSave: boolean;\n  autoRefresh: boolean;\n  refreshInterval: number;\n  notifications: boolean;\n  soundEffects: boolean;\n  confirmActions: boolean;\n  \n  // Data & Performance\n  cacheSize: number;\n  offlineMode: boolean;\n  dataValidation: boolean;\n  performanceMode: 'standard' | 'optimized' | 'maximum';\n  \n  // Security\n  sessionTimeout: number;\n  autoLogout: boolean;\n  auditLogging: boolean;\n  twoFactorAuth: boolean;\n  \n  // Advanced\n  developerMode: boolean;\n  debugMode: boolean;\n  apiTimeout: number;\n  maxRetries: number;\n}\n\ninterface SettingsProps {\n  onClose?: () => void;\n}\n\nexport default function Settings({ onClose }: SettingsProps) {\n  const { toast } = useToast();\n  const [settings, setSettings] = useState<AppSettings>({\n    // Appearance defaults\n    theme: 'light',\n    language: 'fr',\n    density: 'comfortable',\n    accentColor: '#3B82F6',\n    fontSize: 14,\n    animations: true,\n    \n    // Functionality defaults\n    autoSave: true,\n    autoRefresh: true,\n    refreshInterval: 30,\n    notifications: true,\n    soundEffects: false,\n    confirmActions: true,\n    \n    // Data & Performance defaults\n    cacheSize: 100,\n    offlineMode: true,\n    dataValidation: true,\n    performanceMode: 'standard',\n    \n    // Security defaults\n    sessionTimeout: 60,\n    autoLogout: true,\n    auditLogging: true,\n    twoFactorAuth: false,\n    \n    // Advanced defaults\n    developerMode: false,\n    debugMode: false,\n    apiTimeout: 10000,\n    maxRetries: 3\n  });\n\n  const [hasChanges, setHasChanges] = useState(false);\n  const [isExporting, setIsExporting] = useState(false);\n  const [isImporting, setIsImporting] = useState(false);\n\n  // Load settings from localStorage\n  useEffect(() => {\n    const savedSettings = localStorage.getItem('stockceramique-settings');\n    if (savedSettings) {\n      try {\n        const parsed = JSON.parse(savedSettings);\n        setSettings(prev => ({ ...prev, ...parsed }));\n      } catch (error) {\n        console.error('Failed to load settings:', error);\n      }\n    }\n  }, []);\n\n  // Apply theme changes\n  useEffect(() => {\n    const root = document.documentElement;\n    \n    if (settings.theme === 'dark') {\n      root.classList.add('dark');\n    } else if (settings.theme === 'light') {\n      root.classList.remove('dark');\n    } else {\n      // Auto theme based on system preference\n      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n      if (mediaQuery.matches) {\n        root.classList.add('dark');\n      } else {\n        root.classList.remove('dark');\n      }\n    }\n\n    // Apply accent color\n    root.style.setProperty('--primary', settings.accentColor);\n    \n    // Apply font size\n    root.style.setProperty('--font-size-base', `${settings.fontSize}px`);\n    \n    // Apply density\n    const densityMap = {\n      compact: '0.75rem',\n      comfortable: '1rem',\n      spacious: '1.25rem'\n    };\n    root.style.setProperty('--spacing-unit', densityMap[settings.density]);\n    \n    // Apply animations\n    if (!settings.animations) {\n      root.style.setProperty('--animation-duration', '0s');\n    } else {\n      root.style.setProperty('--animation-duration', '0.2s');\n    }\n  }, [settings.theme, settings.accentColor, settings.fontSize, settings.density, settings.animations]);\n\n  const updateSetting = (key: keyof AppSettings, value: any) => {\n    setSettings(prev => ({ ...prev, [key]: value }));\n    setHasChanges(true);\n  };\n\n  const saveSettings = () => {\n    localStorage.setItem('stockceramique-settings', JSON.stringify(settings));\n    setHasChanges(false);\n    toast({\n      title: \"Paramètres sauvegardés\",\n      description: \"Vos préférences ont été enregistrées avec succès\",\n    });\n  };\n\n  const resetSettings = () => {\n    if (window.confirm(\"Êtes-vous sûr de vouloir réinitialiser tous les paramètres ?\")) {\n      localStorage.removeItem('stockceramique-settings');\n      window.location.reload();\n    }\n  };\n\n  const exportSettings = async () => {\n    setIsExporting(true);\n    try {\n      const dataStr = JSON.stringify(settings, null, 2);\n      const dataBlob = new Blob([dataStr], { type: 'application/json' });\n      const url = URL.createObjectURL(dataBlob);\n      \n      const link = document.createElement('a');\n      link.href = url;\n      link.download = 'stockceramique-settings.json';\n      link.click();\n      \n      URL.revokeObjectURL(url);\n      toast({\n        title: \"Paramètres exportés\",\n        description: \"Le fichier de configuration a été téléchargé\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Erreur d'export\",\n        description: \"Impossible d'exporter les paramètres\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  const importSettings = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    setIsImporting(true);\n    const reader = new FileReader();\n    \n    reader.onload = (e) => {\n      try {\n        const imported = JSON.parse(e.target?.result as string);\n        setSettings(prev => ({ ...prev, ...imported }));\n        setHasChanges(true);\n        toast({\n          title: \"Paramètres importés\",\n          description: \"Configuration restaurée avec succès\",\n        });\n      } catch (error) {\n        toast({\n          title: \"Erreur d'import\",\n          description: \"Fichier de configuration invalide\",\n          variant: \"destructive\",\n        });\n      } finally {\n        setIsImporting(false);\n      }\n    };\n    \n    reader.readAsText(file);\n  };\n\n  const accentColors = [\n    { name: 'Bleu', value: '#3B82F6' },\n    { name: 'Indigo', value: '#6366F1' },\n    { name: 'Violet', value: '#8B5CF6' },\n    { name: 'Rose', value: '#EC4899' },\n    { name: 'Vert', value: '#10B981' },\n    { name: 'Orange', value: '#F59E0B' },\n    { name: 'Rouge', value: '#EF4444' },\n    { name: 'Gris', value: '#6B7280' }\n  ];\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-[95vw] sm:max-w-4xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"p-4 sm:p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-blue-50 rounded-sm flex items-center justify-center\">\n                <SettingsIcon className=\"w-5 h-5 text-blue-600\" />\n              </div>\n              <div>\n                <h2 className=\"text-xl font-semibold text-gray-900\">Paramètres</h2>\n                <p className=\"text-sm text-gray-600\">Personnalisez votre expérience StockCéramique</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              {hasChanges && (\n                <Badge variant=\"secondary\" className=\"text-orange-600 bg-orange-50\">\n                  Modifications non sauvegardées\n                </Badge>\n              )}\n              <Button variant=\"outline\" onClick={onClose}>\n                Fermer\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-4 sm:p-6 overflow-y-auto max-h-[calc(95vh-200px)] sm:max-h-[calc(90vh-200px)]\">\n          <Tabs defaultValue=\"appearance\" className=\"space-y-6\">\n            <TabsList className=\"grid w-full grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-1\">\n              <TabsTrigger value=\"appearance\" className=\"text-xs sm:text-sm\">\n                <Palette className=\"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2\" />\n                <span className=\"hidden sm:inline\">Apparence</span>\n                <span className=\"sm:hidden\">App</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"functionality\" className=\"text-xs sm:text-sm\">\n                <Zap className=\"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2\" />\n                <span className=\"hidden sm:inline\">Fonctions</span>\n                <span className=\"sm:hidden\">Fn</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"data\" className=\"text-xs sm:text-sm\">\n                <Database className=\"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2\" />\n                <span className=\"hidden sm:inline\">Données</span>\n                <span className=\"sm:hidden\">Data</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"security\" className=\"text-xs sm:text-sm\">\n                <Shield className=\"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2\" />\n                <span className=\"hidden sm:inline\">Sécurité</span>\n                <span className=\"sm:hidden\">Sec</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"notifications\" className=\"text-xs sm:text-sm\">\n                <Bell className=\"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2\" />\n                <span className=\"hidden sm:inline\">Alertes</span>\n                <span className=\"sm:hidden\">Alert</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"advanced\" className=\"text-xs sm:text-sm\">\n                <SettingsIcon className=\"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2\" />\n                <span className=\"hidden sm:inline\">Avancé</span>\n                <span className=\"sm:hidden\">Adv</span>\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"appearance\" className=\"space-y-6\">\n              <WindowsCard>\n                <div className=\"p-6 border-b border-gray-100\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Personnalisation Visuelle</h3>\n                </div>\n                <WindowsCardContent className=\"p-6 space-y-6\">\n                  {/* Theme */}\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Thème</Label>\n                      <Select value={settings.theme} onValueChange={(value: any) => updateSetting('theme', value)}>\n                        <SelectTrigger className=\"mt-2\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"light\">Clair</SelectItem>\n                          <SelectItem value=\"dark\">Sombre</SelectItem>\n                          <SelectItem value=\"auto\">Automatique</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    <div>\n                      <Label className=\"text-sm font-medium\">Langue</Label>\n                      <Select value={settings.language} onValueChange={(value) => updateSetting('language', value)}>\n                        <SelectTrigger className=\"mt-2\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"fr\">Français</SelectItem>\n                          <SelectItem value=\"en\">English</SelectItem>\n                          <SelectItem value=\"es\">Español</SelectItem>\n                          <SelectItem value=\"de\">Deutsch</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n\n                  {/* Density */}\n                  <div>\n                    <Label className=\"text-sm font-medium\">Densité d'affichage</Label>\n                    <Select value={settings.density} onValueChange={(value: any) => updateSetting('density', value)}>\n                      <SelectTrigger className=\"mt-2\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"compact\">Compact</SelectItem>\n                        <SelectItem value=\"comfortable\">Confortable</SelectItem>\n                        <SelectItem value=\"spacious\">Spacieux</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  {/* Accent Colors */}\n                  <div>\n                    <Label className=\"text-sm font-medium mb-3 block\">Couleur d'accent</Label>\n                    <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3\">\n                      {accentColors.map((color) => (\n                        <button\n                          key={color.value}\n                          onClick={() => updateSetting('accentColor', color.value)}\n                          className={`p-2 sm:p-3 rounded-lg border-2 flex items-center justify-center sm:justify-start space-x-1 sm:space-x-2 transition-all ${\n                            settings.accentColor === color.value \n                              ? 'border-blue-500 bg-blue-50' \n                              : 'border-gray-200 hover:border-gray-300'\n                          }`}\n                        >\n                          <div \n                            className=\"w-3 h-3 sm:w-4 sm:h-4 rounded-full flex-shrink-0\" \n                            style={{ backgroundColor: color.value }}\n                          />\n                          <span className=\"text-xs sm:text-sm truncate\">{color.name}</span>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Font Size */}\n                  <div>\n                    <Label className=\"text-sm font-medium\">Taille de police: {settings.fontSize}px</Label>\n                    <Slider\n                      value={[settings.fontSize]}\n                      onValueChange={(value) => updateSetting('fontSize', value[0])}\n                      max={20}\n                      min={10}\n                      step={1}\n                      className=\"mt-2\"\n                    />\n                  </div>\n\n                  {/* Animations */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Animations</Label>\n                      <p className=\"text-xs text-gray-600\">Active les transitions et animations</p>\n                    </div>\n                    <Switch\n                      checked={settings.animations}\n                      onCheckedChange={(checked) => updateSetting('animations', checked)}\n                    />\n                  </div>\n                </WindowsCardContent>\n              </WindowsCard>\n            </TabsContent>\n\n            <TabsContent value=\"functionality\" className=\"space-y-6\">\n              <WindowsCard>\n                <div className=\"p-6 border-b border-gray-100\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Comportement de l'Application</h3>\n                </div>\n                <WindowsCardContent className=\"p-6 space-y-6\">\n                  {/* Auto Save */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Sauvegarde automatique</Label>\n                      <p className=\"text-xs text-gray-600\">Sauvegarde automatiquement vos modifications</p>\n                    </div>\n                    <Switch\n                      checked={settings.autoSave}\n                      onCheckedChange={(checked) => updateSetting('autoSave', checked)}\n                    />\n                  </div>\n\n                  {/* Auto Refresh */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Actualisation automatique</Label>\n                      <p className=\"text-xs text-gray-600\">Met à jour les données automatiquement</p>\n                    </div>\n                    <Switch\n                      checked={settings.autoRefresh}\n                      onCheckedChange={(checked) => updateSetting('autoRefresh', checked)}\n                    />\n                  </div>\n\n                  {/* Refresh Interval */}\n                  {settings.autoRefresh && (\n                    <div>\n                      <Label className=\"text-sm font-medium\">Intervalle de rafraîchissement: {settings.refreshInterval}s</Label>\n                      <Slider\n                        value={[settings.refreshInterval]}\n                        onValueChange={(value) => updateSetting('refreshInterval', value[0])}\n                        max={300}\n                        min={10}\n                        step={10}\n                        className=\"mt-2\"\n                      />\n                    </div>\n                  )}\n\n                  {/* Confirm Actions */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Confirmer les actions</Label>\n                      <p className=\"text-xs text-gray-600\">Demande confirmation pour les actions importantes</p>\n                    </div>\n                    <Switch\n                      checked={settings.confirmActions}\n                      onCheckedChange={(checked) => updateSetting('confirmActions', checked)}\n                    />\n                  </div>\n\n                  {/* Sound Effects */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Effets sonores</Label>\n                      <p className=\"text-xs text-gray-600\">Sons pour les notifications et actions</p>\n                    </div>\n                    <Switch\n                      checked={settings.soundEffects}\n                      onCheckedChange={(checked) => updateSetting('soundEffects', checked)}\n                    />\n                  </div>\n                </WindowsCardContent>\n              </WindowsCard>\n            </TabsContent>\n\n            <TabsContent value=\"data\" className=\"space-y-6\">\n              <WindowsCard>\n                <div className=\"p-6 border-b border-gray-100\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Gestion des Données</h3>\n                </div>\n                <WindowsCardContent className=\"p-6 space-y-6\">\n                  {/* Performance Mode */}\n                  <div>\n                    <Label className=\"text-sm font-medium\">Mode de performance</Label>\n                    <Select value={settings.performanceMode} onValueChange={(value: any) => updateSetting('performanceMode', value)}>\n                      <SelectTrigger className=\"mt-2\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"standard\">Standard</SelectItem>\n                        <SelectItem value=\"optimized\">Optimisé</SelectItem>\n                        <SelectItem value=\"maximum\">Performance maximale</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  {/* Cache Size */}\n                  <div>\n                    <Label className=\"text-sm font-medium\">Taille du cache: {settings.cacheSize}MB</Label>\n                    <Slider\n                      value={[settings.cacheSize]}\n                      onValueChange={(value) => updateSetting('cacheSize', value[0])}\n                      max={1000}\n                      min={50}\n                      step={50}\n                      className=\"mt-2\"\n                    />\n                  </div>\n\n                  {/* Offline Mode */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Mode hors ligne</Label>\n                      <p className=\"text-xs text-gray-600\">Permet l'utilisation sans connexion internet</p>\n                    </div>\n                    <Switch\n                      checked={settings.offlineMode}\n                      onCheckedChange={(checked) => updateSetting('offlineMode', checked)}\n                    />\n                  </div>\n\n                  {/* Data Validation */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Validation des données</Label>\n                      <p className=\"text-xs text-gray-600\">Vérifie la cohérence des données saisies</p>\n                    </div>\n                    <Switch\n                      checked={settings.dataValidation}\n                      onCheckedChange={(checked) => updateSetting('dataValidation', checked)}\n                    />\n                  </div>\n                </WindowsCardContent>\n              </WindowsCard>\n            </TabsContent>\n\n            <TabsContent value=\"security\" className=\"space-y-6\">\n              <WindowsCard>\n                <div className=\"p-6 border-b border-gray-100\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Sécurité et Confidentialité</h3>\n                </div>\n                <WindowsCardContent className=\"p-6 space-y-6\">\n                  {/* Session Timeout */}\n                  <div>\n                    <Label className=\"text-sm font-medium\">Délai d'expiration de session: {settings.sessionTimeout} min</Label>\n                    <Slider\n                      value={[settings.sessionTimeout]}\n                      onValueChange={(value) => updateSetting('sessionTimeout', value[0])}\n                      max={480}\n                      min={15}\n                      step={15}\n                      className=\"mt-2\"\n                    />\n                  </div>\n\n                  {/* Auto Logout */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Déconnexion automatique</Label>\n                      <p className=\"text-xs text-gray-600\">Se déconnecte après inactivité</p>\n                    </div>\n                    <Switch\n                      checked={settings.autoLogout}\n                      onCheckedChange={(checked) => updateSetting('autoLogout', checked)}\n                    />\n                  </div>\n\n                  {/* Audit Logging */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Journalisation d'audit</Label>\n                      <p className=\"text-xs text-gray-600\">Enregistre toutes les actions utilisateur</p>\n                    </div>\n                    <Switch\n                      checked={settings.auditLogging}\n                      onCheckedChange={(checked) => updateSetting('auditLogging', checked)}\n                    />\n                  </div>\n\n                  {/* Two Factor Auth */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Authentification à deux facteurs</Label>\n                      <p className=\"text-xs text-gray-600\">Sécurité renforcée pour la connexion</p>\n                    </div>\n                    <Switch\n                      checked={settings.twoFactorAuth}\n                      onCheckedChange={(checked) => updateSetting('twoFactorAuth', checked)}\n                    />\n                  </div>\n                </WindowsCardContent>\n              </WindowsCard>\n            </TabsContent>\n\n            <TabsContent value=\"notifications\" className=\"space-y-6\">\n              <WindowsCard>\n                <div className=\"p-6 border-b border-gray-100\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Notifications et Alertes</h3>\n                </div>\n                <WindowsCardContent className=\"p-6 space-y-6\">\n                  {/* Notifications */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Notifications</Label>\n                      <p className=\"text-xs text-gray-600\">Active les notifications système</p>\n                    </div>\n                    <Switch\n                      checked={settings.notifications}\n                      onCheckedChange={(checked) => updateSetting('notifications', checked)}\n                    />\n                  </div>\n\n                  {settings.notifications && (\n                    <Alert>\n                      <Bell className=\"h-4 w-4\" />\n                      <AlertDescription>\n                        Les notifications vous aideront à rester informé des alertes de stock bas, \n                        des demandes d'achat en attente et des échéances importantes.\n                      </AlertDescription>\n                    </Alert>\n                  )}\n                </WindowsCardContent>\n              </WindowsCard>\n            </TabsContent>\n\n            <TabsContent value=\"advanced\" className=\"space-y-6\">\n              <WindowsCard>\n                <div className=\"p-6 border-b border-gray-100\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Paramètres Avancés</h3>\n                </div>\n                <WindowsCardContent className=\"p-6 space-y-6\">\n                  {/* API Timeout */}\n                  <div>\n                    <Label className=\"text-sm font-medium\">Délai d'attente API: {settings.apiTimeout}ms</Label>\n                    <Slider\n                      value={[settings.apiTimeout]}\n                      onValueChange={(value) => updateSetting('apiTimeout', value[0])}\n                      max={30000}\n                      min={5000}\n                      step={1000}\n                      className=\"mt-2\"\n                    />\n                  </div>\n\n                  {/* Max Retries */}\n                  <div>\n                    <Label className=\"text-sm font-medium\">Nombre maximum de tentatives: {settings.maxRetries}</Label>\n                    <Slider\n                      value={[settings.maxRetries]}\n                      onValueChange={(value) => updateSetting('maxRetries', value[0])}\n                      max={10}\n                      min={1}\n                      step={1}\n                      className=\"mt-2\"\n                    />\n                  </div>\n\n                  {/* Developer Mode */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Mode développeur</Label>\n                      <p className=\"text-xs text-gray-600\">Active les outils de développement</p>\n                    </div>\n                    <Switch\n                      checked={settings.developerMode}\n                      onCheckedChange={(checked) => updateSetting('developerMode', checked)}\n                    />\n                  </div>\n\n                  {/* Debug Mode */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Mode debug</Label>\n                      <p className=\"text-xs text-gray-600\">Affiche les informations de débogage</p>\n                    </div>\n                    <Switch\n                      checked={settings.debugMode}\n                      onCheckedChange={(checked) => updateSetting('debugMode', checked)}\n                    />\n                  </div>\n\n                  {/* Import/Export */}\n                  <div className=\"pt-4 border-t border-gray-200\">\n                    <Label className=\"text-sm font-medium mb-3 block\">Sauvegarde et Restauration</Label>\n                    <div className=\"flex space-x-3\">\n                      <Button\n                        onClick={exportSettings}\n                        disabled={isExporting}\n                        variant=\"outline\"\n                        className=\"flex items-center space-x-2\"\n                      >\n                        {isExporting ? <RefreshCw className=\"w-4 h-4 animate-spin\" /> : <Download className=\"w-4 h-4\" />}\n                        <span>Exporter</span>\n                      </Button>\n                      \n                      <div className=\"relative\">\n                        <Button\n                          disabled={isImporting}\n                          variant=\"outline\"\n                          className=\"flex items-center space-x-2\"\n                          onClick={() => document.getElementById('import-settings')?.click()}\n                        >\n                          {isImporting ? <RefreshCw className=\"w-4 h-4 animate-spin\" /> : <Upload className=\"w-4 h-4\" />}\n                          <span>Importer</span>\n                        </Button>\n                        <input\n                          id=\"import-settings\"\n                          type=\"file\"\n                          accept=\".json\"\n                          onChange={importSettings}\n                          className=\"hidden\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </WindowsCardContent>\n              </WindowsCard>\n            </TabsContent>\n          </Tabs>\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-4 sm:p-6 border-t border-gray-200 bg-gray-50\">\n          <div className=\"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-0\">\n            <div className=\"flex space-x-3 order-2 sm:order-1\">\n              <Button\n                onClick={resetSettings}\n                variant=\"outline\"\n                className=\"text-red-600 hover:text-red-700\"\n              >\n                Réinitialiser\n              </Button>\n            </div>\n            <div className=\"flex space-x-3 order-1 sm:order-2\">\n              <Button variant=\"outline\" onClick={onClose}>\n                Annuler\n              </Button>\n              <Button \n                onClick={saveSettings}\n                disabled={!hasChanges}\n                className=\"flex items-center space-x-2\"\n              >\n                <Save className=\"w-4 h-4\" />\n                <span>Sauvegarder</span>\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":31585},"client/src/components/SimpleChart.tsx":{"content":"import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, LineChart, Line, Cell } from \"recharts\";\n\ninterface SimpleChartProps {\n  data: any[];\n  type: 'line' | 'bar' | 'prediction';\n  xAxisKey: string;\n  yAxisKey: string;\n}\n\n// Chart colors matching the design\nconst CHART_COLORS = {\n  blue: '#4F8EF7',\n  green: '#10B981', \n  yellow: '#FFA500',\n  red: '#EF4444'\n};\n\nexport default function SimpleChart({ data, type, xAxisKey, yAxisKey }: SimpleChartProps) {\n  const formatValue = (value: number) => {\n    if (value >= 1000000) {\n      return `${(value / 1000000).toFixed(1)}M`;\n    } else if (value >= 1000) {\n      return `${(value / 1000).toFixed(1)}K`;\n    }\n    return value.toFixed(1);\n  };\n\n  const CustomTooltip = ({ active, payload, label }: any) => {\n    if (active && payload && payload.length) {\n      return (\n        <div className=\"bg-white border border-gray-200 rounded-lg p-3 shadow-lg\">\n          <p className=\"text-sm font-medium text-gray-900 mb-1\">{label}</p>\n          {payload.map((entry: any, index: number) => (\n            <div key={index} className=\"flex items-center space-x-2\">\n              <div \n                className=\"w-3 h-3 rounded-full\"\n                style={{ backgroundColor: entry.color }}\n              />\n              <span className=\"text-sm font-medium text-gray-900\">\n                {formatValue(entry.value)}\n              </span>\n            </div>\n          ))}\n        </div>\n      );\n    }\n    return null;\n  };\n\n  const commonProps = {\n    data: data,\n    margin: { top: 20, right: 30, left: 20, bottom: 20 }\n  };\n\n  switch (type) {\n    case 'line':\n      return (\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <LineChart {...commonProps}>\n            <CartesianGrid \n              strokeDasharray=\"none\" \n              stroke=\"#f3f4f6\" \n              strokeWidth={1}\n              horizontal={true}\n              vertical={false}\n            />\n            <XAxis \n              dataKey={xAxisKey} \n              tick={{ fontSize: 12, fill: '#6b7280' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n            />\n            <YAxis \n              tick={{ fontSize: 12, fill: '#6b7280' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n              tickFormatter={formatValue}\n            />\n            <Tooltip content={<CustomTooltip />} />\n            <Line \n              type=\"monotone\" \n              dataKey={yAxisKey} \n              stroke={CHART_COLORS.blue} \n              strokeWidth={3}\n              dot={{ r: 4, fill: CHART_COLORS.blue, strokeWidth: 2, stroke: 'white' }}\n              activeDot={{ \n                r: 6, \n                stroke: CHART_COLORS.blue, \n                strokeWidth: 3,\n                fill: 'white'\n              }}\n            />\n          </LineChart>\n        </ResponsiveContainer>\n      );\n\n    case 'prediction':\n      return (\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <LineChart {...commonProps}>\n            <CartesianGrid \n              strokeDasharray=\"none\" \n              stroke=\"#f3f4f6\" \n              strokeWidth={1}\n              horizontal={true}\n              vertical={false}\n            />\n            <XAxis \n              dataKey={xAxisKey} \n              tick={{ fontSize: 12, fill: '#6b7280' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n            />\n            <YAxis \n              tick={{ fontSize: 12, fill: '#6b7280' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n              tickFormatter={formatValue}\n            />\n            <Tooltip content={<CustomTooltip />} />\n            <Line \n              type=\"monotone\" \n              dataKey={yAxisKey} \n              stroke={CHART_COLORS.green} \n              strokeWidth={3}\n              strokeDasharray=\"5 5\"\n              dot={{ r: 4, fill: CHART_COLORS.green, strokeWidth: 2, stroke: 'white' }}\n              activeDot={{ \n                r: 6, \n                stroke: CHART_COLORS.green, \n                strokeWidth: 3,\n                fill: 'white'\n              }}\n            />\n          </LineChart>\n        </ResponsiveContainer>\n      );\n\n    default: // bar\n      const barColors = [CHART_COLORS.yellow, CHART_COLORS.blue, CHART_COLORS.green, CHART_COLORS.red];\n      return (\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <BarChart {...commonProps}>\n            <CartesianGrid \n              strokeDasharray=\"none\" \n              stroke=\"#f3f4f6\" \n              strokeWidth={1}\n              horizontal={true}\n              vertical={false}\n            />\n            <XAxis \n              dataKey={xAxisKey} \n              tick={{ fontSize: 12, fill: '#6b7280' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n            />\n            <YAxis \n              tick={{ fontSize: 12, fill: '#6b7280' }}\n              stroke=\"transparent\"\n              tickLine={false}\n              axisLine={false}\n              tickFormatter={formatValue}\n            />\n            <Tooltip content={<CustomTooltip />} />\n            <Bar \n              dataKey={yAxisKey} \n              radius={[4, 4, 0, 0]}\n            >\n              {data.map((entry, index) => (\n                <Cell \n                  key={`cell-${index}`} \n                  fill={barColors[index % barColors.length]}\n                />\n              ))}\n            </Bar>\n          </BarChart>\n        </ResponsiveContainer>\n      );\n  }\n}","size_bytes":5660},"client/src/components/TopNavBar.tsx":{"content":"import { useState } from \"react\";\nimport { Search, Bell, Settings, User, ChevronDown, Menu, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface TopNavBarProps {\n  onSearchChange?: (query: string) => void;\n}\n\nexport default function TopNavBar({ onSearchChange }: TopNavBarProps) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [notificationCount] = useState(3);\n\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const query = e.target.value;\n    setSearchQuery(query);\n    onSearchChange?.(query);\n  };\n\n  return (\n    <div className=\"bg-white border-b border-gray-200 shadow-sm\">\n      <div className=\"flex items-center justify-between px-6 py-3\">\n        {/* Left Section - Logo/Brand */}\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center\">\n              <span className=\"text-white font-bold text-sm\">SC</span>\n            </div>\n            <h1 className=\"text-xl font-semibold text-gray-900\">StockCéramique</h1>\n          </div>\n        </div>\n\n        {/* Center Section - Search Bar */}\n        <div className=\"flex-1 max-w-md mx-8\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n            <Input\n              type=\"text\"\n              placeholder=\"Rechercher...\"\n              value={searchQuery}\n              onChange={handleSearchChange}\n              className=\"pl-10 pr-4 py-2 w-full bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors\"\n            />\n          </div>\n        </div>\n\n        {/* Right Section - Actions */}\n        <div className=\"flex items-center space-x-3\">\n          {/* Notifications */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"relative p-2 hover:bg-gray-100 rounded-lg\"\n          >\n            <Bell className=\"w-5 h-5 text-gray-600\" />\n            {notificationCount > 0 && (\n              <Badge className=\"absolute -top-1 -right-1 min-w-[1.2rem] h-5 text-xs bg-red-500 hover:bg-red-500\">\n                {notificationCount}\n              </Badge>\n            )}\n          </Button>\n\n          {/* Settings */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"p-2 hover:bg-gray-100 rounded-lg\"\n          >\n            <Settings className=\"w-5 h-5 text-gray-600\" />\n          </Button>\n\n          {/* Profile Dropdown */}\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                className=\"flex items-center space-x-2 px-3 py-2 hover:bg-gray-100 rounded-lg\"\n              >\n                <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n                  <User className=\"w-4 h-4 text-blue-600\" />\n                </div>\n                <div className=\"hidden md:block text-left\">\n                  <p className=\"text-sm font-medium text-gray-900\">Admin</p>\n                  <p className=\"text-xs text-gray-500\">Administrateur</p>\n                </div>\n                <ChevronDown className=\"w-4 h-4 text-gray-400\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent className=\"w-56\" align=\"end\">\n              <DropdownMenuLabel>Mon Compte</DropdownMenuLabel>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem>\n                <User className=\"mr-2 h-4 w-4\" />\n                Profil\n              </DropdownMenuItem>\n              <DropdownMenuItem>\n                <Settings className=\"mr-2 h-4 w-4\" />\n                Paramètres\n              </DropdownMenuItem>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem className=\"text-red-600\">\n                Déconnexion\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":4429},"client/src/components/UserPreferences.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { WindowsCard, WindowsCardContent } from \"@/components/WindowsCard\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  User, \n  Mail, \n  Phone, \n  MapPin, \n  Calendar,\n  Clock,\n  Globe,\n  Monitor,\n  Smartphone,\n  Printer,\n  Database,\n  FileText,\n  Save\n} from \"lucide-react\";\n\ninterface UserProfile {\n  // Personal Info\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  department: string;\n  role: string;\n  \n  // Preferences\n  defaultView: string;\n  itemsPerPage: number;\n  defaultCurrency: string;\n  dateFormat: string;\n  timeFormat: string;\n  numberFormat: string;\n  \n  // Workflow\n  defaultSupplier: string;\n  defaultRequestor: string;\n  autoApprovalLimit: number;\n  emailNotifications: boolean;\n  smsNotifications: boolean;\n  \n  // Display\n  showPrices: boolean;\n  showStock: boolean;\n  compactMode: boolean;\n  showThumbnails: boolean;\n  \n  // Reports\n  defaultReportFormat: string;\n  includeImages: boolean;\n  watermark: boolean;\n}\n\ninterface UserPreferencesProps {\n  onClose?: () => void;\n}\n\nexport default function UserPreferences({ onClose }: UserPreferencesProps) {\n  const { toast } = useToast();\n  const [profile, setProfile] = useState<UserProfile>({\n    // Personal Info defaults\n    firstName: '',\n    lastName: '',\n    email: '',\n    phone: '',\n    department: 'Logistique',\n    role: 'Gestionnaire de Stock',\n    \n    // Preferences defaults\n    defaultView: 'grid',\n    itemsPerPage: 25,\n    defaultCurrency: 'EUR',\n    dateFormat: 'DD/MM/YYYY',\n    timeFormat: '24h',\n    numberFormat: 'fr-FR',\n    \n    // Workflow defaults\n    defaultSupplier: '',\n    defaultRequestor: '',\n    autoApprovalLimit: 1000,\n    emailNotifications: true,\n    smsNotifications: false,\n    \n    // Display defaults\n    showPrices: true,\n    showStock: true,\n    compactMode: false,\n    showThumbnails: true,\n    \n    // Reports defaults\n    defaultReportFormat: 'PDF',\n    includeImages: true,\n    watermark: false\n  });\n\n  const [hasChanges, setHasChanges] = useState(false);\n\n  const updateProfile = (key: keyof UserProfile, value: any) => {\n    setProfile(prev => ({ ...prev, [key]: value }));\n    setHasChanges(true);\n  };\n\n  const saveProfile = () => {\n    localStorage.setItem('stockceramique-user-profile', JSON.stringify(profile));\n    setHasChanges(false);\n    toast({\n      title: \"Profil sauvegardé\",\n      description: \"Vos préférences utilisateur ont été enregistrées\",\n    });\n  };\n\n  const departments = [\n    'Logistique',\n    'Achats',\n    'Production',\n    'Maintenance',\n    'Qualité',\n    'Administration',\n    'Direction'\n  ];\n\n  const roles = [\n    'Gestionnaire de Stock',\n    'Responsable Achats',\n    'Technicien',\n    'Superviseur',\n    'Directeur',\n    'Utilisateur'\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"w-10 h-10 bg-blue-50 rounded-sm flex items-center justify-center\">\n            <User className=\"w-5 h-5 text-blue-600\" />\n          </div>\n          <div>\n            <h2 className=\"text-xl font-semibold text-gray-900\">Préférences Utilisateur</h2>\n            <p className=\"text-sm text-gray-600\">Personnalisez votre profil et vos préférences de travail</p>\n          </div>\n        </div>\n        {hasChanges && (\n          <Badge variant=\"secondary\" className=\"text-orange-600 bg-orange-50\">\n            Modifications non sauvegardées\n          </Badge>\n        )}\n      </div>\n\n      {/* Personal Information */}\n      <WindowsCard>\n        <div className=\"p-6 border-b border-gray-100\">\n          <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n            <User className=\"w-5 h-5 mr-2\" />\n            Informations Personnelles\n          </h3>\n        </div>\n        <WindowsCardContent className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <Label htmlFor=\"firstName\">Prénom</Label>\n              <Input\n                id=\"firstName\"\n                value={profile.firstName}\n                onChange={(e) => updateProfile('firstName', e.target.value)}\n                placeholder=\"Votre prénom\"\n                className=\"mt-2\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"lastName\">Nom</Label>\n              <Input\n                id=\"lastName\"\n                value={profile.lastName}\n                onChange={(e) => updateProfile('lastName', e.target.value)}\n                placeholder=\"Votre nom\"\n                className=\"mt-2\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"email\">Email</Label>\n              <div className=\"relative mt-2\">\n                <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                <Input\n                  id=\"email\"\n                  type=\"email\"\n                  value={profile.email}\n                  onChange={(e) => updateProfile('email', e.target.value)}\n                  placeholder=\"votre.email@entreprise.com\"\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n            <div>\n              <Label htmlFor=\"phone\">Téléphone</Label>\n              <div className=\"relative mt-2\">\n                <Phone className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                <Input\n                  id=\"phone\"\n                  value={profile.phone}\n                  onChange={(e) => updateProfile('phone', e.target.value)}\n                  placeholder=\"01 23 45 67 89\"\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n            <div>\n              <Label htmlFor=\"department\">Département</Label>\n              <Select value={profile.department} onValueChange={(value) => updateProfile('department', value)}>\n                <SelectTrigger className=\"mt-2\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {departments.map((dept) => (\n                    <SelectItem key={dept} value={dept}>{dept}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <Label htmlFor=\"role\">Rôle</Label>\n              <Select value={profile.role} onValueChange={(value) => updateProfile('role', value)}>\n                <SelectTrigger className=\"mt-2\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {roles.map((role) => (\n                    <SelectItem key={role} value={role}>{role}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </WindowsCardContent>\n      </WindowsCard>\n\n      {/* Display Preferences */}\n      <WindowsCard>\n        <div className=\"p-6 border-b border-gray-100\">\n          <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n            <Monitor className=\"w-5 h-5 mr-2\" />\n            Préférences d'Affichage\n          </h3>\n        </div>\n        <WindowsCardContent className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <Label>Vue par défaut</Label>\n              <Select value={profile.defaultView} onValueChange={(value) => updateProfile('defaultView', value)}>\n                <SelectTrigger className=\"mt-2\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"grid\">Grille</SelectItem>\n                  <SelectItem value=\"list\">Liste</SelectItem>\n                  <SelectItem value=\"card\">Cartes</SelectItem>\n                  <SelectItem value=\"table\">Tableau</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <Label>Éléments par page</Label>\n              <Select \n                value={profile.itemsPerPage.toString()} \n                onValueChange={(value) => updateProfile('itemsPerPage', parseInt(value))}\n              >\n                <SelectTrigger className=\"mt-2\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"10\">10</SelectItem>\n                  <SelectItem value=\"25\">25</SelectItem>\n                  <SelectItem value=\"50\">50</SelectItem>\n                  <SelectItem value=\"100\">100</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <Separator className=\"my-6\" />\n\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-sm font-medium\">Afficher les prix</Label>\n                <p className=\"text-xs text-gray-600\">Montre les prix dans les listes d'articles</p>\n              </div>\n              <Switch\n                checked={profile.showPrices}\n                onCheckedChange={(checked) => updateProfile('showPrices', checked)}\n              />\n            </div>\n            \n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-sm font-medium\">Afficher le stock</Label>\n                <p className=\"text-xs text-gray-600\">Montre les quantités en stock</p>\n              </div>\n              <Switch\n                checked={profile.showStock}\n                onCheckedChange={(checked) => updateProfile('showStock', checked)}\n              />\n            </div>\n            \n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-sm font-medium\">Mode compact</Label>\n                <p className=\"text-xs text-gray-600\">Affichage plus dense pour économiser l'espace</p>\n              </div>\n              <Switch\n                checked={profile.compactMode}\n                onCheckedChange={(checked) => updateProfile('compactMode', checked)}\n              />\n            </div>\n            \n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-sm font-medium\">Afficher les miniatures</Label>\n                <p className=\"text-xs text-gray-600\">Montre les images d'aperçu des articles</p>\n              </div>\n              <Switch\n                checked={profile.showThumbnails}\n                onCheckedChange={(checked) => updateProfile('showThumbnails', checked)}\n              />\n            </div>\n          </div>\n        </WindowsCardContent>\n      </WindowsCard>\n\n      {/* Workflow Preferences */}\n      <WindowsCard>\n        <div className=\"p-6 border-b border-gray-100\">\n          <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n            <Database className=\"w-5 h-5 mr-2\" />\n            Préférences de Workflow\n          </h3>\n        </div>\n        <WindowsCardContent className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <Label>Monnaie par défaut</Label>\n              <Select value={profile.defaultCurrency} onValueChange={(value) => updateProfile('defaultCurrency', value)}>\n                <SelectTrigger className=\"mt-2\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"EUR\">Euro (€)</SelectItem>\n                  <SelectItem value=\"USD\">Dollar US ($)</SelectItem>\n                  <SelectItem value=\"GBP\">Livre Sterling (£)</SelectItem>\n                  <SelectItem value=\"CHF\">Franc Suisse (CHF)</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div>\n              <Label>Format de date</Label>\n              <Select value={profile.dateFormat} onValueChange={(value) => updateProfile('dateFormat', value)}>\n                <SelectTrigger className=\"mt-2\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"DD/MM/YYYY\">DD/MM/YYYY</SelectItem>\n                  <SelectItem value=\"MM/DD/YYYY\">MM/DD/YYYY</SelectItem>\n                  <SelectItem value=\"YYYY-MM-DD\">YYYY-MM-DD</SelectItem>\n                  <SelectItem value=\"DD.MM.YYYY\">DD.MM.YYYY</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div>\n              <Label>Format d'heure</Label>\n              <Select value={profile.timeFormat} onValueChange={(value) => updateProfile('timeFormat', value)}>\n                <SelectTrigger className=\"mt-2\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"24h\">24 heures</SelectItem>\n                  <SelectItem value=\"12h\">12 heures (AM/PM)</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div>\n              <Label>Limite d'approbation automatique</Label>\n              <Input\n                type=\"number\"\n                value={profile.autoApprovalLimit}\n                onChange={(e) => updateProfile('autoApprovalLimit', parseFloat(e.target.value))}\n                className=\"mt-2\"\n                placeholder=\"1000\"\n              />\n              <p className=\"text-xs text-gray-600 mt-1\">Montant maximum pour approbation automatique (€)</p>\n            </div>\n          </div>\n\n          <Separator className=\"my-6\" />\n\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-sm font-medium\">Notifications email</Label>\n                <p className=\"text-xs text-gray-600\">Recevoir les alertes par email</p>\n              </div>\n              <Switch\n                checked={profile.emailNotifications}\n                onCheckedChange={(checked) => updateProfile('emailNotifications', checked)}\n              />\n            </div>\n            \n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-sm font-medium\">Notifications SMS</Label>\n                <p className=\"text-xs text-gray-600\">Recevoir les alertes urgentes par SMS</p>\n              </div>\n              <Switch\n                checked={profile.smsNotifications}\n                onCheckedChange={(checked) => updateProfile('smsNotifications', checked)}\n              />\n            </div>\n          </div>\n        </WindowsCardContent>\n      </WindowsCard>\n\n      {/* Report Preferences */}\n      <WindowsCard>\n        <div className=\"p-6 border-b border-gray-100\">\n          <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n            <FileText className=\"w-5 h-5 mr-2\" />\n            Préférences de Rapports\n          </h3>\n        </div>\n        <WindowsCardContent className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <Label>Format par défaut</Label>\n              <Select value={profile.defaultReportFormat} onValueChange={(value) => updateProfile('defaultReportFormat', value)}>\n                <SelectTrigger className=\"mt-2\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"PDF\">PDF</SelectItem>\n                  <SelectItem value=\"Excel\">Excel</SelectItem>\n                  <SelectItem value=\"CSV\">CSV</SelectItem>\n                  <SelectItem value=\"Word\">Word</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <Separator className=\"my-6\" />\n\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-sm font-medium\">Inclure les images</Label>\n                <p className=\"text-xs text-gray-600\">Ajouter les photos d'articles dans les rapports</p>\n              </div>\n              <Switch\n                checked={profile.includeImages}\n                onCheckedChange={(checked) => updateProfile('includeImages', checked)}\n              />\n            </div>\n            \n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-sm font-medium\">Filigrane</Label>\n                <p className=\"text-xs text-gray-600\">Ajouter un filigrane sur les documents</p>\n              </div>\n              <Switch\n                checked={profile.watermark}\n                onCheckedChange={(checked) => updateProfile('watermark', checked)}\n              />\n            </div>\n          </div>\n        </WindowsCardContent>\n      </WindowsCard>\n\n      {/* Actions */}\n      <div className=\"flex justify-end space-x-3\">\n        <Button variant=\"outline\" onClick={onClose}>\n          Annuler\n        </Button>\n        <Button \n          onClick={saveProfile}\n          disabled={!hasChanges}\n          className=\"flex items-center space-x-2\"\n        >\n          <Save className=\"w-4 h-4\" />\n          <span>Sauvegarder</span>\n        </Button>\n      </div>\n    </div>\n  );\n}","size_bytes":17892},"client/src/hooks/useSettings.ts":{"content":"import { useState, useEffect, createContext, useContext } from 'react';\n\ninterface AppSettings {\n  // Appearance\n  theme: 'light' | 'dark' | 'auto';\n  language: string;\n  density: 'compact' | 'comfortable' | 'spacious';\n  accentColor: string;\n  fontSize: number;\n  animations: boolean;\n  \n  // Functionality\n  autoSave: boolean;\n  autoRefresh: boolean;\n  refreshInterval: number;\n  notifications: boolean;\n  soundEffects: boolean;\n  confirmActions: boolean;\n  \n  // Data & Performance\n  cacheSize: number;\n  offlineMode: boolean;\n  dataValidation: boolean;\n  performanceMode: 'standard' | 'optimized' | 'maximum';\n  \n  // Security\n  sessionTimeout: number;\n  autoLogout: boolean;\n  auditLogging: boolean;\n  twoFactorAuth: boolean;\n  \n  // Advanced\n  developerMode: boolean;\n  debugMode: boolean;\n  apiTimeout: number;\n  maxRetries: number;\n}\n\ninterface SettingsContextType {\n  settings: AppSettings;\n  updateSetting: <K extends keyof AppSettings>(key: K, value: AppSettings[K]) => void;\n  resetSettings: () => void;\n  exportSettings: () => string;\n  importSettings: (settingsJson: string) => void;\n}\n\nconst defaultSettings: AppSettings = {\n  // Appearance defaults\n  theme: 'light',\n  language: 'fr',\n  density: 'comfortable',\n  accentColor: '#3B82F6',\n  fontSize: 14,\n  animations: true,\n  \n  // Functionality defaults\n  autoSave: true,\n  autoRefresh: true,\n  refreshInterval: 30,\n  notifications: true,\n  soundEffects: false,\n  confirmActions: true,\n  \n  // Data & Performance defaults\n  cacheSize: 100,\n  offlineMode: true,\n  dataValidation: true,\n  performanceMode: 'standard',\n  \n  // Security defaults\n  sessionTimeout: 60,\n  autoLogout: true,\n  auditLogging: true,\n  twoFactorAuth: false,\n  \n  // Advanced defaults\n  developerMode: false,\n  debugMode: false,\n  apiTimeout: 10000,\n  maxRetries: 3\n};\n\nconst SettingsContext = createContext<SettingsContextType | undefined>(undefined);\n\nexport const useSettings = () => {\n  const context = useContext(SettingsContext);\n  if (!context) {\n    throw new Error('useSettings must be used within a SettingsProvider');\n  }\n  return context;\n};\n\nexport const useSettingsHook = () => {\n  const [settings, setSettings] = useState<AppSettings>(defaultSettings);\n\n  // Load settings from localStorage on mount\n  useEffect(() => {\n    const savedSettings = localStorage.getItem('stockceramique-settings');\n    if (savedSettings) {\n      try {\n        const parsed = JSON.parse(savedSettings);\n        setSettings(prev => ({ ...prev, ...parsed }));\n      } catch (error) {\n        console.error('Failed to load settings:', error);\n      }\n    }\n  }, []);\n\n  // Save settings to localStorage whenever they change\n  useEffect(() => {\n    localStorage.setItem('stockceramique-settings', JSON.stringify(settings));\n  }, [settings]);\n\n  const updateSetting = <K extends keyof AppSettings>(key: K, value: AppSettings[K]) => {\n    setSettings(prev => ({ ...prev, [key]: value }));\n  };\n\n  const resetSettings = () => {\n    setSettings(defaultSettings);\n    localStorage.removeItem('stockceramique-settings');\n  };\n\n  const exportSettings = (): string => {\n    return JSON.stringify(settings, null, 2);\n  };\n\n  const importSettings = (settingsJson: string) => {\n    try {\n      const imported = JSON.parse(settingsJson);\n      setSettings(prev => ({ ...prev, ...imported }));\n    } catch (error) {\n      throw new Error('Invalid settings format');\n    }\n  };\n\n  return {\n    settings,\n    updateSetting,\n    resetSettings,\n    exportSettings,\n    importSettings\n  };\n};\n\n// Context Provider component (you would wrap your app with this)\nexport const SettingsProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const settingsHook = useSettingsHook();\n  \n  return (\n    <SettingsContext.Provider value={settingsHook}>\n      {children}\n    </SettingsContext.Provider>\n  );\n};","size_bytes":3826},"client/src/pages/Analytics.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { WindowsCard, WindowsCardContent } from \"@/components/WindowsCard\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { \n  Brain, \n  TrendingUp, \n  BarChart3, \n  Activity, \n  Download,\n  Calendar,\n  AlertTriangle,\n  Package,\n  ShoppingCart,\n  Truck\n} from \"lucide-react\";\nimport InteractiveChart from \"@/components/InteractiveChart\";\nimport PredictiveAnalytics from \"@/components/PredictiveAnalytics\";\nimport PerformanceMonitor from \"@/components/PerformanceMonitor\";\nimport PerformanceOptimizer from \"@/components/PerformanceOptimizer\";\n\nexport default function Analytics() {\n  const [timeRange, setTimeRange] = useState('3months');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n\n  const { data: articles = [] } = useQuery<any[]>({\n    queryKey: [\"/api/articles\"],\n  });\n\n  const { data: stockMovements = [] } = useQuery<any[]>({\n    queryKey: [\"/api/stock-movements\"],\n  });\n\n  const { data: purchaseRequests = [] } = useQuery<any[]>({\n    queryKey: [\"/api/purchase-requests\"],\n  });\n\n  const { data: receptions = [] } = useQuery<any[]>({\n    queryKey: [\"/api/receptions\"],\n  });\n\n  const { data: outbounds = [] } = useQuery<any[]>({\n    queryKey: [\"/api/outbounds\"],\n  });\n\n  const { data: suppliers = [] } = useQuery<any[]>({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  // Generate analytics data\n  const generateInventoryTrends = () => {\n    const months = ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun'];\n    return months.map((month, index) => ({\n      month,\n      totalStock: Math.floor(Math.random() * 1000 + 500),\n      stockValue: Math.floor(Math.random() * 50000 + 25000),\n      lowStock: Math.floor(Math.random() * 20 + 5),\n      movements: Math.floor(Math.random() * 100 + 50)\n    }));\n  };\n\n  const generateSupplierPerformance = () => {\n    return suppliers.slice(0, 6).map((supplier: any) => ({\n      supplier: supplier.nom || `Fournisseur ${supplier.id?.slice(0, 6)}`,\n      deliveryTime: Math.floor(Math.random() * 20 + 5),\n      quality: Math.floor(Math.random() * 20 + 80),\n      orderVolume: Math.floor(Math.random() * 100000 + 10000),\n      onTimeDelivery: Math.floor(Math.random() * 20 + 75)\n    }));\n  };\n\n  const generateCategoryAnalysis = () => {\n    const categories = [...new Set(articles.map((a: any) => a.categorie))];\n    return categories.slice(0, 8).map(category => ({\n      category: category || 'Non catégorisé',\n      count: articles.filter((a: any) => a.categorie === category).length,\n      avgPrice: Math.floor(Math.random() * 500 + 50),\n      totalValue: Math.floor(Math.random() * 100000 + 10000),\n      turnover: Math.floor(Math.random() * 10 + 1)\n    }));\n  };\n\n  const generateMovementTrends = () => {\n    const weeks = ['S1', 'S2', 'S3', 'S4', 'S5', 'S6', 'S7', 'S8'];\n    return weeks.map(week => ({\n      week,\n      entrees: Math.floor(Math.random() * 200 + 50),\n      sorties: Math.floor(Math.random() * 150 + 30),\n      net: Math.floor(Math.random() * 100 - 50)\n    }));\n  };\n\n  const inventoryTrends = generateInventoryTrends();\n  const supplierPerformance = generateSupplierPerformance();\n  const categoryAnalysis = generateCategoryAnalysis();\n  const movementTrends = generateMovementTrends();\n\n  const handleExportReport = (format: 'pdf' | 'excel') => {\n    // In a real application, this would generate and download the report\n    console.log(`Exporting analytics report as ${format}`);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold text-gray-900 flex items-center\">\n            <Brain className=\"w-8 h-8 mr-3 text-blue-600\" />\n            Analytics & Intelligence\n          </h1>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Analyse avancée et prédictions pour votre inventaire\n          </p>\n        </div>\n        <div className=\"flex items-center space-x-3\">\n          <Select value={timeRange} onValueChange={setTimeRange}>\n            <SelectTrigger className=\"w-40\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"1month\">1 mois</SelectItem>\n              <SelectItem value=\"3months\">3 mois</SelectItem>\n              <SelectItem value=\"6months\">6 mois</SelectItem>\n              <SelectItem value=\"1year\">1 an</SelectItem>\n            </SelectContent>\n          </Select>\n          <Button\n            variant=\"outline\"\n            onClick={() => handleExportReport('pdf')}\n            className=\"flex items-center space-x-2\"\n          >\n            <Download className=\"w-4 h-4\" />\n            <span>Export PDF</span>\n          </Button>\n        </div>\n      </div>\n\n      {/* Quick Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <WindowsCard>\n          <WindowsCardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Total Articles</p>\n                <p className=\"text-2xl font-bold text-blue-600\">{articles.length}</p>\n              </div>\n              <Package className=\"w-8 h-8 text-blue-600\" />\n            </div>\n          </WindowsCardContent>\n        </WindowsCard>\n\n        <WindowsCard>\n          <WindowsCardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Fournisseurs Actifs</p>\n                <p className=\"text-2xl font-bold text-green-600\">{suppliers.length}</p>\n              </div>\n              <Truck className=\"w-8 h-8 text-green-600\" />\n            </div>\n          </WindowsCardContent>\n        </WindowsCard>\n\n        <WindowsCard>\n          <WindowsCardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Demandes ce Mois</p>\n                <p className=\"text-2xl font-bold text-orange-600\">{purchaseRequests.length}</p>\n              </div>\n              <ShoppingCart className=\"w-8 h-8 text-orange-600\" />\n            </div>\n          </WindowsCardContent>\n        </WindowsCard>\n\n        <WindowsCard>\n          <WindowsCardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Mouvements</p>\n                <p className=\"text-2xl font-bold text-purple-600\">{stockMovements.length}</p>\n              </div>\n              <Activity className=\"w-8 h-8 text-purple-600\" />\n            </div>\n          </WindowsCardContent>\n        </WindowsCard>\n      </div>\n\n      {/* Main Analytics Tabs */}\n      <Tabs defaultValue=\"overview\" className=\"space-y-6\">\n        <TabsList className=\"grid w-full grid-cols-5\">\n          <TabsTrigger value=\"overview\">Vue d'ensemble</TabsTrigger>\n          <TabsTrigger value=\"inventory\">Inventaire</TabsTrigger>\n          <TabsTrigger value=\"suppliers\">Fournisseurs</TabsTrigger>\n          <TabsTrigger value=\"predictions\">Prédictions</TabsTrigger>\n          <TabsTrigger value=\"performance\">Performance</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\" className=\"space-y-6\">\n          {/* Inventory Trends */}\n          <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n            <InteractiveChart\n              data={inventoryTrends}\n              title=\"Évolution du Stock\"\n              description=\"Tendances sur 6 mois\"\n              xAxisKey=\"month\"\n              yAxisKey=\"totalStock\"\n              defaultType=\"area\"\n              colors={['#3B82F6']}\n              showAnalytics={true}\n            />\n\n            <InteractiveChart\n              data={movementTrends}\n              title=\"Mouvements de Stock\"\n              description=\"Entrées vs Sorties (8 dernières semaines)\"\n              xAxisKey=\"week\"\n              yAxisKey=\"entrees\"\n              defaultType=\"bar\"\n              colors={['#10B981', '#EF4444']}\n              showAnalytics={true}\n            />\n          </div>\n\n          {/* Category Analysis */}\n          <InteractiveChart\n            data={categoryAnalysis}\n            title=\"Analyse par Catégorie\"\n            description=\"Répartition des articles et valeur par catégorie\"\n            xAxisKey=\"category\"\n            yAxisKey=\"count\"\n            defaultType=\"bar\"\n            colors={['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6']}\n            enableDrillDown={true}\n            showAnalytics={true}\n          />\n        </TabsContent>\n\n        <TabsContent value=\"inventory\" className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n            <InteractiveChart\n              data={categoryAnalysis}\n              title=\"Valeur par Catégorie\"\n              description=\"Valeur totale du stock par catégorie\"\n              xAxisKey=\"category\"\n              yAxisKey=\"totalValue\"\n              defaultType=\"pie\"\n              colors={['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#06B6D4']}\n              showAnalytics={true}\n            />\n\n            <InteractiveChart\n              data={categoryAnalysis}\n              title=\"Rotation des Stocks\"\n              description=\"Taux de rotation par catégorie\"\n              xAxisKey=\"category\"\n              yAxisKey=\"turnover\"\n              defaultType=\"bar\"\n              colors={['#10B981']}\n              showAnalytics={true}\n            />\n          </div>\n\n          {/* Stock Alerts */}\n          <WindowsCard>\n            <div className=\"p-6 border-b border-gray-100\">\n              <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n                <AlertTriangle className=\"w-5 h-5 mr-2 text-orange-600\" />\n                Alertes de Stock\n              </h3>\n            </div>\n            <WindowsCardContent className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"text-center p-4 bg-red-50 rounded-lg\">\n                  <div className=\"text-2xl font-bold text-red-600\">3</div>\n                  <div className=\"text-sm text-red-700\">Stock Critique</div>\n                </div>\n                <div className=\"text-center p-4 bg-yellow-50 rounded-lg\">\n                  <div className=\"text-2xl font-bold text-yellow-600\">8</div>\n                  <div className=\"text-sm text-yellow-700\">Stock Bas</div>\n                </div>\n                <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n                  <div className=\"text-2xl font-bold text-blue-600\">12</div>\n                  <div className=\"text-sm text-blue-700\">À Réapprovisionner</div>\n                </div>\n              </div>\n            </WindowsCardContent>\n          </WindowsCard>\n        </TabsContent>\n\n        <TabsContent value=\"suppliers\" className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n            <InteractiveChart\n              data={supplierPerformance}\n              title=\"Performance des Fournisseurs\"\n              description=\"Temps de livraison moyen (jours)\"\n              xAxisKey=\"supplier\"\n              yAxisKey=\"deliveryTime\"\n              defaultType=\"bar\"\n              colors={['#F59E0B']}\n              showAnalytics={true}\n            />\n\n            <InteractiveChart\n              data={supplierPerformance}\n              title=\"Qualité des Fournisseurs\"\n              description=\"Score de qualité (%)\"\n              xAxisKey=\"supplier\"\n              yAxisKey=\"quality\"\n              defaultType=\"line\"\n              colors={['#10B981']}\n              showAnalytics={true}\n            />\n          </div>\n\n          {/* Add Performance Optimizer to Analytics */}\n          <div className=\"mt-6\">\n            <WindowsCard>\n              <div className=\"p-6 border-b border-gray-100\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Optimisation des Performances</h3>\n              </div>\n              <WindowsCardContent className=\"p-6\">\n                <PerformanceOptimizer />\n              </WindowsCardContent>\n            </WindowsCard>\n          </div>\n\n          <InteractiveChart\n            data={supplierPerformance}\n            title=\"Volume des Commandes\"\n            description=\"Volume total des commandes par fournisseur\"\n            xAxisKey=\"supplier\"\n            yAxisKey=\"orderVolume\"\n            defaultType=\"area\"\n            colors={['#3B82F6']}\n            showAnalytics={true}\n          />\n        </TabsContent>\n\n        <TabsContent value=\"predictions\" className=\"space-y-6\">\n          <PredictiveAnalytics showGlobalInsights={true} />\n        </TabsContent>\n\n        <TabsContent value=\"performance\" className=\"space-y-6\">\n          <PerformanceMonitor />\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}","size_bytes":13234},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });","size_bytes":482},"client/src/components/ConvertToReceptionDialog.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Package2, ArrowRight } from \"lucide-react\";\nimport { convertToReceptionSchema, type ConvertToReception, type PurchaseRequest } from \"@shared/schema\";\n\ninterface ConvertToReceptionDialogProps {\n  purchaseRequest: PurchaseRequest;\n  children?: React.ReactNode;\n}\n\nexport function ConvertToReceptionDialog({ purchaseRequest, children }: ConvertToReceptionDialogProps) {\n  const [open, setOpen] = useState(false);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  \n  const form = useForm<ConvertToReception>({\n    resolver: zodResolver(convertToReceptionSchema),\n    defaultValues: {\n      quantiteRecue: purchaseRequest.quantiteDemandee,\n      prixUnitaire: null,\n      numeroBonLivraison: \"\",\n      observations: `Réception pour demande d'achat ${purchaseRequest.id.slice(0, 8)}`,\n      dateReception: new Date().toISOString().split('T')[0],\n    },\n  });\n\n  const convertMutation = useMutation({\n    mutationFn: (data: ConvertToReception) =>\n      apiRequest(\"POST\", `/api/purchase-requests/${purchaseRequest.id}/convert-to-reception`, data),\n    onSuccess: () => {\n      toast({\n        title: \"Conversion réussie\",\n        description: \"La demande d'achat a été convertie en réception\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/purchase-requests\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/receptions\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      setOpen(false);\n      form.reset();\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erreur\",\n        description: \"Impossible de convertir la demande d'achat\",\n      });\n    },\n  });\n\n  const onSubmit = (data: ConvertToReception) => {\n    convertMutation.mutate(data);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        {children || (\n          <Button\n            size=\"sm\"\n            className=\"bg-green-600 hover:bg-green-700 text-white\"\n            data-testid={`button-convert-${purchaseRequest.id}`}\n          >\n            <Package2 className=\"h-4 w-4 mr-2\" />\n            Convertir en Réception\n          </Button>\n        )}\n      </DialogTrigger>\n      <DialogContent className=\"max-w-2xl\" data-testid=\"dialog-convert-reception\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2 text-xl\">\n            <Package2 className=\"h-6 w-6 text-green-600\" />\n            Convertir en Réception\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg mb-6\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n            <span className=\"font-medium text-blue-800 dark:text-blue-200\">\n              Demande d'achat #{purchaseRequest.id.slice(0, 8)}\n            </span>\n          </div>\n          <div className=\"grid grid-cols-2 gap-4 text-sm\">\n            <div>\n              <span className=\"text-gray-600 dark:text-gray-400\">Quantité demandée:</span>\n              <span className=\"ml-2 font-medium\">{purchaseRequest.quantiteDemandee}</span>\n            </div>\n            <div>\n              <span className=\"text-gray-600 dark:text-gray-400\">Statut:</span>\n              <span className=\"ml-2 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded text-xs\">\n                {purchaseRequest.statut}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex items-center justify-center my-4\">\n          <ArrowRight className=\"h-6 w-6 text-gray-400\" />\n        </div>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"quantiteRecue\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Quantité Reçue *</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"number\"\n                        min=\"1\"\n                        {...field}\n                        value={field.value || \"\"}\n                        onChange={(e) => field.onChange(Number(e.target.value))}\n                        data-testid=\"input-quantite-recue\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"prixUnitaire\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Prix Unitaire (€)</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"number\"\n                        step=\"0.01\"\n                        min=\"0\"\n                        {...field}\n                        value={field.value || \"\"}\n                        onChange={(e) => field.onChange(e.target.value ? Number(e.target.value) : null)}\n                        data-testid=\"input-prix-unitaire\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"numeroBonLivraison\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>N° Bon de Livraison</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        placeholder=\"BL-2025-001\"\n                        data-testid=\"input-bon-livraison\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"dateReception\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Date de Réception</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"date\"\n                        {...field}\n                        data-testid=\"input-date-reception\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"observations\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Observations</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      {...field}\n                      placeholder=\"Notes sur la réception, contrôle qualité, etc.\"\n                      rows={3}\n                      data-testid=\"textarea-observations\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end space-x-2 pt-4 border-t\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => setOpen(false)}\n                data-testid=\"button-cancel-convert\"\n              >\n                Annuler\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={convertMutation.isPending}\n                className=\"bg-green-600 hover:bg-green-700\"\n                data-testid=\"button-confirm-convert\"\n              >\n                {convertMutation.isPending ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\" />\n                    Conversion...\n                  </>\n                ) : (\n                  <>\n                    <Package2 className=\"h-4 w-4 mr-2\" />\n                    Confirmer la Réception\n                  </>\n                )}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":9156}}}